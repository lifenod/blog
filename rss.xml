<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>明无梦</title>
    <description>明无梦的博客</description>
    <link>http://www.dreamxu.com/</link>
    <atom:link href="http://www.dreamxu.com/rss.xml" rel="self" type="application/rss+xml"/>
    <language>zh-CN</language>
    <pubDate>Sun, 18 Dec 2016 19:36:12 +0800</pubDate>
    <lastBuildDate>Sun, 18 Dec 2016 19:36:12 +0800</lastBuildDate>
    <generator>Jekyll v3.1.6</generator>
    
      <item>
        <title>对 Markdown 渲染引擎 kramdown 的几点 hack</title>
        <description>&lt;p&gt;kramdown version: 1.11.1&lt;/p&gt;

&lt;h2 id=&quot;使生成-head-id-功能支持中文&quot;&gt;使生成 head ID 功能支持中文&lt;/h2&gt;

&lt;p&gt;我查看了 kramdown 选项部分的所有文档，发现它只支持 transliterated_header_ids. 
但是我不喜欢将中文音译为拼音，所以干脆直接修改代码好了，还比较简单。&lt;/p&gt;

&lt;p&gt;首先找到相关的代码，如下所示：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;c1&quot;&gt;## /lib/kramdown/converter/base.rb&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;generate_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;str&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Kramdown&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Utils&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Unidecoder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;decode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:transliterated_header_ids&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;gen_id&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;gsub&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/^[^a-zA-Z]+/&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;gen_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;tr!&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;^a-zA-Z0-9 -&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;gen_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;tr!&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39; &#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;-&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;gen_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;downcase!&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;gen_id&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;section&#39;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gen_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;length&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@used_ids&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{}&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@used_ids&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;has_key?&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gen_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;gen_id&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;-&#39;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;vi&quot;&gt;@used_ids&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gen_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_s&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@used_ids&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gen_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:auto_id_prefix&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gen_id&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;我们看上面代码中的 5-8 行，就是对 ID 的转换, str 表示 head 的 raw text.&lt;br /&gt;
原代码的意思是：取以字母开始的子串，去掉除了字母，数字，空格，连字符的字符，将空格替换为连字符，将字母变为小写&lt;/p&gt;

&lt;p&gt;我们将代码改为如下：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;generate_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;str&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Kramdown&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Utils&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Unidecoder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;decode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:transliterated_header_ids&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# gen_id = str.gsub(/^[^a-zA-Z]+/, &#39;&#39;)&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# gen_id.tr!(&#39;^a-zA-Z0-9 -&#39;, &#39;&#39;)&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# gen_id.tr!(&#39; &#39;, &#39;-&#39;)&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# gen_id.downcase!&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# gen_id = &#39;section&#39; if gen_id.length == 0&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;gen_id&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;scan&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/([a-zA-Z0-9 \-]|[^\x00-\x7F])/&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;join&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;gen_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;gsub!&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/[ \-]+/&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;-&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;gen_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;downcase!&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@used_ids&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{}&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@used_ids&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;has_key?&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gen_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;gen_id&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;-&#39;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;vi&quot;&gt;@used_ids&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gen_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_s&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@used_ids&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gen_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:auto_id_prefix&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gen_id&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;代码的意思是：移除 ASCII 字符中除了字母，数字，空格，连字符的字符，但是不移除所有非 ASCII 字符，
然后将其中空格和连字符（包括重复的）转换为一个连字符，再将其转换为小写。&lt;/p&gt;

&lt;p&gt;我个人比较喜欢这种表达 ID 的方式，所以就那么改了，你可以随便改成什么样子。&lt;/p&gt;

&lt;h2 id=&quot;绕过-alt-text-中出现-产生的-bug&quot;&gt;绕过 alt text 中出现 “|” 产生的 bug&lt;/h2&gt;

&lt;p&gt;先看几个例子体会一下这个 bug 是什么，以下都是链接的例子，当然在图片中也会有问题&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;出错，会转换为表格。&lt;/p&gt;

    &lt;div class=&quot;language-markdown highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;明无梦的博客 | 明无梦&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;](&lt;/span&gt;&lt;span class=&quot;sx&quot;&gt;http://www.dreamxu.com/&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;

    &lt;p&gt;转换为：&lt;/p&gt;

    &lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;table&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;tbody&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;tr&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;nt&quot;&gt;&amp;lt;td&amp;gt;&lt;/span&gt;[明无梦的博客&lt;span class=&quot;nt&quot;&gt;&amp;lt;/td&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;nt&quot;&gt;&amp;lt;td&amp;gt;&lt;/span&gt;明无梦](http://www.dreamxu.com/)&lt;span class=&quot;nt&quot;&gt;&amp;lt;/td&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;/tr&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;/tbody&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/table&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;正常，但是需要将 &lt;code class=&quot;highlighter-rouge&quot;&gt;|&lt;/code&gt; 转义，显然我不会这样做，我的 Markdown 代码写的没问题，
没必要修改，而且 ‘|’ 看起来不直观。&lt;/p&gt;

    &lt;div class=&quot;language-markdown highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;明无梦的博客 \| 明无梦&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;](&lt;/span&gt;&lt;span class=&quot;sx&quot;&gt;http://www.dreamxu.com/&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;

    &lt;p&gt;转换为：&lt;/p&gt;

    &lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;p&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;a&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;http://www.dreamxu.com/&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;明无梦的博客 | 明无梦&lt;span class=&quot;nt&quot;&gt;&amp;lt;/a&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/p&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;正常，但是链接前后必须有其它文字。为什么我单独写个链接就不行！显然也不是我能接受的解决方案。&lt;/p&gt;

    &lt;div class=&quot;language-markdown highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;这是一个博客：
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;明无梦的博客 | 明无梦&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;](&lt;/span&gt;&lt;span class=&quot;sx&quot;&gt;http://www.dreamxu.com/&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;

    &lt;p&gt;转换为：&lt;/p&gt;

    &lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;p&amp;gt;&lt;/span&gt;这是一个博客：
&lt;span class=&quot;nt&quot;&gt;&amp;lt;a&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;http://www.dreamxu.com/&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;明无梦的博客 | 明无梦&lt;span class=&quot;nt&quot;&gt;&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;产生这个 bug 的原因很简单，就是 kramdown 支持 PHP Markdown 式的表格，其中有用 &lt;code class=&quot;highlighter-rouge&quot;&gt;|&lt;/code&gt; 关键词，
所以会将其转换为表格。&lt;/p&gt;

&lt;p&gt;我看 Github 上也有人提出了这个 bug: &lt;a href=&quot;https://github.com/gettalong/kramdown/issues/135&quot;&gt;https://github.com/gettalong/kramdown/issues/135&lt;/a&gt;, 
看样子是已经修好了。
但是从上面的例子中也可以看出来并没有修好，所以我打算绕过这个 bug, 这是最简单的处理方式了。&lt;/p&gt;

&lt;p&gt;我们只要将其 table parse 功能取消掉就好了，反正我也不使用这种表格写法。
&lt;strong&gt;注意&lt;/strong&gt;，如果你用到了这个功能，那么就不要这么做了。&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;c1&quot;&gt;# /lib/kramdown/parser/kramdown.rb&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;initialize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;source&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;super&lt;/span&gt;

  &lt;span class=&quot;n&quot;&gt;reset_env&lt;/span&gt;

  &lt;span class=&quot;vi&quot;&gt;@alds&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{}&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@footnotes&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{}&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@link_defs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{}&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;update_link_definitions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;vi&quot;&gt;@options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:link_defs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;


  &lt;span class=&quot;c1&quot;&gt;# 原来的代码是这个样子的，将 :table 去掉即可&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;#&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# @block_parsers = [:blank_line, :codeblock, :codeblock_fenced, :blockquote, :atx_header,&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;#                   :horizontal_rule, :list, :definition_list, :block_html, :setext_header,&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;#                   :block_math, :table, :footnote_definition, :link_definition, :abbrev_definition,&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;#                   :block_extensions, :eob_marker, :paragraph]&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@block_parsers&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:blank_line&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:codeblock&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:codeblock_fenced&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:blockquote&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:atx_header&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                    &lt;span class=&quot;ss&quot;&gt;:horizontal_rule&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:definition_list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:block_html&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:setext_header&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                    &lt;span class=&quot;ss&quot;&gt;:block_math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:footnote_definition&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:link_definition&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:abbrev_definition&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                    &lt;span class=&quot;ss&quot;&gt;:block_extensions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:eob_marker&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:paragraph&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@span_parsers&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;  &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:emphasis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:codespan&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:autolink&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:span_html&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:footnote_marker&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:link&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:smart_quotes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:inline_math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                   &lt;span class=&quot;ss&quot;&gt;:span_extensions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:html_entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:typographic_syms&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:line_break&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:escaped_chars&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
        <pubDate>Mon, 11 Jul 2016 00:00:00 +0800</pubDate>
        
        <link>http://www.dreamxu.com/hack-markdown-converter-kramdown/</link>
        <guid isPermaLink="true">http://www.dreamxu.com/hack-markdown-converter-kramdown/</guid>
        
        <category>技术</category>
        
        <category>Markdown</category>
        
        <category>kramdown</category>
        
      </item>
    
      <item>
        <title>监测 Markdown 文件改动并将其转化为 HTML 文件</title>
        <description>&lt;p&gt;大脑应该记住哪些有意义的事情，也不是说我们要将很多事情遗忘&lt;br /&gt;
我们将那些随处可见以及不是很重要的事情的细节记下来，大脑只需留下些许印象即可，
当我们需要这些资料的时候，我们随时能将这些细节找出来&lt;/p&gt;

&lt;p&gt;比如专题性的东西我会用&lt;a href=&quot;http://www.dreamxu.com/books.html&quot;&gt;书籍&lt;/a&gt;的形式来记录，单篇性的东西我会用&lt;a href=&quot;http://www.dreamxu.com/&quot;&gt;博客&lt;/a&gt;的形式来记录，
短小琐碎的东西我会用 &lt;a href=&quot;http://www.dreamxu.com/bits/2016/&quot;&gt;Bits&lt;/a&gt; 的形式来记录，
以上这些都能够利用合适的工具将其转换为 HTML, 并通过 nginx 展现出来&lt;br /&gt;
还有很多分散在各个目录中的笔记，比如这个项目有一份笔记，那个项目有一份笔记等等，
我们也需要将其很好地展现出来&lt;/p&gt;

&lt;p&gt;我希望的效果是，实时监测目录或者文件，并实时将其转换为 HTML, 
有了 HTML 我们能够找到一万种方式将其完美地展示出来，
也有一万种方式让我们方便地去查找&lt;/p&gt;

&lt;p&gt;代码及使用方法：&lt;a href=&quot;https://github.com/lifenod/monitor-md-files&quot;&gt;https://github.com/lifenod/monitor-md-files&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;浏览器自动刷新&quot;&gt;浏览器自动刷新&lt;/h2&gt;

&lt;p&gt;如果想修改 MD 文件之后，浏览器能够自动刷新 HTML 页面，可使用这个 Chrome 插件：&lt;a href=&quot;https://chrome.google.com/webstore/detail/livepage/pilnojpmdoofaelbinaeodfpjheijkbh&quot;&gt;https://chrome.google.com/webstore/detail/livepage/pilnojpmdoofaelbinaeodfpjheijkbh&lt;/a&gt;&lt;/p&gt;
</description>
        <pubDate>Fri, 25 Mar 2016 00:00:00 +0800</pubDate>
        
        <link>http://www.dreamxu.com/monitor-markdown-file-changes-and-convert-it-to-html-file/</link>
        <guid isPermaLink="true">http://www.dreamxu.com/monitor-markdown-file-changes-and-convert-it-to-html-file/</guid>
        
        <category>技术</category>
        
        <category>Markdown</category>
        
        <category>HTML</category>
        
        <category>Pandoc</category>
        
        <category>Ruby</category>
        
        <category>Filewatcher</category>
        
      </item>
    
      <item>
        <title>在不同目录下执行不同的命令</title>
        <description>&lt;p&gt;我经常遇到这种情况：&lt;br /&gt;
GitBook 有 “server” 命令，例如 &lt;code class=&quot;highlighter-rouge&quot;&gt;gitbook serve&lt;/code&gt;&lt;br /&gt;
Jekyll 有 “server” 命令，例如 &lt;code class=&quot;highlighter-rouge&quot;&gt;jekyll serve&lt;/code&gt;&lt;br /&gt;
Rails 有 “server” 命令，例如 &lt;code class=&quot;highlighter-rouge&quot;&gt;rails server&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;以上命令都不尽相同，每次打 “server” 命令之前都得想一会儿到底该使用哪个命令，好烦&lt;br /&gt;
假如有一个 &lt;code class=&quot;highlighter-rouge&quot;&gt;server&lt;/code&gt; 命令，可以自动选择合适的命令去执行就好了&lt;/p&gt;

&lt;p&gt;心动不如行动，下面是我用 Ruby 写的解决方案&lt;br /&gt;
若不喜欢用 Ruby, 可用 Python, shell script 等改写一下即可&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;c1&quot;&gt;#!/usr/bin/env ruby&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;dir_commands&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;s2&quot;&gt;&quot;/Users/mwum/Gitbook/Ruby&quot;&lt;/span&gt;            &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;gitbook serve --port 4006&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;s2&quot;&gt;&quot;/Users/mwum/dx&quot;&lt;/span&gt;                      &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;jekyll serve -w&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;s2&quot;&gt;&quot;/Users/mwum/Code/Rails/chat-system&quot;&lt;/span&gt;  &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;bundle exec rails server&quot;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;dir_commands&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;command&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Dir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;pwd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dir&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;exec&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;command&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Command not found: &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;basename&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;__FILE__&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;In this directory: &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Dir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;pwd&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;将以上文件命名为 server, 并放到 bin 目录下，在给它加上可执行权限 &lt;code class=&quot;highlighter-rouge&quot;&gt;chmod +x ./server&lt;/code&gt;, 即可愉快使用了&lt;/p&gt;

&lt;p&gt;有一点需要注意的：&lt;br /&gt;
使用 &lt;code class=&quot;highlighter-rouge&quot;&gt;exec&lt;/code&gt; 比较合适，不要使用 &lt;code class=&quot;highlighter-rouge&quot;&gt;system&lt;/code&gt; 等&lt;br /&gt;
如果使用 &lt;code class=&quot;highlighter-rouge&quot;&gt;system&lt;/code&gt;, Ruby 进程并不会退出而是会等待 &lt;code class=&quot;highlighter-rouge&quot;&gt;system&lt;/code&gt; 返回，
而 server 命令不是立即返回的，所以用 &lt;code class=&quot;highlighter-rouge&quot;&gt;system&lt;/code&gt; 不合适，Ruby 进程会一直等待。
但是 &lt;code class=&quot;highlighter-rouge&quot;&gt;exec&lt;/code&gt; 是完全替换进程的，所以不存在这个问题&lt;/p&gt;

&lt;p&gt;以上程序还是不够智能，如果我想使某个目录下的所有子目录都执行相同的命令，
岂不是要一个个子目录去设置，这显然是不合适的&lt;br /&gt;
所以继续给上面的程序加入正则匹配功能&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;c1&quot;&gt;#!/usr/bin/env ruby&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;dir_commands&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;sr&quot;&gt;/\/Users\/mwum\/Gitbook\/*/&lt;/span&gt;       &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;gitbook serve --port 4006&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;s2&quot;&gt;&quot;/Users/mwum/dx&quot;&lt;/span&gt;                  &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;jekyll serve -w&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;sr&quot;&gt;/\/Users\/mwum\/Code\/Rails\/*/&lt;/span&gt;   &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;bundle exec rails server&quot;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;dir_commands&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;command&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Regexp&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Dir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;pwd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=~&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dir&lt;/span&gt;
      &lt;span class=&quot;nb&quot;&gt;exec&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;command&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;elsif&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;String&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Dir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;pwd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dir&lt;/span&gt;
      &lt;span class=&quot;nb&quot;&gt;exec&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;command&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;This class is not supported: &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;exit&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Command not found: &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;basename&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;__FILE__&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;In this directory: &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Dir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;pwd&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
        <pubDate>Sun, 31 Jan 2016 00:00:00 +0800</pubDate>
        
        <link>http://www.dreamxu.com/execute-different-commands-in-different-directories/</link>
        <guid isPermaLink="true">http://www.dreamxu.com/execute-different-commands-in-different-directories/</guid>
        
        <category>技术</category>
        
        <category>Ruby</category>
        
        <category>Shell</category>
        
      </item>
    
      <item>
        <title>编译自己的 OpenWrt 固件</title>
        <description>&lt;p&gt;编译环境：Ubuntu 14.04.2 64-Bit&lt;br /&gt;
路由器型号：TP-LINK TL-WR703N v1, 改过硬件：16M Flash / 64M Memory&lt;/p&gt;

&lt;p&gt;固件也可以去官方下载：&lt;a href=&quot;https://downloads.openwrt.org/&quot;&gt;https://downloads.openwrt.org/&lt;/a&gt;&lt;br /&gt;
例如 TP-LINK TL-WR703N v1 的最新固件下载地址为：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;factory: &lt;a href=&quot;https://downloads.openwrt.org/chaos_calmer/15.05/ar71xx/generic/openwrt-15.05-ar71xx-generic-tl-wr703n-v1-squashfs-factory.bin&quot;&gt;https://downloads.openwrt.org/chaos_calmer/15.05/ar71xx/generic/openwrt-15.05-ar71xx-generic-tl-wr703n-v1-squashfs-factory.bin&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;sysupgrade: &lt;a href=&quot;https://downloads.openwrt.org/chaos_calmer/15.05/ar71xx/generic/openwrt-15.05-ar71xx-generic-tl-wr703n-v1-squashfs-sysupgrade.bin&quot;&gt;https://downloads.openwrt.org/chaos_calmer/15.05/ar71xx/generic/openwrt-15.05-ar71xx-generic-tl-wr703n-v1-squashfs-sysupgrade.bin&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;优点是方便，缺点是不能自己定制，如果你是改过 Flash 大小的，那么也必须自己编译&lt;br /&gt;
可参考官方文档关于编译的章节：&lt;a href=&quot;http://wiki.openwrt.org/doc/start#building_openwrt&quot;&gt;http://wiki.openwrt.org/doc/start#building_openwrt&lt;/a&gt;&lt;br /&gt;
以下是我对改过硬件的 TL-WR703N 编译适合的固件的步骤：&lt;/p&gt;

&lt;p&gt;按以下步骤编译好的固件下载地址（如果你不想自己编译的话）：&lt;br /&gt;
factory: &lt;a href=&quot;https://www.dropbox.com/s/aqe1957l4swpw9w/openwrt-15.05-ar71xx-generic-tl-wr703n-v1-squashfs-factory.bin?dl=0&quot;&gt;https://www.dropbox.com/s/aqe1957l4swpw9w/openwrt-15.05-ar71xx-generic-tl-wr703n-v1-squashfs-factory.bin?dl=0&lt;/a&gt;&lt;br /&gt;
sysupgrade: &lt;a href=&quot;https://www.dropbox.com/s/os5sz47ljfgt4i6/openwrt-15.05-ar71xx-generic-tl-wr703n-v1-squashfs-sysupgrade.bin?dl=0&quot;&gt;https://www.dropbox.com/s/os5sz47ljfgt4i6/openwrt-15.05-ar71xx-generic-tl-wr703n-v1-squashfs-sysupgrade.bin?dl=0&lt;/a&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;获取最新源码，如何获取源码可查看：&lt;a href=&quot;https://dev.openwrt.org/wiki/GetSource&quot;&gt;https://dev.openwrt.org/wiki/GetSource&lt;/a&gt;&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;git clone git://git.openwrt.org/openwrt.git
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;

    &lt;p&gt;也可以获取特定分支的源码，例如我们获取 15.05 branch (Chaos Calmer) 这个分支&lt;br /&gt;
以下步骤都使用的这份源码&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;git clone git://git.openwrt.org/15.05/openwrt.git
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;修改源码，使其适用于 16M Flash&lt;br /&gt;
参考的这篇文章：&lt;a href=&quot;http://wiki.openwrt.org/toh/tp-link/tl-wr703n#mb_flash_mod&quot;&gt;http://wiki.openwrt.org/toh/tp-link/tl-wr703n#mb_flash_mod&lt;/a&gt;&lt;/p&gt;

    &lt;p&gt;进入源码目录 &lt;code class=&quot;highlighter-rouge&quot;&gt;cd openwrt&lt;/code&gt;&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;
        &lt;p&gt;打开 target/linux/ar71xx/image/Makefile 这个文件&lt;br /&gt;
将如下内容&lt;/p&gt;

        &lt;div class=&quot;language-make highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;err&quot;&gt;define&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;Device/tl-wr703n-v1&lt;/span&gt;
    &lt;span class=&quot;err&quot;&gt;$(Device/tplink-4mlzma)&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;BOARDNAME&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; TL-WR703N
    &lt;span class=&quot;nv&quot;&gt;DEVICE_PROFILE&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; TLWR703
    &lt;span class=&quot;nv&quot;&gt;TPLINK_HWID&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; 0x07030101
    &lt;span class=&quot;nv&quot;&gt;CONSOLE&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; ttyATH0,115200
&lt;span class=&quot;err&quot;&gt;endef&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
        &lt;/div&gt;

        &lt;p&gt;改为：&lt;/p&gt;

        &lt;div class=&quot;language-make highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;err&quot;&gt;define&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;Device/tl-wr703n-v1&lt;/span&gt;
    &lt;span class=&quot;err&quot;&gt;$(Device/tplink-16mlzma)&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;BOARDNAME&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; TL-WR703N
    &lt;span class=&quot;nv&quot;&gt;DEVICE_PROFILE&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; TLWR703
    &lt;span class=&quot;nv&quot;&gt;TPLINK_HWID&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; 0x07030101
    &lt;span class=&quot;nv&quot;&gt;CONSOLE&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; ttyATH0,115200
&lt;span class=&quot;err&quot;&gt;endef&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
        &lt;/div&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;打开 tools/firmware-utils/src/mktplinkfw.c 这个文件&lt;br /&gt;
将如下内容：&lt;/p&gt;

        &lt;div class=&quot;language-make highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nv&quot;&gt;.id&lt;/span&gt;             &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;TL-WR703Nv1&quot;&lt;/span&gt;,
&lt;span class=&quot;nv&quot;&gt;.hw_id&lt;/span&gt;          &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; HWID_TL_WR703N_V1,
&lt;span class=&quot;nv&quot;&gt;.hw_rev&lt;/span&gt;         &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; 1,
&lt;span class=&quot;nv&quot;&gt;.layout_id&lt;/span&gt;      &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;4Mlzma&quot;&lt;/span&gt;,
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
        &lt;/div&gt;

        &lt;p&gt;改为：&lt;/p&gt;

        &lt;div class=&quot;language-make highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nv&quot;&gt;.id&lt;/span&gt;             &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;TL-WR703Nv1&quot;&lt;/span&gt;,
&lt;span class=&quot;nv&quot;&gt;.hw_id&lt;/span&gt;          &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; HWID_TL_WR703N_V1,
&lt;span class=&quot;nv&quot;&gt;.hw_rev&lt;/span&gt;         &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; 1,
&lt;span class=&quot;nv&quot;&gt;.layout_id&lt;/span&gt;      &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;16Mlzma&quot;&lt;/span&gt;,
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
        &lt;/div&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;（可选）下载和安装所有可用的 Feeds, 如果不清楚 Feeds 是什么，可查看：&lt;a href=&quot;http://wiki.openwrt.org/doc/devel/feeds&quot;&gt;http://wiki.openwrt.org/doc/devel/feeds&lt;/a&gt;&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;./scripts/feeds update -a
./scripts/feeds install -a
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;输入以下命令，检查哪些需要的包还没有安装：&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;make defconfig
make prereq
make menuconfig
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;

    &lt;p&gt;例如在我这提示：&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;Build dependency: Please install ncurses. (Missing libncurses.so or ncurses.h)
Build dependency: Please install zlib. (Missing libz.so or zlib.h)
Build dependency: Please install the openssl library (with development headers)
Build dependency: Please install GNU &#39;awk&#39;
Build dependency: Please install the Subversion client
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;

    &lt;p&gt;安装缺少的包：&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo apt-get install subversion libncurses5-dev zlib1g-dev libssl-dev gawk subversion
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;

    &lt;p&gt;你或许还需要安装 build-essential 这个包，我是以前就安好了&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;配置编译详情&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;make menuconfig
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;

    &lt;p&gt;输入以上命令之后，会进入一个命令行图形界面，界面最上面是用法&lt;br /&gt;
以下是我的一些配置，你可以选择性的参考&lt;br /&gt;
我的配置非常简单，如果需要额外的功能可以通过 opkg 来安装，所以固件简单点就好，反正之后还可以安装&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;
        &lt;p&gt;选择 CPU 型号&lt;br /&gt;
Target System 选为 Atheros ARM7xxx/ARM9xxx&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;选择你的路由器型号&lt;br /&gt;
Target Profile 选为 TP-LINK TP-WR703N&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;启用 Web 管理界面 LuCI&lt;br /&gt;
LuCI → Collections → 选中 luci&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;添加 LuCI 中文支持&lt;br /&gt;
LuCI → Modules → Translations → 选中 Chinese (zh-cn)&lt;/p&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;生成构建的配置文件，检查依赖等&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;make defconfig
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;编译，可加上 &lt;code class=&quot;highlighter-rouge&quot;&gt;V=99&lt;/code&gt; 参数输出所有调试信息&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;make
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;

    &lt;p&gt;在虚拟机中大概编译了一个半到二个小时，大多数时间都在下载，所以要保持网络通畅&lt;/p&gt;

    &lt;p&gt;编译好了之后可在 bin/ar71xx 目录找到生成的固件&lt;br /&gt;
openwrt-ar71xx-generic-tl-wr703n-v1-squashfs-factory.bin 和 openwrt-ar71xx-generic-tl-wr703n-v1-squashfs-sysupgrade.bin&lt;br /&gt;
已经安装了 OpenWrt 那么可用 sysupgrade 固件进行升级，会保留用户数据（也可选不保留）&lt;br /&gt;
factory 固件在第一次刷机的时候使用&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;刷机&lt;br /&gt;
我所使用的 U-Boot 是这个：&lt;a href=&quot;https://github.com/pepe2k/u-boot_mod&quot;&gt;https://github.com/pepe2k/u-boot_mod&lt;/a&gt;&lt;br /&gt;
步骤如下：&lt;/p&gt;

    &lt;ol&gt;
      &lt;li&gt;
        &lt;p&gt;将电脑 IP 设置为 192.168.1.2, 子网掩码设置为 255.255.255.0&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;断开路由器的电源，用网线连接好电脑和路由器&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;按住路由器的 Reset 按钮，插上电源，
待路由器灯闪四次后放开，放开后，路由器灯会快闪一次，代表进入了恢复模式&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;用电脑浏览器打开 http://192.168.1.1/index.html, 打开后，上传固件。如打不开可重复以上几步&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;上传完固件后，等一段时间，待机器自动重启&lt;br /&gt;
此时可将电脑 IP 设置为正常&lt;/p&gt;
      &lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;配置系统&lt;/p&gt;

    &lt;p&gt;配置成网口 PPPoE 上网，电脑连接无线上网&lt;/p&gt;

    &lt;p&gt;因为系统初始是不开启无线连接的，所以你需要用网线将电脑和路由器连起来&lt;/p&gt;

    &lt;ol&gt;
      &lt;li&gt;
        &lt;p&gt;电脑浏览器打开 192.168.1.1 进入 Web 管理界面&lt;br /&gt;
不用输入密码直接登录，登录之后去设置一个新密码&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;更改系统语言&lt;br /&gt;
Syatem → Language 修改为 Chinese, 点击 Save &amp;amp; Apply&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;点击，网络 → 无线，设置好 SSID, 密码点击「保存&amp;amp;应用」，最后点击「启用」&lt;br /&gt;
现在可以通过无线连接到路由器进行配置了&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;配置网络还是修改配置文件比较方便，也比较好讲解&lt;br /&gt;
修改之前先备份配置文件 &lt;code class=&quot;highlighter-rouge&quot;&gt;cp /etc/config/network /etc/config/network.old&lt;/code&gt;&lt;br /&gt;
然后编辑配置文件 &lt;code class=&quot;highlighter-rouge&quot;&gt;vim /etc/config/network&lt;/code&gt;&lt;/p&gt;

        &lt;ul&gt;
          &lt;li&gt;
            &lt;p&gt;修改 lan 配置，修改成如下样子&lt;/p&gt;

            &lt;div class=&quot;language-conf highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;n&quot;&gt;config&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;lan&#39;&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# 去掉这个，表示只有无线应用到 lan
&lt;/span&gt;    &lt;span class=&quot;c&quot;&gt;# option ifname &#39;eth0&#39;
&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;option&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;force_link&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;1&#39;&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# 去掉这个，因为只有无线应用到 lan, 所以不需要桥接
&lt;/span&gt;    &lt;span class=&quot;c&quot;&gt;# option type &#39;bridge&#39;
&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;option&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;proto&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;static&#39;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;option&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ipaddr&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;192.168.1.1&#39;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;option&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;netmask&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;255.255.255.0&#39;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;option&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ip6assign&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;60&#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
            &lt;/div&gt;
          &lt;/li&gt;
          &lt;li&gt;
            &lt;p&gt;增加 wan 配置，PPPoE 方式上网&lt;/p&gt;

            &lt;div class=&quot;language-conf highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;n&quot;&gt;config&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;wan&#39;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;option&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ifname&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;eth0&#39;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;option&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;proto&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;pppoe&#39;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;option&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;username&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;USERNAME&#39;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;option&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;password&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;PASSWORD&#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
            &lt;/div&gt;
          &lt;/li&gt;
        &lt;/ul&gt;

        &lt;p&gt;最后使用如下命令重启网络服务：&lt;/p&gt;

        &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;/etc/init.d/network restart
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
        &lt;/div&gt;
      &lt;/li&gt;
    &lt;/ol&gt;

    &lt;p&gt;以后配置路由器请使用无线连接方式，有线连接用于 PPPoE 上网&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;
</description>
        <pubDate>Tue, 13 Oct 2015 00:00:00 +0800</pubDate>
        
        <link>http://www.dreamxu.com/compile-your-own-openwrt/</link>
        <guid isPermaLink="true">http://www.dreamxu.com/compile-your-own-openwrt/</guid>
        
        <category>记录</category>
        
        <category>OpenWrt</category>
        
        <category>TL-WR703N</category>
        
      </item>
    
      <item>
        <title>闭包 (Closure) 是什么</title>
        <description>&lt;p&gt;本文所讲闭包是计算机中的闭包&lt;/p&gt;

&lt;p&gt;如果一上来就一大段理论，估计连我自己也看不懂&lt;br /&gt;
以具体例子入手来理解，因为在函数式语言中闭包是一个非常常见的概念，
所以我们以一种函数式语言 Scheme 为例来讲解&lt;/p&gt;

&lt;div class=&quot;language-scheme highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;c1&quot;&gt;; 以斜截式的方式定义一条直线 y = ax + b&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;define&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;straight-line&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;lambda&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;lambda&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))))&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;; 定义一条斜率为 1, 截距为 1 的直线&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;define&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;straight-line-1-1&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;straight-line&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;; 定义一条斜率为 2, 截距为 2 的直线&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;define&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;straight-line-2-2&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;straight-line&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;; 求当 x 等于 1 时，这条直线的 y 值&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;straight-line-1-1&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;   &lt;span class=&quot;c1&quot;&gt;; =&amp;gt; 2&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;straight-line-1-1&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;   &lt;span class=&quot;c1&quot;&gt;; =&amp;gt; 1&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;straight-line-2-2&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;   &lt;span class=&quot;c1&quot;&gt;; =&amp;gt; 4&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;straight-line-2-2&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;   &lt;span class=&quot;c1&quot;&gt;; =&amp;gt; 2&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;最近正好看了会 Go 语言，下面是 Go 代码，功能和写法都和上面的 Scheme 代码一样。
也是我对 Go 语言中闭包的一种练习。
如果你习惯于看 C 类的代码，那么 Scheme 代码可能不好理解，相反下面的代码就好理解一点&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;k&quot;&gt;package&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;fmt&quot;&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;c&quot;&gt;// 以斜截式的方式定义一条直线 y = ax + b&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;straight_line&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;float64&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;float64&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;float64&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;float64&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;float64&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;c&quot;&gt;// 定义一条斜率为 1, 截距为 1 的直线&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;straight_line_1_1&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;straight_line&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;

    &lt;/span&gt;&lt;span class=&quot;c&quot;&gt;// 定义一条斜率为 2, 截距为 2 的直线&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;straight_line_2_2&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;straight_line&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;

    &lt;/span&gt;&lt;span class=&quot;c&quot;&gt;// 求当 x 等于 1 时，这条直线的 y 值&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fmt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Println&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;straight_line_1_1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fmt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Println&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;straight_line_1_1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;

    &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fmt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Println&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;straight_line_2_2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fmt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Println&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;straight_line_2_2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;c&quot;&gt;// 输出：&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c&quot;&gt;// 2&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c&quot;&gt;// 1&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c&quot;&gt;// 4&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c&quot;&gt;// 2&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;以上面中的 &lt;code class=&quot;highlighter-rouge&quot;&gt;straight-line-1-1&lt;/code&gt; 为例，它是什么呢？或者换种问法，我们希望它是什么呢？&lt;/p&gt;

&lt;p&gt;至少我希望它是这个东西&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;(lambda (x)
  (+ (* a x) b))))

且 a 为 1, b 为 1
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;这样我们可以很方便地表示直线，而且将 a 和 b 自由变量绑定到某个值，不至于混乱&lt;/p&gt;

&lt;p&gt;东西的样子出来了，我们得给这个东西取个名字吧，就叫「闭包」吧&lt;br /&gt;
将其表示地形式一点，如下；&lt;/p&gt;

&lt;div class=&quot;language-scheme highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Closure&lt;/span&gt;
 &lt;span class=&quot;o&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;lambda&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
 &lt;span class=&quot;o&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;我们也可以这样说，闭包就是函数和创建这个函数时的环境总和（你也可以理解为相关数据）&lt;br /&gt;
而这个环境指的是自由变量，如果一个函数并没有引用自由变量，那么它只是一个函数而已&lt;br /&gt;
在这个例子中，函数就是 &lt;code class=&quot;highlighter-rouge&quot;&gt;(lambda (x) (+ (* a x) b))&lt;/code&gt;, 环境就是 &lt;code class=&quot;highlighter-rouge&quot;&gt;((a . 1) (b . 1))&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;闭包就是这么个东西，是不是感觉很简单？&lt;br /&gt;
都是我们能够很容易理解的概念，没有网上一大段一大段那么复杂，有些东西细细品味确实就简单了&lt;/p&gt;

&lt;p&gt;在多说一点，闭包和函数的区别就是：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;闭包包含了函数和环境&lt;/li&gt;
  &lt;li&gt;函数只是一个过程，并不包括创建这个函数的环境，或者说它也有环境，但是这个环境为空&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;其实理解了闭包是什么，你也就知道闭包有哪些特性了，在以后的使用过程中不至于出错&lt;/p&gt;

&lt;p&gt;你可能又会想到对象这个概念，是的，用闭包可以实现对象的封装，继承等，具体可见：&lt;a href=&quot;http://okmij.org/ftp/Scheme/oop-in-fp.txt&quot;&gt;http://okmij.org/ftp/Scheme/oop-in-fp.txt&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;参考：&lt;a href=&quot;http://www.yinwang.org/blog-cn/2013/03/26/lisp-dead-alive/&quot;&gt;http://www.yinwang.org/blog-cn/2013/03/26/lisp-dead-alive/&lt;/a&gt;&lt;/p&gt;
</description>
        <pubDate>Sun, 11 Oct 2015 00:00:00 +0800</pubDate>
        
        <link>http://www.dreamxu.com/What-is-a-closure/</link>
        <guid isPermaLink="true">http://www.dreamxu.com/What-is-a-closure/</guid>
        
        <category>记录</category>
        
        <category>Closure</category>
        
        <category>Scheme</category>
        
        <category>Golang</category>
        
      </item>
    
      <item>
        <title>Minecraft 僵尸刷怪箱陷阱 (Monster Spawner Trap)</title>
        <description>&lt;p&gt;从原理上讲解刷怪箱陷阱，以及建造方法，包括如何分离僵尸村民&lt;/p&gt;

&lt;p&gt;经验塔那一部分是用的水电梯，当然也可以使用活塞窒息法等&lt;br /&gt;
选择水电梯的主要原因是无脑操作，你只需等待怪物落下来，然后杀死即可，顺便也容易理解制作起来也简单&lt;/p&gt;

&lt;p&gt;整体外观如下图&lt;br /&gt;
&lt;img src=&quot;/assets/images/posts/2015-09-27_165813.png&quot; alt=&quot;僵尸刷怪箱陷阱整体外观&quot; /&gt;&lt;/p&gt;

&lt;p&gt;合着下面的讲解看地图更容易理解&lt;br /&gt;
地图下载：&lt;a href=&quot;https://www.dropbox.com/s/z4u0q7c8h1vexcx/2015-09-26-MonsterSpawnerTrap-www.dreamxu.com%20.zip?dl=0&quot;&gt;https://www.dropbox.com/s/z4u0q7c8h1vexcx/2015-09-26-MonsterSpawnerTrap-www.dreamxu.com%20.zip?dl=0&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;获取刷怪箱&quot;&gt;获取刷怪箱&lt;/h2&gt;

&lt;p&gt;如果你想在创造模式下试验，获取刷怪箱是第一步&lt;/p&gt;

&lt;p&gt;我们使用如下命令&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;/give [用户名] mob_spawner &amp;lt;数量&amp;gt; 0 {BlockEntityTag:{EntityId:&quot;&amp;lt;实体字母ID&amp;gt;&quot;}}
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;举个具体的例子，例如获取一个僵尸刷怪箱&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;/give HS66BI mob_spawner 1 0 {BlockEntityTag:{EntityId:&quot;Zombie&quot;}}
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h2 id=&quot;刷怪范围&quot;&gt;刷怪范围&lt;/h2&gt;

&lt;p&gt;根据 Wiki 上所讲述的：&lt;a href=&quot;http://minecraft-zh.gamepedia.com/刷怪箱&quot;&gt;http://minecraft-zh.gamepedia.com/刷怪箱&lt;/a&gt;&lt;br /&gt;
刷怪箱可在空气中生成怪物，且刷怪范围为 &lt;code class=&quot;highlighter-rouge&quot;&gt;8 * 8 * 3&lt;/code&gt;, 代码如下&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;// 这份伪代码基于 Minecraft 1.7.10 反编译出的源文件

spawnRange = 4

X = Spawner.x + random(spawnRange*2)-spawnRange;
Y = Spawner.y + random(3)-1;
Z = Spawner.z + random(spawnRange*2)-spawnRange;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;我画了个图，描述了代码中的刷怪范围&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;垂直方向上的范围，因为僵尸高 2 格，所以实际垂直范围为 4, &lt;br /&gt;
&lt;img src=&quot;/assets/images/posts/2015-09-25_140435.svg&quot; alt=&quot;僵尸刷怪箱范围横向&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;水平方向上的范围，红色为刷怪箱&lt;br /&gt;
你可能会疑惑刷怪箱为何是在中心右上方？&lt;br /&gt;
因为在 Minecraft 中，方块的坐标是方块八个顶点中 x, y, z 坐标最小的点，即图中绿色的点&lt;br /&gt;
&lt;img src=&quot;/assets/images/posts/2015-09-25_211728.svg&quot; alt=&quot;僵尸刷怪箱范围纵向&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;刷怪条件&quot;&gt;刷怪条件&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;上述刷怪范围&lt;/li&gt;
  &lt;li&gt;亮度 7 或以下&lt;/li&gt;
  &lt;li&gt;玩家距离刷怪箱 16 个方块内&lt;/li&gt;
  &lt;li&gt;刷怪箱周围 &lt;code class=&quot;highlighter-rouge&quot;&gt;17 * 9 * 17&lt;/code&gt; 的空间存在的僵尸少于 6 个，如果大于等于 6 个则不会刷怪&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;满足了以上四个条件，刷怪箱可无限刷怪（如果挂机一天肯定会被「噁」心死😜）&lt;/p&gt;

&lt;h2 id=&quot;建造&quot;&gt;建造&lt;/h2&gt;

&lt;h3 id=&quot;内部的封闭空间&quot;&gt;内部的封闭空间&lt;/h3&gt;

&lt;p&gt;满足&lt;strong&gt;条件一&lt;/strong&gt;和&lt;strong&gt;条件二&lt;/strong&gt;&lt;br /&gt;
虽说僵尸刷怪范围是 &lt;code class=&quot;highlighter-rouge&quot;&gt;8 * 8 * 4&lt;/code&gt;, 但是还要考虑到最下面一层放水，旁白一排也要放水，
所以干脆挖 &lt;code class=&quot;highlighter-rouge&quot;&gt;9 * 9 * 5&lt;/code&gt; 空间好了，正中间是刷怪箱&lt;br /&gt;
并且将这个空间封闭，满足条件二（亮度要求）&lt;/p&gt;

&lt;p&gt;具体如下图所示：&lt;br /&gt;
&lt;img src=&quot;/assets/images/posts/2015-09-26_232820.png&quot; alt=&quot;密闭空间&quot; /&gt;&lt;br /&gt;
&lt;img src=&quot;/assets/images/posts/2015-09-26_233020.png&quot; alt=&quot;密闭空间&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;水电梯部分&quot;&gt;水电梯部分&lt;/h3&gt;

&lt;p&gt;满足&lt;strong&gt;条件四&lt;/strong&gt;&lt;br /&gt;
我们将水电梯建在刷怪箱周围 &lt;code class=&quot;highlighter-rouge&quot;&gt;17 * 9 * 17&lt;/code&gt; 的空间范围之外，为了最大化刷怪。
而且也要点亮 &lt;code class=&quot;highlighter-rouge&quot;&gt;9 * 9 * 5&lt;/code&gt; 到 &lt;code class=&quot;highlighter-rouge&quot;&gt;17 * 9 * 17&lt;/code&gt; 的空间，防止刷怪&lt;br /&gt;
如下图，稍微远离刷怪箱（其实还另有目的，下面我们会讲到，分离僵尸村民）&lt;br /&gt;
&lt;img src=&quot;/assets/images/posts/2015-09-27_001850.png&quot; alt=&quot;水电梯与刷怪箱相对位置&quot; /&gt;&lt;/p&gt;

&lt;p&gt;水电梯的起点处可这样设计，不会卡住僵尸，也尝试过其它方式，还是这个最顺畅&lt;br /&gt;
放岩浆的目的是用来杀死小僵尸，因为小僵尸高度是 1, 如果不将其分离的话会卡住水电梯&lt;br /&gt;
当然你也可以制作岩浆陷阱获取掉落物品，甚至可以收集小僵尸&lt;br /&gt;
&lt;strong&gt;注意&lt;/strong&gt;：使用的过程中发现如果小僵尸骑着鸡经过这里，小僵尸会瞬移出来，应该是个 Bug, 
如果你在这里挂机的时候小僵尸跑出来了，你会被打死的，所以建议挂机的时候把自己围住&lt;br /&gt;
&lt;img src=&quot;/assets/images/posts/2015-09-27_001546.png&quot; alt=&quot;水电梯起点处&quot; /&gt;&lt;/p&gt;

&lt;p&gt;水电梯的摔落系统&lt;br /&gt;
我们先看伤害公式&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;跌落伤害值 = 跌落的方块数 - 3
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;僵尸血量为 20, 所以我们让僵尸摔落 22 格（即摔落坐标相差 22），使其为最少血量&lt;/p&gt;

&lt;p&gt;水电梯摔落处的设计如下图&lt;br /&gt;
&lt;img src=&quot;/assets/images/posts/2015-09-27_004500.png&quot; alt=&quot;水电梯摔落处&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;僵尸与僵尸村民的分离&quot;&gt;僵尸与僵尸村民的分离&lt;/h3&gt;

&lt;p&gt;原理：利用活塞和粘性活塞将水流分流&lt;/p&gt;

&lt;p&gt;具体如下图所示&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;这是拉上拉杆时的状态，普通的经验塔模式&lt;br /&gt;
&lt;strong&gt;注意：如果使用普通活塞会卡住僵尸，请都使用粘性活塞&lt;/strong&gt;&lt;br /&gt;
&lt;img src=&quot;/assets/images/posts/2015-09-27_161914.png&quot; alt=&quot;拉上拉杆&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;这是不拉拉杆时的状态，用于捕捉僵尸&lt;br /&gt;
&lt;img src=&quot;/assets/images/posts/2015-09-27_162513.png&quot; alt=&quot;不拉拉杆&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;僵尸村民的捕获&quot;&gt;僵尸村民的捕获&lt;/h3&gt;

&lt;p&gt;捕获装置，活板门陷阱&lt;br /&gt;
&lt;img src=&quot;/assets/images/posts/2015-09-27_163738.png&quot; alt=&quot;活板门陷阱&quot; /&gt;&lt;/p&gt;

&lt;p&gt;利用一系列的活板门陷阱，有多少陷阱，就能一次捕获多少僵尸&lt;br /&gt;
为了展示将顶部去掉了，陷阱组是需要封顶的，防止僵尸乱跳&lt;br /&gt;
&lt;img src=&quot;/assets/images/posts/2015-09-27_165329.png&quot; alt=&quot;活板门陷阱总体&quot; /&gt;&lt;/p&gt;

&lt;p&gt;本教程到此结束了&lt;br /&gt;
写教程真的挺费时间的，相对来说建造地图所花的时间要少。
不过也没啥关系，写也是一件很享受的事情&lt;/p&gt;
</description>
        <pubDate>Sat, 26 Sep 2015 00:00:00 +0800</pubDate>
        
        <link>http://www.dreamxu.com/zombie-monster-spawner-trap/</link>
        <guid isPermaLink="true">http://www.dreamxu.com/zombie-monster-spawner-trap/</guid>
        
        <category>技术</category>
        
        <category>Minecraft</category>
        
        <category>Game</category>
        
        <category>Monster Spawner Trap</category>
        
        <category>Zombie</category>
        
      </item>
    
      <item>
        <title>Minecraft 服务器插件分享</title>
        <description>&lt;h2 id=&quot;插件安装及使用方法&quot;&gt;插件安装及使用方法&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;关闭服务器&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;将插件放到 plugins 目录&lt;br /&gt;
再启动服务器，插件就正常运行了，也会在 plugins 目录生成相应的配置文件&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;如果需要修改插件的配置，那么再次将服务器关闭，修改完之后再次启动&lt;/p&gt;

    &lt;p&gt;也可以不用重启服务器，将配置修改好之后，使用插件的 “Reload” 命令&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;authme-reloaded&quot;&gt;AuthMe Reloaded&lt;/h2&gt;

&lt;p&gt;项目主页：&lt;a href=&quot;https://github.com/Xephi/AuthMeReloaded&quot;&gt;https://github.com/Xephi/AuthMeReloaded&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;登录/注册插件，非常好用&lt;/p&gt;

&lt;h2 id=&quot;skinsrestorer&quot;&gt;SkinsRestorer&lt;/h2&gt;

&lt;p&gt;主页：&lt;a href=&quot;https://www.spigotmc.org/resources/skinsrestorer.2124/&quot;&gt;https://www.spigotmc.org/resources/skinsrestorer.2124/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;如果服务器为 Offline 模式，那么正版用户也无法显示皮肤，这款插件就是为了修复这一问题&lt;/p&gt;

&lt;p&gt;依赖这款插件 ProtocolLib: &lt;a href=&quot;https://www.spigotmc.org/resources/protocollib.1997/&quot;&gt;https://www.spigotmc.org/resources/protocollib.1997/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;所以要将以上两者都放入 plugins 目录&lt;/p&gt;

&lt;h2 id=&quot;simple-backup&quot;&gt;Simple Backup&lt;/h2&gt;

&lt;p&gt;项目主页：&lt;a href=&quot;https://github.com/Exolius/SimpleBackup&quot;&gt;https://github.com/Exolius/SimpleBackup&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;一款非常简单好用的备份插件，用来备份世界地图&lt;/p&gt;
</description>
        <pubDate>Tue, 22 Sep 2015 00:00:00 +0800</pubDate>
        
        <link>http://www.dreamxu.com/minecraft-server-plugin-share/</link>
        <guid isPermaLink="true">http://www.dreamxu.com/minecraft-server-plugin-share/</guid>
        
        <category>分享</category>
        
        <category>Minecraft</category>
        
        <category>Plugin</category>
        
        <category>Game</category>
        
      </item>
    
      <item>
        <title>Minecraft 服务器 PaperSpigot 的使用</title>
        <description>&lt;h2 id=&quot;编译&quot;&gt;编译&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;去 &lt;a href=&quot;https://ci.destroystokyo.com/job/PaperSpigot-BuildTools/&quot;&gt;https://ci.destroystokyo.com/job/PaperSpigot-BuildTools/&lt;/a&gt; 下载构建工具，
下载到文件为 PaperTools.jar&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;新建一个目录，并将 PaperTools.jar 放到里面&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;自动编译&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;java -jar PaperTools.jar
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;

    &lt;p&gt;等好一会之后，例如会在当前目录下生成 paperspigot-1.8.8.jar 文件，
这就是我们要的最终文件了&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;运行&quot;&gt;运行&lt;/h2&gt;

&lt;p&gt;和 Minecraft 官方服务器用法差不多，paperspigot-1.8.8.jar 就相当于官方服务器的 minecraft_server.1.8.8.jar&lt;/p&gt;

&lt;p&gt;Minecraft 官方服务器用法可查看我的一篇文章&lt;a href=&quot;/build-official-minecraft-server/&quot;&gt;《架设 Minecraft 官方服务器》&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;比官方服务器多的那一部分&quot;&gt;比官方服务器多的那一部分&lt;/h2&gt;

&lt;p&gt;官方服务器主要配置文件就一个 server.properties&lt;br /&gt;
PaperSpigot 中的配置文件为 server.properties, bukkit.yml, spigot.yml, paper.yml, 
可配置部分也多多了&lt;/p&gt;

&lt;p&gt;以下只列举出了配置的很少一部分&lt;/p&gt;

&lt;h3 id=&quot;bukkityml&quot;&gt;bukkit.yml&lt;/h3&gt;

&lt;p&gt;详情见：&lt;a href=&quot;http://wiki.bukkit.org/Bukkit.yml&quot;&gt;http://wiki.bukkit.org/Bukkit.yml&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;c1&quot;&gt;# 一个区块中允许的生成生物数&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# 刷怪箱不受其影响，是另一套机制&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;spawn-limits&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;monsters&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;70&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;animals&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;15&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;water-animals&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;5&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;ambient&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;15&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
        <pubDate>Sat, 19 Sep 2015 00:00:00 +0800</pubDate>
        
        <link>http://www.dreamxu.com/minecraft-server-paperspigot-use/</link>
        <guid isPermaLink="true">http://www.dreamxu.com/minecraft-server-paperspigot-use/</guid>
        
        <category>记录</category>
        
        <category>Minecraft</category>
        
        <category>PaperSpigot</category>
        
        <category>Game</category>
        
      </item>
    
      <item>
        <title>架设 Minecraft 官方服务器</title>
        <description>&lt;p&gt;OS X 10.10.5 环境下&lt;/p&gt;

&lt;p&gt;除了官方的服务器，还有很多第三方的服务器可选择，
如何选择看你的情况了，简略说一下服务器的选择&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;官方服务器，不支持 Plugin, 不支持 Mod, 稳定&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;CraftBukkit, 已经停止更新了&lt;br /&gt;
后继者 Spigot, 对前者进行了一些优化，支持 Plugin, 不支持 Mod, 次稳定&lt;br /&gt;
PaperSpigot 对 Spigot 进行了一些优化，支持 Plugin, 不支持 Mod, 次稳定&lt;br /&gt;
正因为一脉相承，所以以上服务器都兼容 Bukkit 插件&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Cauldron (MCPC+), 支持 Plugin, 支持 Mod, 次次稳定&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;安装步骤&quot;&gt;安装步骤&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;安装好 Java 环境&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;去官方下载页面：&lt;a href=&quot;https://minecraft.net/download&quot;&gt;https://minecraft.net/download&lt;/a&gt;&lt;br /&gt;
中的 Multiplayer Server 处下载，例如我下载的是：minecraft_server.1.8.8.jar&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;将下载的服务器文件放到文件夹中，例如 minecraft_server.1.8.8&lt;br /&gt;
在文件中新建文件 start.command, 输入如下内容：&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;c&quot;&gt;#!/bin/bash&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# 进入脚本所在的目录&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;$(&lt;/span&gt;dirname &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$0&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# 根据情况修改内存大小，服务器的名字&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;exec &lt;/span&gt;java -Xmx2G -Xms2G -jar minecraft_server.1.8.8.jar
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;

    &lt;p&gt;增加可执行权限&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;chmod +x ./start.command
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;

    &lt;p&gt;运行服务器&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;./start.command
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;第一次运行服务器的时候，会提示如下面之类的信息&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;You need to agree to the EULA in order to run the server. Go to eula.txt for more info.
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;

    &lt;p&gt;而且会自动生成一些目录和文件，不用管它&lt;br /&gt;
我们只需要打开新生成的 eula.txt 文件，将 &lt;code class=&quot;highlighter-rouge&quot;&gt;eula=false&lt;/code&gt; 改为 &lt;code class=&quot;highlighter-rouge&quot;&gt;eula=true&lt;/code&gt;&lt;/p&gt;

    &lt;p&gt;再次运行服务器&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;./start.command
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;

    &lt;p&gt;服务器正常启动，现在其他玩家就可以加入进行游戏了&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;配置服务器&quot;&gt;配置服务器&lt;/h2&gt;

&lt;p&gt;修改配置文件&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;mvim server.properties
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;详细说明请看：&lt;a href=&quot;http://minecraft-zh.gamepedia.com/Server.properties&quot;&gt;http://minecraft-zh.gamepedia.com/Server.properties&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;可能需要改的一些配置&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-jproperties&quot;&gt;# 服务器名字
server-name=DreamXU

# 服务器端口
server-port=25565

# 定义服务器的游戏难度（例如生物对玩家造成的伤害，饥饿与中毒对玩家的影响方式等）
#   0 - 和平
#   1 - 简单
#   2 - 普通
#   3 - 困难
difficulty=2

# 若为 true 则只有正版玩家才能进入服务器
online-mode=false

# true 玩家可以互相残杀
# false 玩家无法互相造成伤害
pvp=false

# false - 禁用数据采集
# true - 启用数据采集
snooper-enabled=false

# 服务器同时最大在线人数
max-players=20

# 玩家进入服务器时显示的信息
motd=A Minecraft Server
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&quot;使用&quot;&gt;使用&lt;/h2&gt;

&lt;p&gt;关闭服务器&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;stop
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h2 id=&quot;op-命令&quot;&gt;OP 命令&lt;/h2&gt;

&lt;p&gt;OP 命令可参考：&lt;a href=&quot;http://minecraft-zh.gamepedia.com/%E5%91%BD%E4%BB%A4&quot;&gt;http://minecraft-zh.gamepedia.com/%E5%91%BD%E4%BB%A4&lt;/a&gt;&lt;/p&gt;
</description>
        <pubDate>Fri, 18 Sep 2015 00:00:00 +0800</pubDate>
        
        <link>http://www.dreamxu.com/build-official-minecraft-server/</link>
        <guid isPermaLink="true">http://www.dreamxu.com/build-official-minecraft-server/</guid>
        
        <category>记录</category>
        
        <category>Minecraft</category>
        
        <category>Game</category>
        
      </item>
    
      <item>
        <title>MFC 模态与非模态对话框的创建与销毁</title>
        <description>&lt;p&gt;&lt;strong&gt;注意&lt;/strong&gt;：开发全新的 PC 桌面客户端请不要使用 MFC, 已经是过时的技术了。
有了坑爹的学校，才有了我去用 MFC&lt;br /&gt;
请使用 Qt, C# WPF, Node-Webkit 等&lt;/p&gt;

&lt;h2 id=&quot;使用-afxmessagebox-或者-messagebox-创建模态对话框&quot;&gt;使用 AfxMessageBox 或者 MessageBox 创建模态对话框&lt;/h2&gt;

&lt;p&gt;使用 AfxMessageBox 函数可创建一个模态对话框&lt;/p&gt;

&lt;p&gt;官方文档：&lt;a href=&quot;https://msdn.microsoft.com/en-us/library/as6se7cb.aspx&quot;&gt;https://msdn.microsoft.com/en-us/library/as6se7cb.aspx&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;简单例子：&lt;/p&gt;

&lt;div class=&quot;language-cpp highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nRet&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;nRet&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AfxMessageBox&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;你看见我了吗？&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MB_YESNO&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MB_ICONQUESTION&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;switch&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nRet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;AfxMessageBox&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;对话框创建失败！&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;IDYES&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;AfxMessageBox&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;看见了屏幕上的自己吧&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;IDNO&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;AfxMessageBox&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;真的就只有你自己 ╮(╯_╰)╭&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h2 id=&quot;使用-cdialogdomodal-创建模态对话框&quot;&gt;使用 CDialog::DoModal 创建模态对话框&lt;/h2&gt;

&lt;p&gt;官方文档：&lt;a href=&quot;https://msdn.microsoft.com/en-us/library/619z63f5.aspx&quot;&gt;https://msdn.microsoft.com/en-us/library/619z63f5.aspx&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;文档上的例子很详细了，就不多说了&lt;/p&gt;

&lt;h2 id=&quot;使用-cdialogcreate-创建非模态对话框&quot;&gt;使用 CDialog::Create 创建非模态对话框&lt;/h2&gt;

&lt;p&gt;官方文档：&lt;a href=&quot;https://msdn.microsoft.com/en-us/library/yhth57kd.aspx&quot;&gt;https://msdn.microsoft.com/en-us/library/yhth57kd.aspx&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;首先得有个认识：在 MFC 程序中，窗口对象的生存期应长于对应的窗口，
也就是说，不能在未关闭屏幕上窗口的情况下先把对应的窗口对象删除掉&lt;/p&gt;

&lt;p&gt;对于模态对话框来说，对话框被关闭之前 DoModal 函数并不会返回，
一旦对话框被关闭 DoModal 函数立即返回，并不会出现窗口对象先于窗口删除的情况&lt;br /&gt;
我们使用局部变量来创建模态对话框，因为局部变量的生命周期有限，所以我们不必担心何时来删除窗口对象&lt;/p&gt;

&lt;p&gt;但是对于非模态对话框来说情况就不一样了，Create 函数在显示了对话框后就立即返回，
所以当调用 Create 函数的那一部分代码返回之后，窗口对象就被删除了，
如果这时对应窗口没有被关闭，就出现了窗口对象先于窗口删除的情况，这在 MFC 程序中是不允许的&lt;br /&gt;
为了解决这一问题，我们需要 new 操作符来创建非模态对话框对象。
但是（TM 问题又来了）在 C++ 中使用了 new 必定还需要将其创建的对象使用 delete 删除，
不然就出现内存泄漏了&lt;/p&gt;

&lt;p&gt;那么何时来删除呢？&lt;br /&gt;
官方文档中有说：&lt;a href=&quot;https://msdn.microsoft.com/en-us/library/vstudio/s97b2305(v=vs.140).aspx&quot;&gt;https://msdn.microsoft.com/en-us/library/vstudio/s97b2305(v=vs.140).aspx&lt;/a&gt;&lt;br /&gt;
摘录如下：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;When you implement a modeless dialog box, 
  always override the &lt;strong&gt;OnCancel&lt;/strong&gt; member function and call &lt;strong&gt;DestroyWindow&lt;/strong&gt; from within it. 
  Don’t call the base class &lt;strong&gt;CDialog::OnCancel&lt;/strong&gt;, 
  because it calls &lt;strong&gt;EndDialog&lt;/strong&gt;, which will make the dialog box invisible but will not destroy it. 
  You should also override &lt;strong&gt;PostNcDestroy&lt;/strong&gt; for modeless dialog boxes in order to delete &lt;strong&gt;this&lt;/strong&gt;, 
  since modeless dialog boxes are usually allocated with &lt;strong&gt;new&lt;/strong&gt;. 
  Modal dialog boxes are usually constructed on the frame and do not need &lt;strong&gt;PostNcDestroy&lt;/strong&gt; cleanup.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;然后我们就知道了我们该做的，需要修改两个地方：&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;重写 OnCancel 成员函数，将 DestroyWindow 函数加入其中&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;重写 PostNcDestroy 成员函数，将 delete this 代码加入其中&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;原成员函数说明请看文档：&lt;br /&gt;
CDialog::OnCancel: &lt;a href=&quot;https://msdn.microsoft.com/en-us/library/kw3wtttf.aspx&quot;&gt;https://msdn.microsoft.com/en-us/library/kw3wtttf.aspx&lt;/a&gt;&lt;br /&gt;
CWnd::PostNcDestroy: &lt;a href=&quot;https://msdn.microsoft.com/en-us/library/sk933a19.aspx&quot;&gt;https://msdn.microsoft.com/en-us/library/sk933a19.aspx&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;参考：
&lt;a href=&quot;http://www.xxsof.com/?p=998&quot;&gt;http://www.xxsof.com/?p=998&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;具体的例子&quot;&gt;具体的例子&lt;/h3&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;新建一个对话框 ID 为 &lt;code class=&quot;highlighter-rouge&quot;&gt;IDD_POP_DIALOG&lt;/code&gt;, 添加类，名为 &lt;code class=&quot;highlighter-rouge&quot;&gt;CPopDlg&lt;/code&gt;&lt;br /&gt;
自动生成 &lt;code class=&quot;highlighter-rouge&quot;&gt;PopDlg.h&lt;/code&gt; 和 &lt;code class=&quot;highlighter-rouge&quot;&gt;PopDlg.cpp&lt;/code&gt; 文件&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;在创建 &lt;code class=&quot;highlighter-rouge&quot;&gt;IDD_POP_DIALOG&lt;/code&gt; 对话框的文件中，比如为 &lt;code class=&quot;highlighter-rouge&quot;&gt;ModelessDialogBoxDlg.cpp&lt;/code&gt;, 
在其中加入头文件 &lt;code class=&quot;highlighter-rouge&quot;&gt;PopDlg.h&lt;/code&gt;&lt;/p&gt;

    &lt;p&gt;创建 &lt;code class=&quot;highlighter-rouge&quot;&gt;IDD_POP_DIALOG&lt;/code&gt; 对话框的代码如下（我是在一个 Button 中创建的）：&lt;/p&gt;

    &lt;div class=&quot;language-cpp highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CModelessDialogBoxDlg&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;OnBnClickedPopButton&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;CPopDlg&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;popDlg&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CPopDlg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;BOOL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ret&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;popDlg&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Create&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IDD_POP_DIALOG&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ret&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;FALSE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;AfxMessageBox&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;对话框创建失败！&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;popDlg&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ShowWindow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;SW_SHOW&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;重写 &lt;code class=&quot;highlighter-rouge&quot;&gt;IDD_POP_DIALOG&lt;/code&gt; 对话框的 &lt;code class=&quot;highlighter-rouge&quot;&gt;OnCancel&lt;/code&gt; 和 &lt;code class=&quot;highlighter-rouge&quot;&gt;PostNcDestroy&lt;/code&gt; 函数&lt;/p&gt;

    &lt;p&gt;在「类向导」中将虚函数 &lt;code class=&quot;highlighter-rouge&quot;&gt;OnCancel&lt;/code&gt; 和 &lt;code class=&quot;highlighter-rouge&quot;&gt;PostNcDestroy&lt;/code&gt; 设置为重写&lt;/p&gt;

    &lt;p&gt;然后回到实现文件 &lt;code class=&quot;highlighter-rouge&quot;&gt;PopDlg.cpp&lt;/code&gt; 中，将以上两个函数重写为如下内容：&lt;/p&gt;

    &lt;div class=&quot;language-cpp highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CPopDlg&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;OnCancel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;DestroyWindow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CPopDlg&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;PostNcDestroy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;CDialogEx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;PostNcDestroy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;delete&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;还需要注意的一点，在 &lt;code class=&quot;highlighter-rouge&quot;&gt;IDD_POP_DIALOG&lt;/code&gt; 对话框中有默认的确定和取消按钮，
一般将确定按钮去掉，然后留下取消按钮做关闭窗口之用&lt;/p&gt;

&lt;p&gt;取消按钮自动生成的代码如下：&lt;/p&gt;

&lt;div class=&quot;language-cpp highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CPopDlg&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;OnBnClickedCancel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;CDialogEx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;OnCancel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;如果放任不管，又出问题了（MFC 好麻烦 (〒︿〒) 各位还是不要用了）&lt;br /&gt;
这家伙调用基类的 &lt;code class=&quot;highlighter-rouge&quot;&gt;OnCancel()&lt;/code&gt; 函数，但是前面我们说过，销毁非模态窗口，我们并不能使用这个函数，
所以改为如下：&lt;/p&gt;

&lt;div class=&quot;language-cpp highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CPopDlg&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;OnBnClickedCancel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;OnCancel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;上面代码是正确的，因为我们已经重写过 &lt;code class=&quot;highlighter-rouge&quot;&gt;OnCancel()&lt;/code&gt; 函数了&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;但是（WC 又来？），以上实现允许你无限创建 &lt;code class=&quot;highlighter-rouge&quot;&gt;IDD_POP_DIALOG&lt;/code&gt; 对话框&lt;br /&gt;
我们一般需要的功能是，只创建一个窗口，如果再次创建，将只把原来的窗口激活&lt;/p&gt;

&lt;p&gt;任重道远啊，继续…&lt;/p&gt;

&lt;p&gt;我们只在以上基础上修改，不重写了&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;在 &lt;code class=&quot;highlighter-rouge&quot;&gt;ModelessDialogBoxDlg.h&lt;/code&gt; 头文件头部加入 &lt;code class=&quot;highlighter-rouge&quot;&gt;class CPopDlg&lt;/code&gt;, 
并不使用到 &lt;code class=&quot;highlighter-rouge&quot;&gt;CPopDlg&lt;/code&gt; 类，所以可以不用引入 &lt;code class=&quot;highlighter-rouge&quot;&gt;CPopDlg&lt;/code&gt; 类的头文件&lt;br /&gt;
并在类 &lt;code class=&quot;highlighter-rouge&quot;&gt;CModelessDialogBoxDlg&lt;/code&gt; 声明处，加入如下成员变量：&lt;/p&gt;

    &lt;div class=&quot;language-cpp highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nl&quot;&gt;public:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;CPopDlg&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m_pPopDlg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;在 &lt;code class=&quot;highlighter-rouge&quot;&gt;ModelessDialogBoxDlg.cpp&lt;/code&gt; 文件中的 &lt;code class=&quot;highlighter-rouge&quot;&gt;BOOL CModelessDialogBoxDlg::OnInitDialog()&lt;/code&gt; 函数内部加入如下初始化代码：&lt;/p&gt;

    &lt;div class=&quot;language-cpp highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;n&quot;&gt;m_pPopDlg&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;将创建 &lt;code class=&quot;highlighter-rouge&quot;&gt;IDD_POP_DIALOG&lt;/code&gt; 对话框的代码从&lt;/p&gt;

    &lt;div class=&quot;language-cpp highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CModelessDialogBoxDlg&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;OnBnClickedPopButton&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;CPopDlg&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;popDlg&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CPopDlg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;BOOL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ret&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;popDlg&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Create&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IDD_POP_DIALOG&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ret&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;FALSE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;AfxMessageBox&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;对话框创建失败！&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;popDlg&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ShowWindow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;SW_SHOW&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;

    &lt;p&gt;修改为&lt;/p&gt;

    &lt;div class=&quot;language-cpp highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CModelessDialogBoxDlg&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;OnBnClickedPopButton&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m_pPopDlg&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;m_pPopDlg&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CPopDlg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

        &lt;span class=&quot;n&quot;&gt;BOOL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ret&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m_pPopDlg&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Create&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IDD_POP_DIALOG&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ret&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;FALSE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;AfxMessageBox&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;对话框创建失败！&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;n&quot;&gt;m_pPopDlg&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ShowWindow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;SW_SHOW&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;m_pPopDlg&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;SetActiveWindow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;当 &lt;code class=&quot;highlighter-rouge&quot;&gt;IDD_POP_DIALOG&lt;/code&gt; 窗口关闭之后，还需要将 &lt;code class=&quot;highlighter-rouge&quot;&gt;m_pPopDlg&lt;/code&gt; 设置为 &lt;code class=&quot;highlighter-rouge&quot;&gt;NULL&lt;/code&gt;&lt;br /&gt;
将重写的 &lt;code class=&quot;highlighter-rouge&quot;&gt;OnCancel&lt;/code&gt; 函数修改为：&lt;/p&gt;

    &lt;div class=&quot;language-cpp highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CPopDlg&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;OnCancel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;CModelessDialogBoxDlg&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pFather&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CModelessDialogBoxDlg&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;GetParent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;pFather&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m_pPopDlg&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;DestroyWindow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;写了半天，真是好麻烦，C++ 麻烦，MFC 也麻烦，所以好麻烦&lt;/p&gt;
</description>
        <pubDate>Mon, 07 Sep 2015 00:00:00 +0800</pubDate>
        
        <link>http://www.dreamxu.com/mfc-create-and-destroy-modal-and-modeless-dialog-box/</link>
        <guid isPermaLink="true">http://www.dreamxu.com/mfc-create-and-destroy-modal-and-modeless-dialog-box/</guid>
        
        <category>记录</category>
        
        <category>MFC</category>
        
        <category>Modal Dialog Box</category>
        
        <category>Modeless Dialog Box</category>
        
      </item>
    
      <item>
        <title>《明无梦的操作系统使用记录》书籍更新中</title>
        <description>&lt;p&gt;&lt;a href=&quot;/books/osg&quot;&gt;《明无梦的操作系统使用记录》&lt;/a&gt;，关于操作系统的一些使用心得与记录，以及一些命令行软件的使用&lt;/p&gt;

&lt;p&gt;之前发布过一本书籍&lt;a href=&quot;/books/software&quot;&gt;《明无梦的软件使用记录》&lt;/a&gt;，
是关于各种软件的使用方面&lt;/p&gt;

&lt;p&gt;这两本书籍其实都是关于软件的使用，只不过操作系统是一个非常大型的软件，所以又分出了一本书。
把两本书当成同一本就行&lt;/p&gt;
</description>
        <pubDate>Sat, 05 Sep 2015 00:00:00 +0800</pubDate>
        
        <link>http://www.dreamxu.com/osg-book-update/</link>
        <guid isPermaLink="true">http://www.dreamxu.com/osg-book-update/</guid>
        
        <category>书籍</category>
        
        <category>Software</category>
        
      </item>
    
      <item>
        <title>《明无梦的 Vim 使用记录》书籍更新中</title>
        <description>&lt;p&gt;&lt;a href=&quot;/books/vim&quot;&gt;《明无梦的 Vim 使用记录》&lt;/a&gt;，一个中度 Vim 使用者的 Vim 使用记录&lt;/p&gt;
</description>
        <pubDate>Sat, 05 Sep 2015 00:00:00 +0800</pubDate>
        
        <link>http://www.dreamxu.com/vim-book-update/</link>
        <guid isPermaLink="true">http://www.dreamxu.com/vim-book-update/</guid>
        
        <category>书籍</category>
        
        <category>Vim</category>
        
      </item>
    
      <item>
        <title>Visual Studio 2015 下静态和动态编译 SQLite3 及使用</title>
        <description>&lt;p&gt;可使用免费的 Visual Studio Community 版本：&lt;a href=&quot;https://www.visualstudio.com/products/visual-studio-community-vs&quot;&gt;https://www.visualstudio.com/products/visual-studio-community-vs&lt;/a&gt;&lt;br /&gt;
个人使用完全足够了&lt;/p&gt;

&lt;p&gt;去 SQLite 官网下载 SQLite3 的源代码：&lt;a href=&quot;https://www.sqlite.org&quot;&gt;https://www.sqlite.org&lt;/a&gt;&lt;br /&gt;
例如我下载的是 sqlite-amalgamation-3081101.zip&lt;br /&gt;
解压之后会发现有 4 个文件，但是我们只需要 sqlite3.c 和 sqlite3.h&lt;/p&gt;

&lt;p&gt;以下编译 SQLite3 和使用 SQLite3 我是分开使用两个解决方案，为了理解起来清晰一点&lt;br /&gt;
但是最好将其放一个解决方案中，内分为两个项目，有利于代码的组织&lt;/p&gt;

&lt;h2 id=&quot;静态编译-sqlite3&quot;&gt;静态编译 SQLite3&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;打开 VS 2015, 新建项目&lt;br /&gt;
依次选择：已安装 → 模板 → Visual C++ → Windows → Win32 → Win32 项目&lt;br /&gt;
在下面选择好位置，输入名称，点击「确定」&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;然后会进入 Win32 应用程序向导&lt;br /&gt;
点击「下一步」，在「应用程序类型」选择「静态库」，
在「附加选项」中将「预编译头」去掉&lt;br /&gt;
最后点击「完成」，如下图所示&lt;br /&gt;
&lt;img src=&quot;/assets/images/posts/2015-09-01_212154.PNG&quot; alt=&quot;VS 2015&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;将 sqlite3.c 和 sqlite3.h 复制到项目目录下，然后将其添加到项目&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;在「解决方案资源管理器」中选中当前项目，然后依次点击上面菜单栏中的&lt;br /&gt;
项目 → 属性，进入项目属性页&lt;br /&gt;
将上面的配置选成 “Relase”, 然后依次进入，配置属性 → C/C++ → 代码生成 → 运行库，选择「多线程 DLL(MD)」&lt;br /&gt;
需要注意的一点是，同个解决方案内有多个项目，必须选择相同的运行库&lt;br /&gt;
&lt;img src=&quot;/assets/images/posts/2015-09-01_214951.PNG&quot; alt=&quot;VS 2015&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;点击，生成 → 配置管理器，将「活动解决方案配置」选为 “Relese”&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;点击，生成 → 生成解决方案&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;静态库已生成，在项目目录 Release 文件夹下，一个 .lib 文件&lt;br /&gt;
该 lib 包含函数代码本身（即包括函数的索引，也包括实现），
在其它项目编译引用时只需要将该 .lib 和 .h 文件加入程序当中即可&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;选择 “Relese” 还是 “Debug” 按情况而定，如果项目需要发布了，那么选择 “Relese” 会更好，
如果需要调试，那么选择 “Debug” 会更好。但是确保同一解决方案下的各项目要统一&lt;/p&gt;

&lt;h2 id=&quot;在-mfc-中使用-sqlite3-静态库&quot;&gt;在 MFC 中使用 SQLite3 静态库&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;注意：&lt;/strong&gt;开发全新的 PC 桌面客户端请不要使用 MFC, 已经是过时的技术了。
有了坑爹的学校，才有了我去用 MFC&lt;br /&gt;
请使用 Qt, C# WPF, Node-Webkit 等&lt;/p&gt;

&lt;p&gt;我们需要 .lib 和 .h 文件&lt;/p&gt;

&lt;p&gt;新建一个项目，模板 → Visual C++ → Windows → MFC → MFC 应用程序&lt;br /&gt;
应用程序类型，我们选择「基于对话框」，看起来会简单一点，其它默认即可&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;将上一步编译好的 .lib 文件和源代码中的 .h 文件放到项目目录中，然后添加到项目中&lt;br /&gt;
好一点的做法是，在项目目录中建立 sqlite3 文件夹，然后将两个文件放到这里
比如说名为 sqlite3.lib 和 sqlite3.h&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;比如说在主 Dlg 文件 MFC-SQLite3Dlg.h 确定按钮写入如下简单使用 SQLite3 的代码&lt;/p&gt;

    &lt;div class=&quot;language-cpp highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;cp&quot;&gt;#include &quot;SQLite\sqlite3.h&quot;
&lt;/span&gt;

&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CMFCSQLite3Dlg&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;OnBnClickedOk&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sqlite3&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;db&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ret&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;ret&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sqlite3_open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;data.db&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;db&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ret&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SQLITE_OK&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;MessageBox&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;数据库打开成功&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;MessageBox&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;数据库打开失败&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;CDialogEx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;OnOK&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;

    &lt;p&gt;然后生成该项目就可以了&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;使用静态库非常简单，只需将 .lib 和 .h 文件添加到项目即可&lt;/p&gt;

&lt;h2 id=&quot;动态编译-sqlite3&quot;&gt;动态编译 SQLite3&lt;/h2&gt;

&lt;p&gt;动态编译和静态编译差不多，只有两个地方不一样&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;项目属性页 → 配置属性 → 常规 → 项目默认项 → 配置类型，选择「动态库(.dll)」&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;需要模块定义文件 .def, 可从 SQLite 官网下载，
例如 sqlite-dll-win32-x86-3081101 内有 .dll 和 .def 两个文件，但是我们只需要 .def&lt;br /&gt;
当然你也可以自己编写 .def 文件，定义导出函数，比较懒就用现成的吧&lt;/p&gt;

    &lt;p&gt;所以你总共需要 3 个文件，.c, .h, .def, 分别将其添加到项目&lt;/p&gt;

    &lt;p&gt;项目属性页 → 配置属性 → 链接器 → 输入 → 模块定义文件，写入模块定义文件 sqlite3.def&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;生成项目，即可得到 .dll 和 .lib 文件&lt;br /&gt;
有可能会提示你，无法解析的外部符号，不要急，将那些导出函数删除即可&lt;/p&gt;

&lt;h3 id=&quot;或者利用官方提供的-dll-和-def-文件生成-lib&quot;&gt;或者利用官方提供的 .dll 和 .def 文件生成 .lib&lt;/h3&gt;

&lt;p&gt;下载官方提供的文件 sqlite-dll-win32-x86-3081101, 内有 sqlite3.def 和 sqlite3.dll 这两个文件&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;将 .def 和 .dll 文件放到 SQLite3-Dynamic 文件夹中（随便）&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;将下面三个文件放到 SQLite3-Dynamic 文件夹中&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;C:\Program Files (x86)\Microsoft Visual Studio 14.0\VC\bin\lib.exe
C:\Program Files (x86)\Microsoft Visual Studio 14.0\VC\bin\link.exe
C:\Program Files (x86)\Microsoft Visual Studio 14.0\Common7\IDE\mspdb140.dll
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;使用命令提示符，进入 SQLite3-Dynamic 文件夹，执行如下命令：&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;LIB /DEF:sqlite3.def /machine:IX86
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;

    &lt;p&gt;即可生成 .lib 文件&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;在-mfc-中使用-sqlite3-动态库&quot;&gt;在 MFC 中使用 SQLite3 动态库&lt;/h2&gt;

&lt;p&gt;我们需要 .dll, .lib, .h 文件&lt;/p&gt;

&lt;p&gt;和使用 SQLite3 一模一样，生成项目只需要 .lib 和 .h 文件，
但是程序运行需要 .dll 文件&lt;/p&gt;
</description>
        <pubDate>Tue, 01 Sep 2015 00:00:00 +0800</pubDate>
        
        <link>http://www.dreamxu.com/studio-visual-2015-static-and-dynamic-compilation-of-sqlite3-and-use/</link>
        <guid isPermaLink="true">http://www.dreamxu.com/studio-visual-2015-static-and-dynamic-compilation-of-sqlite3-and-use/</guid>
        
        <category>记录</category>
        
        <category>VS 2015</category>
        
        <category>SQLite3</category>
        
      </item>
    
      <item>
        <title>保护隐私：图片的 Exif 信息</title>
        <description>&lt;blockquote&gt;
  &lt;p&gt;Exif 是一种图像文件格式，它的数据存储与 JPEG 格式是完全相同的。
  实际上 Exif 格式就是在 JPEG 格式头部插入了数码照片的信息，
  包括拍摄时的光圈、快门、白平衡、ISO、焦距、日期时间等各种和拍摄条件以及相机品牌、型号、色彩编码、拍摄时录制的声音以及GPS全球定位系统数据、缩略图等。&lt;/p&gt;

  &lt;p&gt;——百度百科&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;可见一张照片所包含的信息是非常丰富的，比如利用其中的 GPS 信息，可知道你拍照时的精确位置&lt;/p&gt;

&lt;p&gt;所以在网络上分享的时候，如果不想隐私被暴露，需要删除照片的 Exif 信息&lt;/p&gt;

&lt;h2 id=&quot;利用-python-来删除照片的-exif-信息&quot;&gt;利用 Python 来删除照片的 Exif 信息&lt;/h2&gt;

&lt;p&gt;需要用到处理 Exif 信息的库 Piexif: &lt;a href=&quot;https://github.com/hMatoba/Piexif&quot;&gt;https://github.com/hMatoba/Piexif&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;还需要用到图形处理库 Pillow: &lt;a href=&quot;https://github.com/python-pillow/Pillow&quot;&gt;https://github.com/python-pillow/Pillow&lt;/a&gt;, 来判断图片是否为 JPEG 格式&lt;br /&gt;
其实 Python 有一个内置模块 imghdr 可用来判断图片类型，但是在我使用过程中，我发现有时候会不准确，所以我改用 Pillow 来做判断&lt;/p&gt;

&lt;p&gt;代码见：&lt;a href=&quot;https://github.com/lifenod/remove-image-exif&quot;&gt;https://github.com/lifenod/remove-image-exif&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;使用&quot;&gt;使用&lt;/h3&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;安装依赖的库&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;pip install piexif
pip install Pillow
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;添加可执行权限&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;chmod +x ./remove-exif.py
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;使用&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;./remove-exif.py name.jpg
./remove-exif.py *.jpg
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;
</description>
        <pubDate>Fri, 21 Aug 2015 00:00:00 +0800</pubDate>
        
        <link>http://www.dreamxu.com/protection-of-privacy-the-image-exif-information/</link>
        <guid isPermaLink="true">http://www.dreamxu.com/protection-of-privacy-the-image-exif-information/</guid>
        
        <category>技术</category>
        
        <category>Exif</category>
        
        <category>Python</category>
        
        <category>Piexif</category>
        
        <category>Pillow</category>
        
      </item>
    
      <item>
        <title>搭建基本的 Python 开发环境</title>
        <description>&lt;h2 id=&quot;使用-pyenv-来安装-python&quot;&gt;使用 pyenv 来安装 Python&lt;/h2&gt;

&lt;h3 id=&quot;先安装-pyenv&quot;&gt;先安装 pyenv&lt;/h3&gt;

&lt;p&gt;官网：&lt;a href=&quot;https://github.com/yyuu/pyenv&quot;&gt;https://github.com/yyuu/pyenv&lt;/a&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;通过 Homebrew 安装&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;brew update
brew install pyenv
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;

    &lt;p&gt;使用 Homebew 安装的话一些基本的 pyenv 插件都安装了，就不必再次安装，例如 pyenv-pip-rehash 插件&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;将 &lt;code class=&quot;highlighter-rouge&quot;&gt;eval &quot;$(pyenv init -)&quot;&lt;/code&gt; 添加到 profile, 例如 .zshrc&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;一般不用进行如下操作&lt;/p&gt;

    &lt;p&gt;默认使用的是 ~/.pyenv 目录，如果你需要使用 Homebrew 目录请将如下内容添加到 profile&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;export PYENV_ROOT=/usr/local/var/pyenv
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;重新运行 shell&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;exec $SHELL
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;具体 pyenv 用法可参考：&lt;a href=&quot;https://github.com/yyuu/pyenv/blob/master/COMMANDS.md&quot;&gt;https://github.com/yyuu/pyenv/blob/master/COMMANDS.md&lt;/a&gt;&lt;br /&gt;
既然这个项目是从 &lt;a href=&quot;https://github.com/sstephenson/rbenv&quot;&gt;rbenv&lt;/a&gt; fork 而来的，想必用法也差不多了，事实也确实如此，
亦可参考我以前写的文章&lt;a href=&quot;/install-ruby-on-mac-with-rbenv/#安装-ruby&quot;&gt;《在 Mac 上用 rbenv 安装 ruby - 安装 Ruby | 明无梦的博客》&lt;/a&gt;和
&lt;a href=&quot;/install-ruby-on-mac-with-rbenv/#管理-ruby&quot;&gt;《在 Mac 上用 rbenv 安装 ruby - 管理 Ruby | 明无梦的博客》&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;安装-python3&quot;&gt;安装 Python3&lt;/h3&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;查看可安装的 Python 版本&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;pyenv install -l
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;安装具体的 Python 版本&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;pyenv install 3.4.3
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;查看已经安装的 Python 版本&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;pyenv versions
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;切换到需要的 Python 版本（全局生效）&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;pyenv global 3.4.3
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;升级 pip&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;pip install --upgrade pip
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;如果这时你执行 &lt;code class=&quot;highlighter-rouge&quot;&gt;brew doctor&lt;/code&gt; 会出现类似如下的问题&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;$ brew doctor
Please note that these warnings are just used to help the Homebrew maintainers
with debugging if you file an issue. If everything you use Homebrew for is
working fine: please don&#39;t worry and just ignore them. Thanks!

Warning: python is symlinked to python3
This will confuse build scripts and in general lead to subtle breakage.

Warning: &quot;config&quot; scripts exist outside your system or Homebrew directories.
`./configure` scripts often look for *-config scripts to determine if
software packages are installed, and what additional flags to use when
compiling and linking.

Having additional scripts in your path can confuse software installed via
Homebrew if the config script overrides a system or Homebrew provided
script of the same name. We found the following &quot;config&quot; scripts:

  /Users/mwum/.pyenv/shims/python-config
  /Users/mwum/.pyenv/shims/python3-config
  /Users/mwum/.pyenv/shims/python3.4-config
  /Users/mwum/.pyenv/shims/python3.4m-config
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;解决办法参考：&lt;br /&gt;
&lt;a href=&quot;http://www.task-notes.com/entry/20141223/1419324649&quot;&gt;【Homebrew】brew doctorのWarning対処方法 (その3) + envコマンドについて&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;https://github.com/yyuu/pyenv/issues/106&quot;&gt;pyenv not playing nice with brew “config”. [$5] #106&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;方法为：&lt;br /&gt;
将 &lt;code class=&quot;highlighter-rouge&quot;&gt;alias brew=&#39;&quot;env&quot; PATH=${PATH//$(pyenv root)\/shims:/} brew&#39;&lt;/code&gt; 添加到 profile&lt;/p&gt;

&lt;p&gt;外什么要将其中的 &lt;code class=&quot;highlighter-rouge&quot;&gt;env&lt;/code&gt; 加上 &lt;code class=&quot;highlighter-rouge&quot;&gt;&quot;&quot;&lt;/code&gt; ?&lt;br /&gt;
执行 &lt;code class=&quot;highlighter-rouge&quot;&gt;env&lt;/code&gt; 之后，如其中的结果出现了空格，会出现 &lt;code class=&quot;highlighter-rouge&quot;&gt;No such file or directory&lt;/code&gt; 的问题，为了避免此问题，所以加上 &lt;code class=&quot;highlighter-rouge&quot;&gt;&quot;&quot;&lt;/code&gt;&lt;/p&gt;

&lt;h2 id=&quot;安装-virtual-environments-及使用&quot;&gt;安装 Virtual Environments 及使用&lt;/h2&gt;

&lt;p&gt;官网：&lt;a href=&quot;https://virtualenv.pypa.io&quot;&gt;https://virtualenv.pypa.io&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;这个工具可使不同的项目保持不同的依赖，（很闲的话还可以使同一个项目保持不同的依赖）&lt;br /&gt;
例如，Project X 依赖版本 1.x, 但是 Project Y  依赖版本 4.x&lt;br /&gt;
也可使用 &lt;a href=&quot;https://github.com/yyuu/pyenv-virtualenv&quot;&gt;pyenv-virtualenv&lt;/a&gt; 这个工具，功能是一样的&lt;/p&gt;

&lt;p&gt;通过 pip 来安装&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;pip install virtualenv
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h3 id=&quot;基本使用&quot;&gt;基本使用&lt;/h3&gt;

&lt;p&gt;参考：&lt;a href=&quot;http://docs.python-guide.org/en/latest/dev/virtualenvs/&quot;&gt;Virtual Environments | Python Guide&lt;/a&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;为一个项目创建一个虚拟环境，名字为 venv, 可以改成你喜欢的名字&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;cd my_project_folder
virtualenv venv
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;也可以指定 Python 版本&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;virtualenv -p /usr/local/bin/python3 venv
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;激活虚拟环境&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;source ./venv/bin/activate
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;

    &lt;p&gt;如果不加参数那么全局安装的包也包括在内，如果不想加载全局的包可使用参数 &lt;code class=&quot;highlighter-rouge&quot;&gt;--no-site-packages&lt;/code&gt;&lt;/p&gt;

    &lt;p&gt;在虚拟环境激活的情况下，如果使用 &lt;code class=&quot;highlighter-rouge&quot;&gt;pip&lt;/code&gt; 来安装各种包，包会被安装在当前虚拟环境下，即 &lt;code class=&quot;highlighter-rouge&quot;&gt;./venv&lt;/code&gt; 文件夹下，
并不会对全局环境产生影响&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;关闭虚拟环境&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;deactivate
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;删除虚拟环境，只需删除 &lt;code class=&quot;highlighter-rouge&quot;&gt;./venv&lt;/code&gt; 文件夹即可&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;rm -rf ./venv
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;
</description>
        <pubDate>Thu, 20 Aug 2015 00:00:00 +0800</pubDate>
        
        <lastBuildDate>Sat, 22 Aug 2015 16:59:47 +0800</lastBuildDate>
        
        <link>http://www.dreamxu.com/build-a-basic-python-development-environment/</link>
        <guid isPermaLink="true">http://www.dreamxu.com/build-a-basic-python-development-environment/</guid>
        
        <category>记录</category>
        
        <category>Python</category>
        
        <category>pyenv</category>
        
        <category>Virtualenv</category>
        
      </item>
    
      <item>
        <title>《明无梦的软件使用记录》书籍更新中</title>
        <description>&lt;p&gt;&lt;a href=&quot;/books/software&quot;&gt;《明无梦的软件使用记录》&lt;/a&gt;，一些软件的「安装，配置，使用」记录&lt;br /&gt;
这本书主要介绍了我使用软件过程中的一些记录，还远远没有写完&lt;/p&gt;

&lt;p&gt;博主太懒了，很多东西都藏着懒得发出来&lt;br /&gt;
前几天电脑装了双系统，以前在本地唾手可得的资料，在另一个系统中获取起来非常麻烦&lt;br /&gt;
所以决定把一些东西放网上，方便自己查看，如果能帮助到你那就再好不过了&lt;/p&gt;

&lt;p&gt;其实以前也整理过，太懒中途放弃了，希望这次能长久更新下去&lt;br /&gt;
所以本书会不断更新…&lt;/p&gt;

&lt;p&gt;本博客也因此多了一个「书籍」的栏目，放在了博客左上角&lt;br /&gt;
以后还会陆续放上一些书籍&lt;/p&gt;
</description>
        <pubDate>Thu, 06 Aug 2015 00:00:00 +0800</pubDate>
        
        <link>http://www.dreamxu.com/software-book-update/</link>
        <guid isPermaLink="true">http://www.dreamxu.com/software-book-update/</guid>
        
        <category>书籍</category>
        
        <category>Software</category>
        
      </item>
    
      <item>
        <title>Mac 电脑使用 BootCamp 来安装 Windows 10</title>
        <description>&lt;p&gt;参考自苹果的技术支持&lt;a href=&quot;https://support.apple.com/zh-cn/HT201468&quot;&gt;《如何使用 Boot Camp 来安装 Windows》&lt;/a&gt;&lt;br /&gt;
更具体可查看&lt;a href=&quot;https://help.apple.com/bootcamp/mac/5.0/help/?lang=zh-cn&quot;&gt;《Boot Camp 帮助》&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Boot Camp 6.0 已经完美支持 Windows 10&lt;/p&gt;

&lt;p&gt;我们能达到的效果：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;能够以原生速度运行 Windows&lt;/li&gt;
  &lt;li&gt;启动的时候可在 Windows 和 OS X 间切换&lt;/li&gt;
  &lt;li&gt;安装和卸载非常容易，不会对原有系统产生影响，不会对现有文件产生影响&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;准备：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;基于 Intel 的 Mac&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;64 位版本的 Windows 系统镜像，例如&lt;br /&gt;
Windows 10 (Multiple Editions) (x64) - DVD (Chinese-Simplified)&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;文件名      cn_windows_10_multiple_editions_x64_dvd_6848463.iso
SHA1        C71D49A6144772F352806201EF564951BE55EDD5
文件大小    4.01GB
发布时间    2015-07-29
下载地址    ed2k://|file|cn_windows_10_multiple_editions_x64_dvd_6848463.iso|4303300608|94FD861E82458005A9CA8E617379856A|/
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;

    &lt;p&gt;也可去 &lt;a href=&quot;http://msdn.itellyou.cn/&quot;&gt;http://msdn.itellyou.cn/&lt;/a&gt; 下载&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;可以删除的 8 GB 或更大容量的 USB2 U盘&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;足够的剩余硬盘空间，至少为 30 GB&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;备份好 Mac 电脑上的所有资料&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;具体安装过程&quot;&gt;具体安装过程&lt;/h2&gt;

&lt;blockquote&gt;
  &lt;p&gt;「Boot Camp 助理」只为 Windows 创建一个分区，而不会抹掉现有的 OS X 宗卷。
  &lt;strong&gt;重要信息&lt;/strong&gt;：如需安装 Windows，请勿使用「磁盘工具」对硬盘驱动器进行分区。
  务必使用 Boot Camp 助理。&lt;br /&gt;
  ——苹果官方&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;一、使用-bootcamp-制作启动u盘和获取-windows-驱动&quot;&gt;一、使用 BootCamp 制作启动U盘和获取 Windows 驱动&lt;/h3&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;打开 “Boot Camp Assistant” 软件，点击 “Continue”&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;将三个选项都选上，点击 “Continue”，如下图所示&lt;br /&gt;
&lt;img src=&quot;/assets/images/posts/2015-08-02_151718.png&quot; alt=&quot;Boot Camp Assistant&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;选取需要安装的 Windows 镜像，在 “Destination disk” 中选择要制作成启动盘的 U 盘，
千万不要选错了，不然被格式化就麻烦了，最后点击 “Continue”, 如下图所示&lt;br /&gt;
&lt;img src=&quot;/assets/images/posts/2015-08-02_152916.png&quot; alt=&quot;Boot Camp Assistant&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;跳出一个小对话框，提醒你会删除 U 盘中的所有数据，点击 “Continue”&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;漫长的等待…&lt;br /&gt;
Boot Camp Assistant 会自动制作启动盘和下载 Windows 驱动&lt;br /&gt;
不要关闭 BootCamp 软件，继续第二部分的安装&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;二、使用-bootcamp-创建用于-windows-的分区&quot;&gt;二、使用 BootCamp 创建用于 Windows 的分区&lt;/h3&gt;

&lt;p&gt;第一部分很长时间的等待过后，进入分区页面，给 Windows 分出适当的大小，点击 “Install”, 如下图所示&lt;br /&gt;
&lt;img src=&quot;/assets/images/posts/2015-08-02_162920.png&quot; alt=&quot;Boot Camp Assistant&quot; /&gt;&lt;/p&gt;

&lt;p&gt;分区完成之后，会自动重启进入 Windows 安装&lt;br /&gt;
进入第三部分的安装&lt;/p&gt;

&lt;h3 id=&quot;三、安装-windows&quot;&gt;三、安装 Windows&lt;/h3&gt;

&lt;p&gt;进入如下步骤的时候，选择 BOOTCAMP 分区，将其格式化，然后点击「下一步」&lt;br /&gt;
&lt;img src=&quot;/assets/images/posts/2015-08-02_172042.jpg&quot; alt=&quot;安装 Windows&quot; /&gt;&lt;/p&gt;

&lt;p&gt;稍后系统自动重启，进入 Windows 系统的安装，安装完成之后，会自动重启进入 Windows&lt;br /&gt;
最后进行第四部分的安装&lt;/p&gt;

&lt;h3 id=&quot;四、安装驱动&quot;&gt;四、安装驱动&lt;/h3&gt;

&lt;p&gt;进入 Windows 之后，再打开 U 盘目录下的 “BootCamp” 目录，运行 “setup.ext” 文件，进行驱动程序的安装&lt;/p&gt;

&lt;h3 id=&quot;五、如何选择使用哪个系统&quot;&gt;五、如何选择使用哪个系统&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;选择默认启动的操作系统&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;
        &lt;p&gt;在 Windows 下&lt;br /&gt;
单击系统托盘中的「BootCamp 图标」，然后选取「BootCamp 控制面板」，按情况设置即可&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;在 OS X 下&lt;br /&gt;
依次打开 “System Preferences” -&amp;gt; “Startup Disk”, 按情况设置即可&lt;/p&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;临时改变需要启动的操作系统，但是不会改变默认启动&lt;/p&gt;

    &lt;p&gt;在电脑启动的时候按住 “Option” 键，会出现启动选择页面&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;遇到的问题&quot;&gt;遇到的问题&lt;/h2&gt;

&lt;h3 id=&quot;安装-kb3074683-更新总是失败&quot;&gt;安装 KB3074683 更新总是失败&lt;/h3&gt;

&lt;p&gt;系统为 64 位专业版&lt;br /&gt;
安装此更新总是失败，导致每次开机都会重启 4-5 次&lt;/p&gt;

&lt;p&gt;解决办法来自 &lt;a href=&quot;http://answers.microsoft.com/zh-hans/windows/forum/windows_10-update/win10%E7%9A%84kb3074683/99dcaae9-1d0a-4721-9f91-a9f8a103a10c&quot;&gt;《win10的KB3074683 更新失败 ，回滚。正式64位专业版。》&lt;/a&gt;&lt;br /&gt;
以下是摘录：&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;按下 “Win + R” 键打开「运行」，输入 “regedit” 然后回车打开注册表&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;依次进入 &lt;code class=&quot;highlighter-rouge&quot;&gt;HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\ProfileList&lt;/code&gt; 目录&lt;br /&gt;
「ProfileList 目录」里面有 “S-1-5-21-1927424506-2982433050-3234380617-1001” 
和 “S-1-5-21-1927424506-2982433050-3234380617-1002” 两个目录（每台电脑目录名称不一样，下图是我电脑中的名称）。
其中有一个链接到 “UpdatusUser”, 另一个链接到你的本地账户（或个人Windows账户）&lt;br /&gt;
&lt;img src=&quot;/assets/images/posts/2015-08-06_022925-KB3074683.jpg&quot; alt=&quot;注册表&quot; /&gt;&lt;/p&gt;

    &lt;p&gt;删除那个链接到 “UpdatusUser” 的目录（即上面图片中选中的目录），另一个目录保留&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;重新安装 KB3074683 更新&lt;/li&gt;
&lt;/ol&gt;
</description>
        <pubDate>Sun, 02 Aug 2015 00:00:00 +0800</pubDate>
        
        <lastBuildDate>Fri, 14 Aug 2015 13:26:29 +0800</lastBuildDate>
        
        <link>http://www.dreamxu.com/mac-computer-use-bootcamp-to-install-windows-10/</link>
        <guid isPermaLink="true">http://www.dreamxu.com/mac-computer-use-bootcamp-to-install-windows-10/</guid>
        
        <category>记录</category>
        
        <category>Mac</category>
        
        <category>OS X</category>
        
        <category>BootCamp</category>
        
        <category>Windows</category>
        
        <category>Install</category>
        
      </item>
    
      <item>
        <title>安装和更新 Ubuntu 系统的方法</title>
        <description>&lt;p&gt;官网：&lt;a href=&quot;http://www.ubuntu.com/&quot;&gt;http://www.ubuntu.com/&lt;/a&gt;&lt;br /&gt;
Ubuntu 是一个比较好用的 Linux 发行版&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;下载系统镜像&lt;br /&gt;
在这个网站可下载 Ubuntu 系统的各个版本，&lt;a href=&quot;http://releases.ubuntu.com/&quot;&gt;http://releases.ubuntu.com/&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;制作启动 U 盘，选择其中的一种方法：&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;http://www.ubuntu.com/download/desktop/create-a-usb-stick-on-ubuntu&quot;&gt;How to create a bootable USB stick on Ubuntu&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;http://www.ubuntu.com/download/desktop/create-a-usb-stick-on-windows&quot;&gt;How to create a bootable USB stick on Windows&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;http://www.ubuntu.com/download/desktop/create-a-usb-stick-on-mac-osx&quot;&gt;How to create a bootable USB stick on OS X&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;重新开机选择「从 U 盘启动」，一般按 F12 选择引导&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;安装系统&lt;br /&gt;
&lt;strong&gt;注意分区的时候选择手动分区&lt;/strong&gt;&lt;/p&gt;

    &lt;p&gt;提供一个分区方案&lt;br /&gt;
参考自：&lt;a href=&quot;https://help.ubuntu.com/community/PartitioningSchemes&quot;&gt;PartitioningSchemes&lt;/a&gt;&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;主分区
        &lt;ul&gt;
          &lt;li&gt;/boot - 1G&lt;br /&gt;
用于引导系统&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;扩展分区
        &lt;ul&gt;
          &lt;li&gt;swap - 10G&lt;br /&gt;
如果内存为 8G 的话。比内存稍大一点比较好，休眠需要使用，以现在机子的大内存来看，其它情况下不怎么用得着&lt;/li&gt;
          &lt;li&gt;/ - 30G&lt;br /&gt;
存放 Ubuntu 的系统文件以及应用&lt;/li&gt;
          &lt;li&gt;/home - 100G&lt;br /&gt;
系统应用的配置，数据，其它个人数据等。单独划分一个分区以后重装系统的话，数据都在&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;剩下的可用于其它系统&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;更新系统&quot;&gt;更新系统&lt;/h2&gt;

&lt;p&gt;更新系统之前都需要执行 &lt;code class=&quot;highlighter-rouge&quot;&gt;sudo apt-get update&lt;/code&gt; 来更新本地的软件列表&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;sudo apt-get upgrade&lt;/code&gt;&lt;/p&gt;

    &lt;p&gt;系统将现有的 Package 升级，如果有相依性的问题，而此相依性需要安装其它新的 Package 或影响到其它 Package 的相依性时，此 Package 就不会被升级&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;sudo apt-get dist-upgrade&lt;/code&gt;&lt;/p&gt;

    &lt;p&gt;可以聪明的解决相依性的问题，如果有相依性问题，需要安装/移除新的 Package，就会试着去安装/移除它&lt;br /&gt;
(所以通常这个会被认为是有点风险的升级)&lt;/p&gt;

    &lt;p&gt;可以作为小版本升级来使用，比如从 Ubuntu 14.04.2 升级到 Ubuntu 14.04.5&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;sudo do-release-upgrade -d&lt;/code&gt;&lt;/p&gt;

    &lt;p&gt;release 更新，比如从 Ubuntu 14.04 升级到 16.04&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;
</description>
        <pubDate>Mon, 08 Jun 2015 00:00:00 +0800</pubDate>
        
        <lastBuildDate>Tue, 04 Oct 2016 16:04:53 +0800</lastBuildDate>
        
        <link>http://www.dreamxu.com/ubuntu-system-install/</link>
        <guid isPermaLink="true">http://www.dreamxu.com/ubuntu-system-install/</guid>
        
        <category>记录</category>
        
        <category>Ubuntu</category>
        
        <category>Install</category>
        
        <category>Update</category>
        
      </item>
    
      <item>
        <title>Ubuntu 系统的引导修复</title>
        <description>&lt;p&gt;比如说在一台 Ubuntu 的电脑上再安装了 Windows, 那么你就只能进入 Windows 了。
以下是修复方法：&lt;/p&gt;

&lt;p&gt;用和原系统匹配的 Ubuntu 引导盘，引导进入 “Try Ubuntu”, 然后打开终端即可输入命令了&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;获取 root 权限&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo -i
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;查看分区情况&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;fdisk -l
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;挂载需要修复引导的系统的 / 目录，可由上一步查看到需要挂载哪个目录，
如若不确定，可尝试挂载以下，看看里面有什么内容再来确定&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;mount /dev/sdx1 /mnt
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;如果 /boot 分区是单独分区的，那么也需要挂载需&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;mount /dev/sdx2 /mnt/boot
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;挂载运行系统目录到需要修复引导的系统下&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;for i in /dev /dev/pts /proc /sys; do sudo mount -B $i /mnt$i; done
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;进入需要修复引导的系统&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;chroot /mnt
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;重新安装 GRUB 到 MBR, 并更新 GRUB&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;grub-install /dev/sdx
update-grub
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;
</description>
        <pubDate>Tue, 26 May 2015 00:00:00 +0800</pubDate>
        
        <link>http://www.dreamxu.com/ubuntu-boot-repair/</link>
        <guid isPermaLink="true">http://www.dreamxu.com/ubuntu-boot-repair/</guid>
        
        <category>记录</category>
        
        <category>Ubuntu</category>
        
        <category>GRUB</category>
        
      </item>
    
      <item>
        <title>魔能游戏施法脚本</title>
        <description>&lt;p&gt;魔能游戏的施法脚本，例如要释放「传送术」，需要依次按下 a, s, a, space 四个键&lt;br /&gt;
使用了脚本之后，你需要释放「传送术」，只需按数字 1 一个键即可&lt;/p&gt;

&lt;p&gt;源代码地址：&lt;a href=&quot;https://github.com/lifenod/magicka-spell-casting-script&quot;&gt;https://github.com/lifenod/magicka-spell-casting-script&lt;/a&gt;&lt;br /&gt;
使用 AutoHotkey 工具编写&lt;/p&gt;
</description>
        <pubDate>Thu, 14 May 2015 00:00:00 +0800</pubDate>
        
        <link>http://www.dreamxu.com/magicka-game-spell-casting-script/</link>
        <guid isPermaLink="true">http://www.dreamxu.com/magicka-game-spell-casting-script/</guid>
        
        <category>技术</category>
        
        <category>Game</category>
        
        <category>Magicka</category>
        
        <category>AutoHotkey</category>
        
      </item>
    
      <item>
        <title>Sublime Text 的基本使用</title>
        <description>&lt;p&gt;官网：&lt;a href=&quot;http://www.sublimetext.com/&quot;&gt;http://www.sublimetext.com/&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;设置命令行启动&quot;&gt;设置命令行启动&lt;/h2&gt;

&lt;p&gt;Mac 环境，在 Shell 配置文件中加入如下内容&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;alias sublime=&quot;&#39;/Applications/Sublime Text.app/Contents/SharedSupport/bin/subl&#39;&quot;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h2 id=&quot;安装-package-control&quot;&gt;安装 Package Control&lt;/h2&gt;

&lt;p&gt;一般都会安装此插件，用来管理其它插件的插件&lt;/p&gt;

&lt;p&gt;此插件网站：&lt;a href=&quot;https://packagecontrol.io/&quot;&gt;https://packagecontrol.io/&lt;/a&gt;&lt;br /&gt;
安装方法上面网站上有&lt;/p&gt;

&lt;p&gt;使用方法：&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;打开命令面板，菜单栏 - Tools - Command Paletter&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;输入 install 然后选中 Install Package 后按回车&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;输入需要安装的插件名称&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;
</description>
        <pubDate>Mon, 11 May 2015 00:00:00 +0800</pubDate>
        
        <link>http://www.dreamxu.com/sublime-text-basic-use/</link>
        <guid isPermaLink="true">http://www.dreamxu.com/sublime-text-basic-use/</guid>
        
        <category>记录</category>
        
        <category>Sublime Text</category>
        
      </item>
    
      <item>
        <title>r6300v2 路由器 dd-wrt 系统的交叉编译</title>
        <description>&lt;p&gt;路由器系统版本：DD-WRT v24-sp2 (06/13/14) kongac, (SVN revision 24345M)&lt;/p&gt;

&lt;p&gt;使用的工具是：hndtools-arm-linux-2.6.36-uclibc-4.5.3&lt;br /&gt;
工具运行环境：Ubuntu 14.04.2 32-bit&lt;/p&gt;

&lt;p&gt;编译的时候会找不到 libmpc.so.2, 所以在编译之前执行如下命令&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;export LD_LIBRARY_PATH=&quot;/usr/local/lib&quot;
ln -s path/libmpc.so.2 /usr/local/lib
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;经实测，工具可使用，下载地址：&lt;a href=&quot;https://www.dropbox.com/s/rzmoz1wxlctartd/hndtools-arm-linux-2.6.36-uclibc-4.5.3.tar.gz?dl=0&quot;&gt;https://www.dropbox.com/s/rzmoz1wxlctartd/hndtools-arm-linux-2.6.36-uclibc-4.5.3.tar.gz?dl=0&lt;/a&gt;&lt;/p&gt;
</description>
        <pubDate>Tue, 28 Apr 2015 00:00:00 +0800</pubDate>
        
        <link>http://www.dreamxu.com/r6300v2-dd-wrt-cross-compiler/</link>
        <guid isPermaLink="true">http://www.dreamxu.com/r6300v2-dd-wrt-cross-compiler/</guid>
        
        <category>记录</category>
        
        <category>r6300v2</category>
        
        <category>DD-WRT</category>
        
      </item>
    
      <item>
        <title>时间计算器（Racket 实现）</title>
        <description>&lt;p&gt;计算时间的差与和&lt;/p&gt;

&lt;div class=&quot;language-scheme highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;o&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;lang&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;racket&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;racket/date&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;


&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;define&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;display-date-with-chinese&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;lambda&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;seconds&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;displayln&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;date-&amp;gt;string&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;seconds-&amp;gt;date&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;seconds&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                             &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;date-display-format&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;&#39;chinese&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))))&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;define&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;get-seconds&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;lambda&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;date&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;match&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;date&lt;/span&gt;
      &lt;span class=&quot;err&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;list&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;year&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;month&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;day&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;&#39;-&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;hour&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;minute&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;second&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
       &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;find-seconds&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;second&lt;/span&gt;
                     &lt;span class=&quot;nv&quot;&gt;minute&lt;/span&gt;
                     &lt;span class=&quot;nv&quot;&gt;hour&lt;/span&gt;
                     &lt;span class=&quot;nv&quot;&gt;day&lt;/span&gt;
                     &lt;span class=&quot;nv&quot;&gt;month&lt;/span&gt;
                     &lt;span class=&quot;nv&quot;&gt;year&lt;/span&gt;
                     &lt;span class=&quot;no&quot;&gt;#t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;define&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;add-and-display-date&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;lambda&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;seconds&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;display-date-with-chinese&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;seconds&lt;/span&gt;
                                  &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;car&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3600&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                                  &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cadr&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;60&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                                  &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;caddr&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))))&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;define&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;date-add&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;case-lambda&lt;/span&gt;
    &lt;span class=&quot;err&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;add-and-display-date&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;current-seconds&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;err&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;date&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
     &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;add-and-display-date&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;get-seconds&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;date&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;;; 计算当前时刻加上 2 个小时，30 分钟，15 秒之后的时间&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;date-add&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;30&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;;; =&amp;gt; &quot;2015/4/11 星期六 20:24:19&quot;&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;;; 计算 2015 年 4 月 11 号 17 点 50 分 21 秒加上 1000 分钟后的时间&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;date-add&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;2015&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;17&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;50&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;21&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;;; =&amp;gt; &quot;2015/4/12 星期天 10:30:21&quot;&lt;/span&gt;


&lt;span class=&quot;c1&quot;&gt;;; 例如求解 (hex-calc 54321 &#39;(60 60))&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;;; 解为 &#39;(21 5 15)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;;; 问题与解的对应关系为 21 + 5*60 + 15*(60*60) = 54321&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;define&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;hex-calc&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;lambda&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;number&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;hex-list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;cond&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;empty?&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;hex-list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;list&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;number&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;]&lt;/span&gt;
          &lt;span class=&quot;err&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;else&lt;/span&gt;
           &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;current-hex&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;car&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;hex-list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
             &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cons&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;remainder&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;number&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;current-hex&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                   &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;hex-calc&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;quotient&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;number&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;current-hex&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                             &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cdr&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;hex-list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))))&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;define&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;display-time&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;lambda&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;seconds1&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;seconds2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;format-time&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;hex-calc&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;abs&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;seconds1&lt;/span&gt;
                                         &lt;span class=&quot;nv&quot;&gt;seconds2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
                                 &lt;span class=&quot;o&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;60&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;60&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;相差 ~a 小时 ~a 分钟 ~a 秒\n&quot;&lt;/span&gt;
              &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;third&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;format-time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
              &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;second&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;format-time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
              &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;first&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;format-time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))))&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;define&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;date-sub&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;case-lambda&lt;/span&gt;
    &lt;span class=&quot;err&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;date&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;display-time&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;current-seconds&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;get-seconds&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;date&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;err&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;date1&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;date2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;display-time&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;get-seconds&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;date1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                                 &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;get-seconds&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;date2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;;; 计算 2011 年 4 月 11 号 17 点 50 分 21 秒与当前时间的时间差&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;date-sub&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;2011&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;17&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;50&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;21&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;;; =&amp;gt; 相差 35069 小时 46 分钟 13 秒&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;;; 计算 2011 年 4 月 11 号 17 点 50 分 21 秒与&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;;; 2015 年 4 月 11 号 17 点 50 分 00 秒的时间差&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;date-sub&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;2011&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;17&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;50&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;21&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;2015&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;17&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;50&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;00&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;;; =&amp;gt; 相差 35063 小时 59 分钟 39 秒&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
        <pubDate>Sat, 11 Apr 2015 00:00:00 +0800</pubDate>
        
        <link>http://www.dreamxu.com/time-calc/</link>
        <guid isPermaLink="true">http://www.dreamxu.com/time-calc/</guid>
        
        <category>技术</category>
        
        <category>Racket</category>
        
        <category>Scheme</category>
        
      </item>
    
      <item>
        <title>推荐 - Learn X in Y minutes</title>
        <description>&lt;p&gt;&lt;a href=&quot;http://learnxinyminutes.com&quot;&gt;Learn X in Y minutes&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;学习一门编程语言只要几分钟，还支持多国语言哦。被翻译最多的编程语言是 &lt;a href=&quot;http://learnxinyminutes.com/docs/zh-cn/brainfuck-cn/&quot;&gt;brainfuck&lt;/a&gt;, 哈哈&lt;br /&gt;
那么好的事情怎么不推荐大家呢？不管你是学习，浏览，回忆统统用得着&lt;/p&gt;

</description>
        <pubDate>Sun, 22 Mar 2015 00:00:00 +0800</pubDate>
        
        <link>http://www.dreamxu.com/recommend-learnxinyminutes/</link>
        <guid isPermaLink="true">http://www.dreamxu.com/recommend-learnxinyminutes/</guid>
        
        <category>分享</category>
        
      </item>
    
      <item>
        <title>Racket 中的模式匹配</title>
        <description>&lt;p&gt;简单来说，模式匹配就是以确定的结构去「匹配」原数据，
将原数据结构化（将原数据拆分成各个元素，并命名之），
也就得到了对原数据的操作能力&lt;/p&gt;

&lt;p&gt;用法呢，要比正则表达式简单多了&lt;br /&gt;
可查看 &lt;em&gt;&lt;a href=&quot;http://docs.racket-lang.org/reference/match.html&quot;&gt;Pattern Matching | Racket Documentation&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;例如我们要将 &lt;code class=&quot;highlighter-rouge&quot;&gt;&#39;(1 2 3)&lt;/code&gt; 其中的元素倒过来，可以这么做：&lt;/p&gt;

&lt;div class=&quot;language-scheme highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;match&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;err&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;list&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;list&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;; =&amp;gt; &#39;(3 2 1)&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;如果要将其中的元素相加呢？&lt;/p&gt;

&lt;div class=&quot;language-scheme highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;match&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;err&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;list&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;; =&amp;gt; 6&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h2 id=&quot;一些例子&quot;&gt;一些例子&lt;/h2&gt;

&lt;p&gt;如果 0 到 100 闭区间内的数能被 3 整除，则输出该数并标记 &lt;code class=&quot;highlighter-rouge&quot;&gt;*&lt;/code&gt;, 
如果能被 5 整除，则输出该数并标记 &lt;code class=&quot;highlighter-rouge&quot;&gt;#&lt;/code&gt;, 
如果既能被 3 整除又能被 5 整除，则输出该数并标记 &lt;code class=&quot;highlighter-rouge&quot;&gt;*#&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;language-scheme highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;o&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;lang&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;racket&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;math/number-theory&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;define&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;range-closed&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;start&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;end&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;range&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;start&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;for-each&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;lambda&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;match&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;divides?&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;divides?&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
              &lt;span class=&quot;err&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;#t&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;#f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;~A*~n&quot;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;]&lt;/span&gt;
              &lt;span class=&quot;err&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;#f&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;#t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;~A#~n&quot;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;]&lt;/span&gt;
              &lt;span class=&quot;err&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;#t&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;#t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;~A*#~n&quot;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;]&lt;/span&gt;
              &lt;span class=&quot;err&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
          &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;range-closed&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;过程简洁明了&lt;/p&gt;
</description>
        <pubDate>Thu, 19 Mar 2015 00:00:00 +0800</pubDate>
        
        <link>http://www.dreamxu.com/racket-pattern-matching/</link>
        <guid isPermaLink="true">http://www.dreamxu.com/racket-pattern-matching/</guid>
        
        <category>记录</category>
        
        <category>Racket</category>
        
        <category>Scheme</category>
        
        <category>Pattern matching</category>
        
      </item>
    
      <item>
        <title>Scheme 中的 quote, quasiquote, unquote 浅谈</title>
        <description>&lt;h2 id=&quot;quote&quot;&gt;quote&lt;/h2&gt;

&lt;p&gt;为了操作以及表示符号数据，在语言中就需要一种新元素：具有表示符号的能力&lt;/p&gt;

&lt;p&gt;表示方法是在数据前面加上「单引号」，例如：&lt;code class=&quot;highlighter-rouge&quot;&gt;&#39;(a b)&lt;/code&gt;&lt;br /&gt;
但是这样就违背了我们程序具有表的形式的普遍性，通过引进特殊形式 quote 就可以恢复这种一致性&lt;br /&gt;
例如：&lt;code class=&quot;highlighter-rouge&quot;&gt;(quote a b)&lt;/code&gt; 等价与 &lt;code class=&quot;highlighter-rouge&quot;&gt;&#39;(a b)&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;如下的例子展示了符号和值的区别：&lt;/p&gt;

&lt;div class=&quot;language-scheme highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;define&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;define&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;list&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;      &lt;span class=&quot;c1&quot;&gt;; =&amp;gt; &#39;(1 2)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;list&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;&#39;a&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;&#39;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;    &lt;span class=&quot;c1&quot;&gt;; =&amp;gt; &#39;(a b)&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h3 id=&quot;单引号和双引号的区别&quot;&gt;单引号和双引号的区别&lt;/h3&gt;

&lt;p&gt;用双引号扩起来的称为字符串，例如：”String”&lt;br /&gt;
单引号可以用于扩起表和符号，是一种结构化的数据；
而双引号只能用于字符串，只是一串字符，一般用于需要打印输出的对象，例如：&lt;/p&gt;

&lt;div class=&quot;language-scheme highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;display&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;hi&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;但是不能这样：&lt;/p&gt;

&lt;div class=&quot;language-scheme highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;car&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;(a b c)&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;可以用单引号来实现：&lt;/p&gt;

&lt;div class=&quot;language-scheme highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;car&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;      &lt;span class=&quot;c1&quot;&gt;; =&amp;gt; &#39;a&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h2 id=&quot;quote-quasiquote-unquote&quot;&gt;quote, quasiquote, unquote&lt;/h2&gt;

&lt;p&gt;有时候不想整个表都表示为符号，这时可用 quasiquote 和 unquote 来实现，例如：&lt;/p&gt;

&lt;div class=&quot;language-scheme highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;define&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;define&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;                         &lt;span class=&quot;c1&quot;&gt;; =&amp;gt; &#39;(a 2), b 依旧是那个变量 b&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;quasiquote&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;unquote&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;    &lt;span class=&quot;c1&quot;&gt;; =&amp;gt; &#39;(a 2), 和 `(a ,b) 等价&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;,a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;                        &lt;span class=&quot;c1&quot;&gt;; =&amp;gt; &#39;(1 2), 从结果上来看等价于 (list a b)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;                          &lt;span class=&quot;c1&quot;&gt;; =&amp;gt; &#39;(a b), 从结果上来看等价于 (list &#39;a &#39;b)&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
        <pubDate>Tue, 17 Mar 2015 00:00:00 +0800</pubDate>
        
        <link>http://www.dreamxu.com/scheme-of-the-quote-quasiquote-unquote-discuss/</link>
        <guid isPermaLink="true">http://www.dreamxu.com/scheme-of-the-quote-quasiquote-unquote-discuss/</guid>
        
        <category>记录</category>
        
        <category>Scheme</category>
        
        <category>quote</category>
        
        <category>quasiquote</category>
        
        <category>unquote</category>
        
      </item>
    
      <item>
        <title>西邮联通上网激活方法（可共享，支持路由器，Mac, Windows, Linux）</title>
        <description>&lt;h2 id=&quot;方法一（只支持-windows）&quot;&gt;方法一（只支持 Windows）&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;http://tieba.baidu.com/p/3606416310&quot;&gt;http://tieba.baidu.com/p/3606416310&lt;/a&gt;, 
使用此帖子中的插件&lt;br /&gt;
&lt;strong&gt;记得将 IP 改为 222.24.63.10&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;亲测其中的版本 01 可用&lt;/p&gt;

&lt;p&gt;可用版本备份下载地址：&lt;a href=&quot;https://www.dropbox.com/s/c56uadc0q6fjnv7/Freedrcom.zip?dl=0&quot;&gt;https://www.dropbox.com/s/c56uadc0q6fjnv7/Freedrcom.zip?dl=0&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;方法二（支持各系统）&quot;&gt;方法二（支持各系统）&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/drcoms/drcom-generic&quot;&gt;https://github.com/drcoms/drcom-generic&lt;/a&gt;, 
其中的 p 版可用，《&lt;a href=&quot;https://github.com/drcoms/drcom-generic/wiki/p版简略使用和配置说明&quot;&gt;p 版简略使用和配置说明&lt;/a&gt;》&lt;/p&gt;

&lt;p&gt;通过抓包获取到的信息为：&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;n&quot;&gt;server&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&#39;222.24.63.10&#39;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pppoe_flag&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\x0a&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&#39;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;keep_alive2_flag&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\xdc&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;将以上内容替换 latest-pppoe.py 文件中的相应内容，然后运行此文件来激活（需要 Python 环境）&lt;/p&gt;

&lt;p&gt;亲测路由器可使用（r6300v2 刷的 dd-wrt 系统）&lt;br /&gt;
简单说下步骤：&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;开启 SSH 和 JFFS&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;将 /jffs/opt 挂载到 /opt&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;用 ipkg 来安装 opkg&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;用 opkg 来安装 python&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;加入如下启动代码&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;mount --bind /jffs/opt /opt
sleep 15
/opt/bin/pppoe.sh
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;

    &lt;p&gt;需要修改 pppoe.sh 文件，很简单就不讲了&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;已修改好的 latest-pppoe.py 文件下载地址：&lt;a href=&quot;https://www.dropbox.com/s/idtxn22vojyiunl/latest-pppoe.py?dl=0&quot;&gt;https://www.dropbox.com/s/idtxn22vojyiunl/latest-pppoe.py?dl=0&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;以上软件皆非原创，请感谢相应作者&lt;/strong&gt;&lt;/p&gt;
</description>
        <pubDate>Sun, 01 Mar 2015 00:00:00 +0800</pubDate>
        
        <link>http://www.dreamxu.com/xiyou-10010-activate/</link>
        <guid isPermaLink="true">http://www.dreamxu.com/xiyou-10010-activate/</guid>
        
        <category>记录</category>
        
        <category>西邮</category>
        
        <category>联通</category>
        
      </item>
    
      <item>
        <title>r6300v2 路由器 dd-wrt 系统使用 opkg</title>
        <description>&lt;h2 id=&quot;安装-opkg&quot;&gt;安装 opkg&lt;/h2&gt;

&lt;p&gt;24500M 及之后的版本无法使用 ipkg, 可用 &lt;code class=&quot;highlighter-rouge&quot;&gt;bootstrap&lt;/code&gt; 命令来安装 opkg&lt;/p&gt;

&lt;p&gt;使用的版本是：kongac 的 24345M&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;开启 SSH（在服务选项卡）和 JFFS2 （在管理选项卡）&lt;br /&gt;
设置完了之后重启路由器&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;安装 opkg, 必须要有 /opt 目录&lt;br /&gt;
可将此目录挂载到 /jffs 上，或者挂载到移动硬盘上&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;
        &lt;p&gt;移动硬盘方式&lt;/p&gt;

        &lt;p&gt;启用核心 USB 支持（在 USB 选项卡）&lt;br /&gt;
启用 USB 存储设备支持&lt;br /&gt;
启用自动挂载磁盘，并在 “Mount this Partition to /opt” 填入相应的 UUID&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;jffs 方式&lt;/p&gt;

        &lt;p&gt;如果没有移动硬盘，那么开启了 JFFS 之后使用如下命令挂载 /opt&lt;/p&gt;

        &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;mkdir /jffs/opt
mount --bind /jffs/opt /opt
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
        &lt;/div&gt;

        &lt;p&gt;&lt;strong&gt;别忘了将下面那条命令添加到开机启动&lt;/strong&gt;&lt;/p&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;使用 SSH 登录路由器之后，用如下命令安装 opkg&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;ipkg update
ipkg install opkg
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;使用-opkg&quot;&gt;使用 opkg&lt;/h2&gt;

&lt;p&gt;例如用来安装 python&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;opkg update
opkg install python
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
        <pubDate>Sat, 28 Feb 2015 00:00:00 +0800</pubDate>
        
        <link>http://www.dreamxu.com/r6300v2-dd-wrt-use-opkg/</link>
        <guid isPermaLink="true">http://www.dreamxu.com/r6300v2-dd-wrt-use-opkg/</guid>
        
        <category>记录</category>
        
        <category>r6300v2</category>
        
        <category>DD-WRT</category>
        
        <category>opkg</category>
        
      </item>
    
      <item>
        <title>Chef 基本流程</title>
        <description>&lt;h2 id=&quot;工具介绍&quot;&gt;工具介绍&lt;/h2&gt;

&lt;h3 id=&quot;chef-和-chef-solo&quot;&gt;Chef 和 Chef Solo&lt;/h3&gt;

&lt;p&gt;Chef 是一个自动化工具，用 Opscode 开发，
使用 Ruby DSL 以一种可重复使用的格式表示配置服务器所需的命令&lt;br /&gt;
Chef 经常运行在服务器集群的枢纽，统筹安排其他服务器的配置&lt;/p&gt;

&lt;p&gt;可以在单机模式下使用 Chef (Chef Solo)&lt;br /&gt;
在这种模式下，我们在本地开发平台上定义服务器的各种角色和设置，然后根据需要手动应用这些设置&lt;/p&gt;

&lt;p&gt;如果项目不断扩大也不用担心，使用 Chef Solo 制定的自动化配置大多数都可以在 Chef 中使用&lt;/p&gt;

&lt;h3 id=&quot;knife-和-knife-solo&quot;&gt;Knife 和 Knife Solo&lt;/h3&gt;

&lt;p&gt;Knife 是一个命令行工具，为本地开发环境中的 Chef 仓库和远程服务器之间提供交互接口&lt;/p&gt;

&lt;p&gt;一般情况下，远程服务器必须是主 Chef 服务器。
不过 Knife Solo 允许在单机模式下使用 Chef, 可以直接和需要配置的服务器交互&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://matschaffer.github.io/knife-solo/&quot;&gt;Knife Solo 使用介绍&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;berkshelf&quot;&gt;Berkshelf&lt;/h3&gt;

&lt;p&gt;在 Chef 中，安装各组件所需的命令成为「配方」&lt;/p&gt;

&lt;p&gt;Berkshelf 就像是配方的 Bundler&lt;br /&gt;
我们使用 Berkshelf 获取配置服务器所需的 Chef 配方（特定的版本）&lt;/p&gt;

&lt;h2 id=&quot;chef-术语介绍&quot;&gt;Chef 术语介绍&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;配方 (recipe)&lt;/p&gt;

    &lt;p&gt;定义安装单个组件（例如 Ruby, mysql-server, Monit 等）所需的命令&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;食谱 (cookbook)&lt;/p&gt;

    &lt;p&gt;相关的配方集合，例如，mysql 食谱中包含 mysql-server 配方和 mysql-client 配方&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;节点 (node)&lt;/p&gt;

    &lt;p&gt;要配置的远程服务器&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;角色 (role)&lt;/p&gt;

    &lt;p&gt;一系列配方的组合，应用在节点上&lt;/p&gt;

    &lt;p&gt;例如，Postgres Server 角色可能会包含安装 postgres-server 的配方，安装和设置防火墙的操作，
以及安装合适的服务器监控工具的操作&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;数据包 (data bag)&lt;/p&gt;

    &lt;p&gt;配方所用的元数据，保存为 JSON 格式文件。
例如，要创建的用户列表，以及相应的公钥&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Chef 仓库 (chef repository)&lt;/p&gt;

    &lt;p&gt;一系列节点和角色定义&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;创建-chef-solo-仓库&quot;&gt;创建 Chef Solo 仓库&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;新建文件夹&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;mkdir chef_repo
cd chef_repo
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;安装工具&lt;/p&gt;

    &lt;ol&gt;
      &lt;li&gt;
        &lt;p&gt;初始化 bundler&lt;/p&gt;

        &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;bundle init
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
        &lt;/div&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;在刚生成的 Gemfile 文件中写入如下内容：&lt;/p&gt;

        &lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;n&quot;&gt;source&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;https://rubygems.org&#39;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;gem&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;knife-solo&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;0.3.0&#39;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;gem&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;chef&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;~&amp;gt; 11.10.0&#39;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;gem&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;chef-zero&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;1.7.2&#39;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;gem&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;berkshelf&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;~&amp;gt; 2.0.14&#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
        &lt;/div&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;然后运行如下命令来安装&lt;/p&gt;

        &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;bundle install
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
        &lt;/div&gt;
      &lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;初始化仓库&quot;&gt;初始化仓库&lt;/h2&gt;

&lt;p&gt;使用 bundle exec 确保使用的 Gemfile 中定义的 gem 版本来执行命令&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;bundle exec knife solo init .
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;生成若干文件，结构如下：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;chef_repo
├── .chef
│   └── knife.rb
├── .gitignore
├── Berksfile
├── Gemfile
├── Gemfile.lock
├── cookbooks
│   └── .gitkeep
├── data_bags
│   └── .gitkeep
├── environments
│   └── .gitkeep
├── nodes
│   └── .gitkeep
├── roles
│   └── .gitkeep
└── site-cookbooks
    └── .gitkeep
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;下面来说说各个文件及文件夹的作用&lt;/p&gt;

&lt;h3 id=&quot;kniferb&quot;&gt;knife.rb&lt;/h3&gt;

&lt;p&gt;Knife 是个命令行工具，可以和远程服务器上的 Chef 交互&lt;br /&gt;
Knife Solo 添加了额外的命令，可以在本地开发设备上直接和要配置的服务器交互
（而不用通过 Chef 中央服务器中转）&lt;/p&gt;

&lt;p&gt;knife.rb 中包含针对我们这个仓库的 Knife 设置。
这个文件在使用 Chef 中央服务器时更有用，
并不符合我们使用的单机模式，但却是 Knife 的主要设置（也是唯一的设置文件）&lt;/p&gt;

&lt;p&gt;Knife 的全部设置选项可以在 &lt;a href=&quot;http://docs.opscode.com/config_rb_knife.html&quot;&gt;http://docs.opscode.com/config_rb_knife.html&lt;/a&gt; 中查看&lt;br /&gt;
目前，我们要设置的重要选项如下：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;cookbook_path&lt;br /&gt;
这个选项是个数组，包含很多相对于仓库根目录的路径，
指定角色中使用的食谱和节点定义的存储位置&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;node_path&lt;br /&gt;
相对仓库根目录的路径，指定节点定义存储的位置&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;role_path&lt;br /&gt;
相对仓库根目录的路径，指定角色定义存储的位置&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;data_bag_path&lt;br /&gt;
相对仓库根目录的路径，指定数据包的存储位置&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;一般情况下，都可以直接使用默认值&lt;/p&gt;

&lt;h3 id=&quot;berksfile&quot;&gt;Berksfile&lt;/h3&gt;

&lt;p&gt;在 Berkfile 中定义 Chef 仓库要使用的食谱，以及各自的版本。
然后执行 &lt;code class=&quot;highlighter-rouge&quot;&gt;berks install&lt;/code&gt; 命令安装这些食谱。
如果食谱在 metadata.rb 文件用 depends 定义了依赖食谱，Berkshelf 会负责安装这些依赖食谱&lt;/p&gt;

&lt;p&gt;和 Bundler 一样，Berkshelf 也会生成一个 Berksfile.lock 文件，写入食谱及相应的版本号&lt;/p&gt;

&lt;h3 id=&quot;cookbooks&quot;&gt;cookbooks&lt;/h3&gt;

&lt;p&gt;cookbooks 文件夹用来存放使用 Berkshelf 安装的他人编写的食谱&lt;br /&gt;
如想存放自己编写的食谱，应放在 site-cookbooks 文件夹&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;千万别在 cookbooks 文件夹中存放没有使用 Berkshel 来管理的食谱，
因为，每次运行 knife solo 后，cookbooks 文件夹中的内容都会被抹去重新写入&lt;/strong&gt;&lt;/p&gt;

&lt;h3 id=&quot;databags&quot;&gt;data_bags&lt;/h3&gt;

&lt;p&gt;如果食谱中要用到大量数据，就可以将数据存放在这里&lt;/p&gt;

&lt;h3 id=&quot;environments&quot;&gt;environments&lt;/h3&gt;

&lt;p&gt;对应现实中的工作流，比如说生产环境，准备环境，测试环境，开发环境&lt;/p&gt;

&lt;h3 id=&quot;nodes&quot;&gt;nodes&lt;/h3&gt;

&lt;p&gt;存放节点文件&lt;/p&gt;

&lt;h3 id=&quot;roles&quot;&gt;roles&lt;/h3&gt;

&lt;p&gt;存放角色文件&lt;/p&gt;

&lt;h3 id=&quot;site-cookbooks&quot;&gt;site-cookbooks&lt;/h3&gt;

&lt;p&gt;用来存放自己编写的食谱&lt;/p&gt;

&lt;h2 id=&quot;食谱介绍&quot;&gt;食谱介绍&lt;/h2&gt;

&lt;p&gt;以 redis-tlq 食谱为例：&lt;a href=&quot;https://github.com/TalkingQuickly/redis-tlq&quot;&gt;https://github.com/TalkingQuickly/redis-tlq&lt;/a&gt;&lt;br /&gt;
将其作为自己编写的食谱放到 &lt;code class=&quot;highlighter-rouge&quot;&gt;site-cookbooks&lt;/code&gt; 文件夹下&lt;/p&gt;

&lt;p&gt;文件结构如下：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;redis-tlq
├── attributes
│   └── default.rb
├── metadata.rb
├── recipes
│   └── default.rb
└── templates
    └── default
        ├── redis-server.erb
        └── redis.conf.erb
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;下面是各个文件及文件夹的说明&lt;/p&gt;

&lt;h3 id=&quot;metadatarb&quot;&gt;metadata.rb&lt;/h3&gt;

&lt;p&gt;元数据文件中详细说明了这个食谱的作用，编写人，依赖件以及版本号&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;metadata.rb:&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;c1&quot;&gt;# 食谱的名称&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;              &lt;span class=&quot;s2&quot;&gt;&quot;redis-tlq&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;maintainer&lt;/span&gt;        &lt;span class=&quot;s2&quot;&gt;&quot;Ben Dixon&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;maintainer_email&lt;/span&gt;  &lt;span class=&quot;s2&quot;&gt;&quot;ben@talkingquickly.co.uk&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;description&lt;/span&gt;       &lt;span class=&quot;s2&quot;&gt;&quot;Installs redis from rwky&#39;s ppa&quot;&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# 食谱的版本号&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;version&lt;/span&gt;           &lt;span class=&quot;s2&quot;&gt;&quot;0.0.6&quot;&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# 配方的名称&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;recipe&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;redis-tlq&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Installs redis&quot;&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# 指定这个食谱支持的操作系统&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# 这个设置很重要，因为我们这个简单的食谱只支持 Ubuntu, 会用到一些只有 Ubuntu 才支持的命令&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;supports&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;ubuntu&quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;使用 Berkshelf 时，version 和 recipe 这两行是关键的设置，
Berkshelf 会查看 metadata.rb 文件，确认要使用的食谱中是否有匹配的配方&lt;/p&gt;

&lt;p&gt;还有一个选项 depends 这里没提到，用来指定要依赖的其他食谱&lt;/p&gt;

&lt;h3 id=&quot;recipesdefaultrb&quot;&gt;recipes/default.rb&lt;/h3&gt;

&lt;p&gt;Chef 食谱必须包含一个名为 default 的配方&lt;br /&gt;
如果在节点或角色定义中使用到了某个食谱，而没有指定要用哪个配方，就会使用这个默认配方&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;cookbooks/redis-tlq/recipes/default.rb:&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;c1&quot;&gt;# use redis from ppa rather than the one&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# available in the package manager. rwky&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# builds the stable version and is kept&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# consistently up to date. We need python-software-properties&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# for add-apt-repository to work&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# Chef 首先会使用操作系统的包管理工具检查是否安装了 python-software-properties 代码包&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# 如果没有，那就安装&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;package&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;python-software-properties&#39;&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# 告诉 Chef, 其中包含的命令是在 bash 中执行的&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# 随后的文本会在配方执行时显示出来，让用户知道配方正在做什么&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;bash&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;adding stable redis ppa&#39;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# 以 root 这个用户身份去执行&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;root&#39;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;code&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;EOC&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;
    add-apt-repository ppa:chris-lea/redis-server
    apt-get update
&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;  EOC&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;package&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;redis-server&#39;&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# 上述操作只是安装了 Redis, 我们还要对其进行一些自定义设置，&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# 再添加初始化脚本用于启动、停止 Redis 服务器，这就轮到 template 出场了&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# 这段代码的作用如下：&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# 1. 在 redis-tlq/template/default 文件夹中寻找文件 redis.conf.erb&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# 2. 解析这个文件中的所有 erb 代码，然后把文件复制到节点上，存放位置为 /etc/redis/redis.conf&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# 3. 把这个文件的拥有者设为 root 用户组的 root, 权限为 0644&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;template&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;/etc/redis/redis.conf&quot;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;owner&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;root&quot;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;group&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;root&quot;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;mode&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;0644&quot;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;source&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;redis.conf.erb&quot;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;notifies&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;execute[restart-redis]&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:immediately&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# ...&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h4 id=&quot;模板文件夹的说明&quot;&gt;模板文件夹的说明&lt;/h4&gt;

&lt;p&gt;templates 文件夹中的子文件夹对应的是服务器上所安装的操作系统&lt;br /&gt;
如果使用的是 Ubuntu 12.04, 上面的 template 代码块就会在下面的路径中按顺序寻找 redis.conf.erb 文件：&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;templates/ubuntu-12.04/redis.conf.erb&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;templates/ubuntu/redis.conf.erb&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;remplates/default/redis.conf.erb&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;如果要编写复杂的食谱，照应多种操作系统，这种处理方式的强大就体现出来了&lt;br /&gt;
目前，我们仅仅使用 default 文件夹&lt;/p&gt;

&lt;h3 id=&quot;属性&quot;&gt;属性&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;配方&lt;/strong&gt;可以使用属性 (attribute) 进行定制。
属性可以在多个地方设定，包括：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;节点定义&lt;/li&gt;
  &lt;li&gt;角色定义&lt;/li&gt;
  &lt;li&gt;食谱默认值&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;一般情况下，在食谱中会为属性指定默认值，如果需要，可以覆盖默认值&lt;/p&gt;

&lt;p&gt;在 &lt;code class=&quot;highlighter-rouge&quot;&gt;templates/default/redis.conf.erb&lt;/code&gt; 文件中有这么一段代码：&lt;/p&gt;

&lt;div class=&quot;language-eruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;cp&quot;&gt;&amp;lt;%&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;unless&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:redis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:redis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:dont_bind&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;cp&quot;&gt;%&amp;gt;&lt;/span&gt;
  bind 127.0.0.1
&lt;span class=&quot;cp&quot;&gt;&amp;lt;%&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;cp&quot;&gt;%&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;如果在节点中有如下代码：&lt;/p&gt;

&lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;redis&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;dont_bind&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;那么就执行 &lt;code class=&quot;highlighter-rouge&quot;&gt;bind 127.0.0.1&lt;/code&gt; 这段代码&lt;/p&gt;

&lt;h4 id=&quot;食谱属性的默认值&quot;&gt;食谱属性的默认值&lt;/h4&gt;

&lt;p&gt;在食谱中可以为属性定义默认值。
这往往也是推荐的做法，大多数用户只要做少许改动就可使用&lt;/p&gt;

&lt;p&gt;属性的默认值在 &lt;code class=&quot;highlighter-rouge&quot;&gt;attributes/default.rb&lt;/code&gt; 文件中定义：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;c1&quot;&gt;# whethere to prevent redis from binding to 127.0.0.1&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;default&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:redis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:dont_bind&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;false&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;上面代码的作用是：&lt;br /&gt;
会把 &lt;code class=&quot;highlighter-rouge&quot;&gt;false&lt;/code&gt; 应用到食谱 &lt;code class=&quot;highlighter-rouge&quot;&gt;node[:redis][:dont_bind]&lt;/code&gt;，除非默认值被覆盖了&lt;/p&gt;

&lt;p&gt;关于属性的更多说明，请阅读 OpsCode 网站上的文档：&lt;br /&gt;
&lt;a href=&quot;http://docs.opscode.com/essentials_cookbook_attribute_files.html&quot;&gt;http://docs.opscode.com/essentials_cookbook_attribute_files.html&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;角色介绍&quot;&gt;角色介绍&lt;/h2&gt;

&lt;p&gt;新建角色文件&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;touch roles/redis-server.json
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;写入如下内容：&lt;/p&gt;

&lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;redis-server&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;description&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Redis server&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;default_attributes&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;redis&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;dont_bind&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;run_list&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;recipe[redis-tlq]&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;recipe[monit-tlq]&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;recipe[monit_configs-tlq::redis-server]&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;json_class&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Chef::Role&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;代码解释如下：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;name&lt;/p&gt;

    &lt;p&gt;指定角色的名称&lt;br /&gt;
当 Chef 在运行列表中见到 &lt;code class=&quot;highlighter-rouge&quot;&gt;rolo[redis-server]&lt;/code&gt; 时，就会寻找名为 redis-server 的角色。
寻找的范围是 knife.rb 中 &lt;code class=&quot;highlighter-rouge&quot;&gt;role_path&lt;/code&gt; 对应文件夹中所有的 JSON 文件&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;description&lt;/p&gt;

    &lt;p&gt;描述这个角色的作用&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;default_attributes&lt;/p&gt;

    &lt;p&gt;用来设置默认属性&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;run_list&lt;/p&gt;

    &lt;p&gt;是一个数组，Chef 会依次安装执行列出的配方和角色&lt;/p&gt;

    &lt;p&gt;角色使用如下格式：&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;role[role_name]
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;

    &lt;p&gt;配方使用如下格式：&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;recipe[cookbook_name::recipe]
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;“json_class”: “Chef::Role”&lt;/p&gt;

    &lt;p&gt;如果使用 JSON 格式，那么必须加上这一行&lt;br /&gt;
如果使用 Ruby 格式，则不用加&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;因为使用到了 2 个额外的食谱 &lt;a href=&quot;https://github.com/TalkingQuickly/monit-tlq&quot;&gt;monit-tlq&lt;/a&gt; 和 &lt;a href=&quot;https://github.com/TalkingQuickly/monit_configs-tlq&quot;&gt;monit_configs-tlq&lt;/a&gt;&lt;br /&gt;
前者用于监控系统的各种参数，如果进程崩溃或者超出了预设的参数，Monit 会重启该进程&lt;br /&gt;
后者是针对系统组件的 Monit 设置&lt;/p&gt;

&lt;p&gt;所以我们需要在仓库根目录的 &lt;code class=&quot;highlighter-rouge&quot;&gt;Berksfile&lt;/code&gt; 文件中加入如下内容：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;n&quot;&gt;cookbook&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;monit-tlq&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;github: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;TalkingQuickly/monit-tlq&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;branch: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;master&#39;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;cookbook&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;monit_configs-tlq&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;github: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;TalkingQuickly/monit_configs-tlq&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;branch: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;master&#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h2 id=&quot;配置远程服务器&quot;&gt;配置远程服务器&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;把公钥复制到远程服务器&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;ssh-copy-id root@yourserverip
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;在远程服务器上安装 Chef, 在本地仓库根目录执行如下命令：&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;bundle exec knife solo prepare root@yourserverip
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;

    &lt;p&gt;若使用 Vagrant 可以用 &lt;code class=&quot;highlighter-rouge&quot;&gt;vagrant ssh-config&lt;/code&gt; 命令查看 ssh 配置，然后执行如下类似命令：&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;bundle exec knife solo prepare vagrant@127.0.0.1 -p 2222 -i /Users/mwum/.vagrant.d/insecure_private_key
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;

    &lt;p&gt;安装时间稍长，耐心等待吧&lt;/p&gt;

    &lt;p&gt;上述命令的作用如下：&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;在 nodes 文件夹中新建文件 yourserverip.json&lt;/li&gt;
      &lt;li&gt;通过 SSH 登入远程服务器&lt;/li&gt;
      &lt;li&gt;检测操作系统的类型&lt;/li&gt;
      &lt;li&gt;安装相应的 Chef 版本&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;可能会遇到的问题&quot;&gt;可能会遇到的问题&lt;/h3&gt;

&lt;p&gt;如果不确定是什么问题，可以在安装 Chef 的命令加上 &lt;code class=&quot;highlighter-rouge&quot;&gt;-VV&lt;/code&gt; 选项来查看 DEBUG 信息&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;远程服务器的网络有问题，需要设置代理&lt;/p&gt;

    &lt;ol&gt;
      &lt;li&gt;
        &lt;p&gt;用 ssh 登录远程服务器&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;在 ~/.bashrc 中加入如下内容：&lt;/p&gt;

        &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;http_proxy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;http://your-proxy.company.org:80&quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;https_proxy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;http://your-proxy.company.org:80&quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;HTTP_PROXY&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;http://your-proxy.company.org:80&quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;HTTPS_PROXY&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;http://your-proxy.company.org:80&quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
        &lt;/div&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;退出远程服务器，重新安装 Chef&lt;/p&gt;
      &lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;应用配方&quot;&gt;应用配方&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;配置节点文件 &lt;code class=&quot;highlighter-rouge&quot;&gt;nodes/yourserverip.json&lt;/code&gt;, 加入如下内容：&lt;/p&gt;

    &lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;redis&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;dont_bind&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;run_list&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;role[redis-server]&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;

    &lt;p&gt;代码上半段是属性定义，&lt;code class=&quot;highlighter-rouge&quot;&gt;run_list&lt;/code&gt; 的作用和角色文件中的一样&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;应用配方，在仓库根目录下执行如下命令：&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;bundle exec knife solo cook root@yourserverip
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;

    &lt;p&gt;这个命令的作用如下：&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;根据 Berksfile 文件通过 Berkshelf 下载食谱（相当于此命令 `berks vendor cookbookss/）&lt;/li&gt;
      &lt;li&gt;通过 SSH 登入远程服务器&lt;/li&gt;
      &lt;li&gt;把本地的配方文件复制到远程服务器&lt;/li&gt;
      &lt;li&gt;应用配方，并显示输出结果&lt;/li&gt;
    &lt;/ul&gt;

    &lt;p&gt;如果要经常重用某个节点定义，可以将其另存为，例如 nodes/side_project_server.json, 然后执行如下命令：&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;bundle exec knife solo cook root@yourserverip nodes/side_project_server.json
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;hr /&gt;

&lt;p&gt;参考图书：&lt;br /&gt;
《&lt;a href=&quot;https://leanpub.com/deploying_rails_applications-cn&quot;&gt;Rails 程序部署之道&lt;/a&gt;》&lt;/p&gt;
</description>
        <pubDate>Tue, 23 Sep 2014 00:00:00 +0800</pubDate>
        
        <lastBuildDate>Mon, 06 Oct 2014 01:18:13 +0800</lastBuildDate>
        
        <link>http://www.dreamxu.com/chef-basic-flow/</link>
        <guid isPermaLink="true">http://www.dreamxu.com/chef-basic-flow/</guid>
        
        <category>记录</category>
        
        <category>Chef</category>
        
        <category>chef-solo</category>
        
        <category>knife-solo</category>
        
        <category>Berkshelf</category>
        
      </item>
    
      <item>
        <title>在 Mac 上用 rbenv 安装 ruby</title>
        <description>&lt;h2 id=&quot;安装-rbenv&quot;&gt;安装 rbenv&lt;/h2&gt;

&lt;p&gt;项目主页：&lt;a href=&quot;https://github.com/sstephenson/rbenv&quot;&gt;https://github.com/sstephenson/rbenv&lt;/a&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;需要安装 Xcode 和 Command Line Tools&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;使用 git 将 rbenv 源码 clone 到本地&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;git clone https://github.com/sstephenson/rbenv.git ~/.rbenv
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;将 &lt;code class=&quot;highlighter-rouge&quot;&gt;~/.rbenv/bin&lt;/code&gt; 添加到环境变量&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;echo &#39;export PATH=&quot;$HOME/.rbenv/bin:$PATH&quot;&#39; &amp;gt;&amp;gt; ~/.zshrc
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Add &lt;code class=&quot;highlighter-rouge&quot;&gt;rbenv init&lt;/code&gt; to your shell to enable shims and autocompletion&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;echo &#39;eval &quot;$(rbenv init -)&quot;&#39; &amp;gt;&amp;gt; ~/.zshrc
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;重启 shell, 并测试 rbenv 是否设置正常&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;exec $SHELL
type rbenv
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;安装 ruby-build, 用来安装和编译 Ruby 源码&lt;br /&gt;
作为 rbenv 的插件来安装&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;git clone https://github.com/sstephenson/ruby-build.git ~/.rbenv/plugins/ruby-build
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;一些好用的-rbenv-插件&quot;&gt;一些好用的 rbenv 插件&lt;/h3&gt;

&lt;h4 id=&quot;rbenv-update&quot;&gt;rbenv-update&lt;/h4&gt;

&lt;p&gt;项目主页：&lt;a href=&quot;https://github.com/rkh/rbenv-update&quot;&gt;https://github.com/rkh/rbenv-update&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;安装&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;git clone https://github.com/rkh/rbenv-update.git ~/.rbenv/plugins/rbenv-update
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;使用 &lt;code class=&quot;highlighter-rouge&quot;&gt;rbenv update&lt;/code&gt; 命令来更新 rbenv 以及所有插件&lt;/p&gt;

&lt;h4 id=&quot;rbenv-gem-rehash&quot;&gt;rbenv-gem-rehash&lt;/h4&gt;

&lt;p&gt;项目主页：&lt;a href=&quot;https://github.com/sstephenson/rbenv-gem-rehash&quot;&gt;https://github.com/sstephenson/rbenv-gem-rehash&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;不需要再手动执行 &lt;code class=&quot;highlighter-rouge&quot;&gt;rbenv rehash&lt;/code&gt; 命令，它会自动执行&lt;/p&gt;

&lt;p&gt;安装&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;git clone https://github.com/sstephenson/rbenv-gem-rehash.git ~/.rbenv/plugins/rbenv-gem-rehash
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h2 id=&quot;安装-ruby&quot;&gt;安装 Ruby&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;列出可用的 Ruby 版本&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;rbenv install -l
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;安装 Ruby 2.1.2&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;rbenv install 2.1.2
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;列出已安装的 Ruby 版本，其中 &lt;code class=&quot;highlighter-rouge&quot;&gt;*&lt;/code&gt; 号开头的是正在使用的版本&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;rbenv versions
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;

    &lt;p&gt;列出正在使用的版本&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;rbenv version
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;设置版本&lt;br /&gt;
优先级依次增加&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;
        &lt;p&gt;全局成效&lt;br /&gt;
&lt;code class=&quot;highlighter-rouge&quot;&gt;~/.rbenv/version&lt;/code&gt; 文件指明了 Ruby 的版本&lt;/p&gt;

        &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;rbenv global 2.1.2
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
        &lt;/div&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;对该目录生效&lt;br /&gt;
在当前目录生成 &lt;code class=&quot;highlighter-rouge&quot;&gt;.ruby-version&lt;/code&gt; 文件，指明了 Ruby 的版本&lt;/p&gt;

        &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;rbenv local 2.1.2
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
        &lt;/div&gt;

        &lt;p&gt;取消设置&lt;/p&gt;

        &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;rbenv local --unset
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
        &lt;/div&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;对当前 shell 生效&lt;br /&gt;
&lt;code class=&quot;highlighter-rouge&quot;&gt;RBENV_VERSIO&lt;/code&gt; 环境变量指明了 Ruby 的版本&lt;/p&gt;

        &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;rbenv shell 2.1.2
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
        &lt;/div&gt;

        &lt;p&gt;权限设置&lt;/p&gt;

        &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;rbenv shell --unset
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
        &lt;/div&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;告诉 Rubygems 安装软件包的时候不安装文档&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;echo &quot;gem: --no-ri --no-rdoc&quot; &amp;gt; ~/.gemrc
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;管理-ruby&quot;&gt;管理 Ruby&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;更新 rbenv&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;cd ~/.rbenv
git pull
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;为了让 rbenv 知道 Ruby 的所有可执行文件&lt;br /&gt;
每次安装新版本的 Ruby 和安装一个 gem 后，请执行下面的命令&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;rbenv rehash
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;列出 irb 这个命令的完整路径&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;rbenv which irb
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;

    &lt;p&gt;列出包含 irb 这个命令的版本&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;rbenv whence irb
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;卸载 Ruby&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;
        &lt;p&gt;直接用用 &lt;code class=&quot;highlighter-rouge&quot;&gt;rm -rf&lt;/code&gt; 命令删除 &lt;code class=&quot;highlighter-rouge&quot;&gt;~/.rbenv/versions&lt;/code&gt; 文件夹下对应的 Ruby 版本即可&lt;br /&gt;
可用 &lt;code class=&quot;highlighter-rouge&quot;&gt;rbenv prefix&lt;/code&gt; 命令查看对应 Ruby 版主的目录&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;如果安装了 ruby-build 插件，那么使用如下命令即可&lt;/p&gt;

        &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;rbenv uninstall 2.1.2
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
        &lt;/div&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;
</description>
        <pubDate>Thu, 11 Sep 2014 00:00:00 +0800</pubDate>
        
        <link>http://www.dreamxu.com/install-ruby-on-mac-with-rbenv/</link>
        <guid isPermaLink="true">http://www.dreamxu.com/install-ruby-on-mac-with-rbenv/</guid>
        
        <category>记录</category>
        
        <category>Ruby</category>
        
        <category>rbenv</category>
        
        <category>Mac</category>
        
      </item>
    
      <item>
        <title>用 Vagrant 统一开发环境</title>
        <description>&lt;h2 id=&quot;why-vagrant&quot;&gt;WHY VAGRANT?&lt;/h2&gt;

&lt;blockquote&gt;
  &lt;p&gt;Vagrant provides easy to configure, reproducible, and portable work environments built 
on top of industry-standard technology and 
controlled by a single consistent workflow to help maximize the productivity and 
flexibility of you and your team.&lt;/p&gt;

  &lt;p&gt;To achieve its magic, Vagrant stands on the shoulders of giants. 
Machines are provisioned on top of VirtualBox, VMware, AWS, or any other provider. 
Then, industry-standard provisioning tools such as shell scripts, Chef, or Puppet, 
can be used to automatically install and configure software on the machine.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;——以上内容摘自官网&lt;/p&gt;

&lt;p&gt;因其是使用虚拟机的，所以虚拟机的好处全部都有，你可以随便折腾，弄得不爽了可以马上复原，真的是很方便。
也简化了操作虚拟机的步骤，一条命令即可创建一个虚拟系统，即开即用&lt;/p&gt;

&lt;h2 id=&quot;安装&quot;&gt;安装&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;下载并安装 &lt;a href=&quot;https://www.virtualbox.org/&quot;&gt;VirtualBox&lt;/a&gt; 虚拟机&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;下载并安装 &lt;a href=&quot;http://www.vagrantup.com/&quot;&gt;Vagrant&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;添加-box&quot;&gt;添加 Box&lt;/h2&gt;

&lt;p&gt;Box 理解为一个打包好的操作系统环境就好了&lt;br /&gt;
可以自己做，也可以直接下载制作好的&lt;br /&gt;
Vargrant 将 box 解包后放在 /.vagrant.d/boxes 文件夹&lt;/p&gt;

&lt;h3 id=&quot;通过命令直接下载&quot;&gt;通过命令直接下载&lt;/h3&gt;

&lt;p&gt;例如下载 Ubuntu 官方创建的 Ubuntu Server 64-bit 14.04 的 box&lt;br /&gt;
其中的 &lt;code class=&quot;highlighter-rouge&quot;&gt;Ubuntu_Server_14.04&lt;/code&gt; 是自己设定的 box 名字&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;vagrant box add Ubuntu_Server_14.04 ubuntu/trusty64
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;Box 可以去 &lt;a href=&quot;https://vagrantcloud.com/&quot;&gt;Vagrant Cloud&lt;/a&gt; 找&lt;/p&gt;

&lt;h3 id=&quot;手动下载-box&quot;&gt;手动下载 box&lt;/h3&gt;

&lt;p&gt;例如下载 Ubuntu 的 &lt;a href=&quot;http://cloud-images.ubuntu.com/vagrant/&quot;&gt;box&lt;/a&gt;, 下载完成之后添加一下 box&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;vagrant box add Ubuntu_Server_14.04 ~/Inbox/trusty-server-cloudimg-amd64-vagrant-disk1.box
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h3 id=&quot;自己制作-base-box&quot;&gt;自己制作 base box&lt;/h3&gt;

&lt;p&gt;第一次使用 Vagrant 建议跳过这一步骤，&lt;a href=&quot;#初始化和配置&quot;&gt;到下一步&lt;/a&gt;，
直接使用制作好的 base box, 体会了 Vagrant 之后再来自己制作 base box&lt;/p&gt;

&lt;p&gt;人家制作好的 box 或许没有你需要的，那么就需要自己来制作了&lt;/p&gt;

&lt;h4 id=&quot;使用-veewee-工具创建（虚拟机为-parallels）&quot;&gt;使用 Veewee 工具创建（虚拟机为 Parallels）&lt;/h4&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;安装好 Ruby 之后，用如下命令安装 Veewee&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;gem install veewee
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;查看支持的模板&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;veewee parallels templates
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;（未完成，博主还没有实践，或许以后会补全）&lt;/p&gt;

&lt;h4 id=&quot;手动创建（虚拟机为-parallels）&quot;&gt;手动创建（虚拟机为 Parallels）&lt;/h4&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;在 Parallels 中新建一个虚拟机，比如名字为 Ubuntu-14.04.2-vagrant&lt;br /&gt;
把不需要的功能都关闭了，比如共享应用什么的，硬件配置自己选择合适的&lt;/p&gt;

    &lt;p&gt;以下是推荐系统设置&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;Root Password: vagrant
Main account login: vagrant
Main account password: vagrant
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;安装一些必要的软件，例如 Parallels Tools, SSH&lt;/p&gt;

    &lt;p&gt;以下是安装 SSH 的方法&lt;/p&gt;

    &lt;ol&gt;
      &lt;li&gt;
        &lt;p&gt;先去 &lt;a href=&quot;https://github.com/mitchellh/vagrant/blob/master/keys/vagrant.pub&quot;&gt;insecure keypair&lt;/a&gt; 
下载 Vagrant 的公钥，名为 vagrant.pub&lt;/p&gt;

        &lt;p&gt;或者使用命令&lt;/p&gt;

        &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;wget https://raw.githubusercontent.com/mitchellh/vagrant/master/keys/vagrant.pub
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
        &lt;/div&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;安装 SSH 服务&lt;/p&gt;

        &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo apt-get update
sudo apt-get install openssh-server
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
        &lt;/div&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;添加 Vagrant 的公钥&lt;/p&gt;

        &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;mkdir ~/.ssh
chmod 700 ~/.ssh
touch ~/.ssh/authorized_keys
chmod 600 ~/.ssh/authorized_keys
cat vagrant.pub &amp;gt;&amp;gt; ~/.ssh/authorized_keys
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
        &lt;/div&gt;
      &lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;安装一些基本的软件，例如 git, vim, zsh, oh-my-zsh 等&lt;/p&gt;

    &lt;p&gt;安装完软件之后清理一下软件包&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo apt-get clean
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;让 Vagrant 用户使用 sudo 时不需要输入密码（必须，要不然一些 Vagrant 的功能无法实现）&lt;/p&gt;

    &lt;p&gt;先输入命令 &lt;code class=&quot;highlighter-rouge&quot;&gt;sudo visudo&lt;/code&gt;, 然后在末尾添加一行，内容如下&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;vagrant ALL=(ALL) NOPASSWD: ALL
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;关闭虚拟机&lt;br /&gt;
进入虚拟机目录，例如：~/Documents/Parallels/Ubuntu-14.04.2-vagrant.pvm, 
可看到一些文件和文件夹，其中需要的是以下 3 个文件和文件夹，其它的可删除&lt;/p&gt;

    &lt;p&gt;VmInfo.pvi&lt;br /&gt;
config.pvs&lt;br /&gt;
*.hdd&lt;/p&gt;

    &lt;p&gt;可对虚拟磁盘进行优化，减少大小&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;prl_disk_tool compact --hdd *.hdd
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;打包成 base box&lt;br /&gt;
还需要 Vagrantfile 和 metadata.json 文件，
Vagrantfile 文件内容可为空，metadata.json 可如下所示&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;provider&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;parallels&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;

    &lt;p&gt;然后进行打包&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;tar cvzf Ubuntu-14.04.2-parallels.box ./Ubuntu-14.04.2-vagrant.pvm ./Vagrantfile ./metadata.json
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;做好了 base box 自己得测试一下&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;hr /&gt;
&lt;p&gt;参考资料：&lt;br /&gt;
&lt;a href=&quot;http://docs.vagrantup.com/v2/boxes/base.html&quot;&gt;CREATING A BASE BOX | Vagrant&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://parallels.github.io/vagrant-parallels/docs/boxes/base.html&quot;&gt;Creating a Base Box | Parallels&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;初始化和配置&quot;&gt;初始化和配置&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;建立一个 Vagrant 项目目录&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;mkdir ~/Vagrant
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;初始化一个项目&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;cd ~/Vagrant
mkdir Ubuntu_Server_14.04
cd Ubuntu_Server_14.04
vagrant box list    # 列出现有的 box
vagrant init Ubuntu_Server_14.04
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;

    &lt;p&gt;会在当前目录下生成一个 &lt;code class=&quot;highlighter-rouge&quot;&gt;Vagrantfile&lt;/code&gt; 文件，用于描述你的项目（虚拟机的网络连接方式，同步文件夹等）&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;vagrantfile-配置文件&quot;&gt;Vagrantfile 配置文件&lt;/h3&gt;

&lt;p&gt;配置文件是用 Ruby 写的，不过都是一些常用的赋值&lt;/p&gt;

&lt;p&gt;文件内部的解释非常清晰，就不班门弄斧了&lt;/p&gt;

&lt;p&gt;对于 Parallels 虚拟机可进行如下配置：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;c1&quot;&gt;# 设置端口转发，将主机的 8081 端口转发到虚拟机的 80 端口，在开发 Web 应用的时候非常有用&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;vm&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;network&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;forwarded_port&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;guest: &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;80&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;host: &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;8081&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# 将主机的 /Users/mwum/Code 文件夹共享到虚拟机的 /home/vagrant/Code 文件夹&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;vm&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;synced_folder&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;/Users/mwum/Code&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;/home/vagrant/Code&quot;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;vm&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;provider&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;parallels&quot;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# Virtual Machine Name&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Ubuntu-14.04-parallels&quot;&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# Parallels Tools Auto-Update&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;update_guest_tools&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# Memory&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# v.memory = 1024&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h4 id=&quot;默认共享目录&quot;&gt;默认共享目录&lt;/h4&gt;

&lt;p&gt;默认主机的项目目录和虚拟机中的 /vagrant 目录是共享的&lt;/p&gt;

&lt;h2 id=&quot;使用&quot;&gt;使用&lt;/h2&gt;

&lt;p&gt;以下命令在项目目录中执行&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;vagrant up&lt;/code&gt; - 启动虚拟机，如果一个项目第一次执行，它会初始化一个虚拟机&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;vagrant ssh&lt;/code&gt; - 连接虚拟机&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;vagrant halt&lt;/code&gt; - 关闭虚拟机，普通的关机&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;vagrant suspend&lt;/code&gt; - 关闭虚拟机，类似休眠&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;vagrant reload&lt;/code&gt; - 重启虚拟机&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;vagrant destroy&lt;/code&gt; - 删除虚拟机，虚拟机没了但是 box 还在&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;更多命令请看《&lt;a href=&quot;http://docs.vagrantup.com/v2/cli/index.html&quot;&gt;官方文档 - COMMAND-LINE INTERFACE&lt;/a&gt;》&lt;/p&gt;

&lt;h2 id=&quot;打包成-box&quot;&gt;打包成 box&lt;/h2&gt;

&lt;p&gt;当你自定义了开发环境之后，在项目目录执行命令&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;vagrant package
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;在此目录会生成一个 &lt;code class=&quot;highlighter-rouge&quot;&gt;package.box&lt;/code&gt; 文件，将这个 box 给其它开发人员，就能保证你们的开发环境相同了&lt;/p&gt;

&lt;p&gt;或者使用命令 &lt;code class=&quot;highlighter-rouge&quot;&gt;vagrant package -h&lt;/code&gt; 查看更详尽的用法，例如使用&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;vagrant package --include readme.txt --vagrantfile Vagrantfile
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;但是发现个问题，下次使用 &lt;code class=&quot;highlighter-rouge&quot;&gt;vagrant box add&lt;/code&gt; 和 &lt;code class=&quot;highlighter-rouge&quot;&gt;vagrant init&lt;/code&gt; 添加和初始化好这个 box 之后，
然后使用 &lt;code class=&quot;highlighter-rouge&quot;&gt;vagrant up&lt;/code&gt; 会出现警告大致是说 &lt;code class=&quot;highlighter-rouge&quot;&gt;.vagrant.d/boxes/boxname/0/virtualbox/include/_Vagrantfile:5: warning: already initialized constant VAGRANTFILE_API_VERSION&lt;/code&gt;, 
出现这个问题的原因呢就是项目的当前目录有个 Vagrantfile, 并且我们用上面的命令把 Vagrantfile 也添加到了 box 中&lt;br /&gt;
解决的办法就是，如果要用 box 中的 Vagrantfile 那么把 &lt;code class=&quot;highlighter-rouge&quot;&gt;.vagrant.d/boxes/boxname/0/virtualbox/include/_Vagrantfile&lt;/code&gt; 
文件重命名为 &lt;code class=&quot;highlighter-rouge&quot;&gt;Vagrantfile&lt;/code&gt; 并覆盖项目目录中的 Vagrantfile; 如果不用它，那么将其删除&lt;/p&gt;

&lt;h2 id=&quot;自动化&quot;&gt;自动化&lt;/h2&gt;

&lt;p&gt;若想统一开发环境和生产环境也是可以的，将虚拟机系统环境配置成相同的环境即可&lt;/p&gt;

&lt;p&gt;若想让两个环境完全一样，并实现自动化配置，可以尝试 
&lt;a href=&quot;/chef-basic-flow/&quot;&gt;Chef&lt;/a&gt; 或 &lt;a href=&quot;http://puppetlabs.com/&quot;&gt;Puppet&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;心得&quot;&gt;心得&lt;/h2&gt;

&lt;p&gt;使用一段时间这个环境之后：Mac + VirtualBox + Vagrant&lt;br /&gt;
有个问题，使用 Public Networks 网络方式的时候，与外网的连接不是很好&lt;/p&gt;

&lt;p&gt;而且我还用着 Parallels 虚拟机，于是尝试了 &lt;a href=&quot;https://github.com/Parallels/vagrant-parallels&quot;&gt;vagrant-parallels&lt;/a&gt; 插件，使之能用 Vagrant 来管理 Parallels 虚拟机&lt;br /&gt;
官方文档：&lt;a href=&quot;http://parallels.github.io/vagrant-parallels/docs/&quot;&gt;http://parallels.github.io/vagrant-parallels/docs/&lt;/a&gt;&lt;br /&gt;
当使用 Vagrant 启动 Parallels 虚拟机的时候，会出现 Gui 窗口，为了关闭这个窗口可以按如下操作：&lt;br /&gt;
执行 &lt;code class=&quot;highlighter-rouge&quot;&gt;prlctl set &amp;lt;name&amp;gt; --on-window-close keep-running&lt;/code&gt; 命令之后，即使把窗口关了，虚拟机也在后台运行&lt;/p&gt;

&lt;p&gt;使用了一段时间，在 VirtualBox 中的问题没有遇到过，也没有遇到其它问题。
而且 Parallels 虚拟机的性能比 VirtualBox 虚拟机要好&lt;/p&gt;

</description>
        <pubDate>Sat, 06 Sep 2014 00:00:00 +0800</pubDate>
        
        <lastBuildDate>Mon, 09 Mar 2015 22:14:30 +0800</lastBuildDate>
        
        <link>http://www.dreamxu.com/vagrant/</link>
        <guid isPermaLink="true">http://www.dreamxu.com/vagrant/</guid>
        
        <category>记录</category>
        
        <category>Vagrant</category>
        
        <category>VirtualBox</category>
        
        <category>Parallels</category>
        
      </item>
    
      <item>
        <title>Ubuntu 软件包管理工具 dpkg, APT 的一些命令</title>
        <description>&lt;h2 id=&quot;dpkg&quot;&gt;dpkg&lt;/h2&gt;

&lt;p&gt;dpkg 是由 Debian 开发的包管理系统，是一个比较底层的工具，它的最常见的前端是 APT&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;常用的命令&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;dpkg -i debFileName&lt;/code&gt; - 安装一个 deb 的包&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;dpkg -I debFileName&lt;/code&gt; - 查看一个包的信息&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;dpkg -r packageName&lt;/code&gt; - 删除包（保留配置文件）&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;dpkg -P packageName&lt;/code&gt; - 彻底删除包（包括配置文件等）&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;dpkg -l [packageName]&lt;/code&gt; - 查看己安装包，常与 &lt;code class=&quot;highlighter-rouge&quot;&gt;grep&lt;/code&gt; 搭配使用&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;dpkg -L packageName&lt;/code&gt; - 查看包所拥有的文件&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;下载某个工具的源代码，例如 &lt;code class=&quot;highlighter-rouge&quot;&gt;top&lt;/code&gt;&lt;/p&gt;

    &lt;ol&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;dpkg -S $(which top)&lt;/code&gt; 或者 &lt;code class=&quot;highlighter-rouge&quot;&gt;dpkg -S $(whereis top)&lt;/code&gt; - 查看文件所属的包&lt;br /&gt;
procps: /usr/bin/top&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;apt-get source -d procps&lt;/code&gt; - 获取这个包的源码，不解包，之后你需要自己解包&lt;br /&gt;
&lt;code class=&quot;highlighter-rouge&quot;&gt;dpkg-source -x foo_version-revision.dsc&lt;/code&gt; 或者&lt;br /&gt;
&lt;code class=&quot;highlighter-rouge&quot;&gt;apt-get source procps&lt;/code&gt; - 获取源码并解包&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;apt&quot;&gt;APT&lt;/h2&gt;

&lt;p&gt;在 Debian 类系统中作为 dpkg 的前端，可以自动下载，配置，安装软件包，还能解决包的依赖关系&lt;/p&gt;

&lt;p&gt;APT 的软件源地址在 &lt;code class=&quot;highlighter-rouge&quot;&gt;/etc/apt/sources.list&lt;/code&gt;&lt;br /&gt;
还可以在 &lt;code class=&quot;highlighter-rouge&quot;&gt;/etc/apt/sources.list.d&lt;/code&gt; 目录中添加更多源&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;一些参数&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;-h&lt;/code&gt; - 帮助&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;-q&lt;/code&gt; - 输出到日志，无提示&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;-qq&lt;/code&gt; - 什么都不输出，错误除外&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;-d&lt;/code&gt; - 不安装或解压归档文件&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;-s&lt;/code&gt; - 不实际安装，只模拟执行命令&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;-y&lt;/code&gt; - 所有的询问选是，不提示&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;-f&lt;/code&gt; - 当没有通过完整性测试时，仍然尝试继续执行&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;-m&lt;/code&gt; - 当有包归档无法找到时，仍然尝试继续执行&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;-u&lt;/code&gt; - 同时显示更新软件包的列表&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;-b&lt;/code&gt; - 获取源码包后编译&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;-V&lt;/code&gt; - 显示详细的版本号&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;-c=?&lt;/code&gt; - 读取指定的配置&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;-o=?&lt;/code&gt; - 设定任意指定的配置选项，例如 -o dir::cache=/tmp&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;更新/升级&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;apt-get update&lt;/code&gt; - 更新软件源索引&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;apt-get upgrade&lt;/code&gt; - 升级所有软件包，并重新分析依赖关系并安装相关的包&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;apt-get dselect-upgrade&lt;/code&gt; - 根据 dselect（一个传统的前端包管理工具）的选择对软件包进行升级&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;apt-get dist-upgrade&lt;/code&gt; - 升级系统及所有软件包，&lt;strong&gt;慎用&lt;/strong&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;安装/卸载&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;apt-get install pkg&lt;/code&gt; - 安装软件包&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;apt-get build-dep pkg&lt;/code&gt; - 安装该包的所有依赖&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;apt-get remove pkg&lt;/code&gt; - 卸载软件包&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;apt-get purge pkg&lt;/code&gt; - 彻底卸载软件包（包括配置文件等）&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;apt-get remove --purge pkg&lt;/code&gt; - 和上面的命令等价，彻底卸载软件包（包括配置文件等）&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;apt-get autoremove&lt;/code&gt; - 清理因依赖关系而被安装，而后又不需要的包&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;清理/维护&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;apt-get clean&lt;/code&gt; - 清除下载的包&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;apt-get autoclean&lt;/code&gt; - 只清除过时的包&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;apt-get check&lt;/code&gt; - 检查是否有不正确的依赖关系&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;搜索/下载&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;apt-cache search pkg&lt;/code&gt; - 搜索包&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;apt-cache show pkg&lt;/code&gt; - 显示包的信息&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;apt-cache showpkg pkg&lt;/code&gt; - 显示包的信息&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;apt-cache depends pkg&lt;/code&gt; - 显示包所依赖的包&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;apt-cache rdepends pkg&lt;/code&gt; - 显示该包被哪项包依赖&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;apt-cache stats&lt;/code&gt; - 显示统计信息&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;apt-get download pkg&lt;/code&gt; - 下载软件包&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;apt-get source pkg&lt;/code&gt; - 下载源码包并解包&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;apt-get source -d pkg&lt;/code&gt; 只下载源码包&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;彩蛋&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;apt-get moo&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;
</description>
        <pubDate>Thu, 04 Sep 2014 00:00:00 +0800</pubDate>
        
        <link>http://www.dreamxu.com/ubuntu-package-dpkg-and-apt-commands/</link>
        <guid isPermaLink="true">http://www.dreamxu.com/ubuntu-package-dpkg-and-apt-commands/</guid>
        
        <category>记录</category>
        
        <category>Ubuntu</category>
        
        <category>dpkg</category>
        
        <category>APT</category>
        
      </item>
    
      <item>
        <title>Mac 下安装及配置 ProxyChains-NG 实现终端下代理</title>
        <description>&lt;p&gt;项目主页：&lt;a href=&quot;https://github.com/rofl0r/proxychains-ng&quot;&gt;https://github.com/rofl0r/proxychains-ng&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;官方说明：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;proxychains ng (new generation) - 
  a preloader which hooks calls to sockets in dynamically linked programs and redirects it through one or more socks/http proxies. 
  continuation of the unmaintained proxychains project.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;安装&quot;&gt;安装&lt;/h2&gt;

&lt;p&gt;使用 Homebrew 安装&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;brew install proxychains-ng
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h2 id=&quot;配置&quot;&gt;配置&lt;/h2&gt;

&lt;p&gt;编辑配置文件 &lt;code class=&quot;highlighter-rouge&quot;&gt;mvim /usr/local/etc/proxychains.conf&lt;/code&gt;&lt;br /&gt;
在 [ProxyList] 下面（也就是末尾）加入代理类型，代理地址和端口&lt;br /&gt;
例如使用 TOR 代理，注释掉原来的代理并添加&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;socks5  127.0.0.1 9050
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;如果所在的网络很复杂，可能需要在配置文件中启用&lt;br /&gt;
&lt;code class=&quot;highlighter-rouge&quot;&gt;dynamic_chain&lt;/code&gt; - 按照列表中出现的代理服务器的先后顺序组成一条链，如果有代理服务器失效，则自动将其排除，但至少要有一个是有效的&lt;br /&gt;
然后在 [ProxyList] 下添加多个代理&lt;/p&gt;

&lt;p&gt;默认是：&lt;br /&gt;
&lt;code class=&quot;highlighter-rouge&quot;&gt;strict_chain&lt;/code&gt; - 按照后面列表中出现的代理服务器的先后顺序组成一条链，要求所有的代理服务器都是有效的&lt;/p&gt;

&lt;h2 id=&quot;使用&quot;&gt;使用&lt;/h2&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;proxychains4 curl twitter.com
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;配合 wget 和 curl 来下载，非常好用&lt;/p&gt;
</description>
        <pubDate>Wed, 27 Aug 2014 00:00:00 +0800</pubDate>
        
        <link>http://www.dreamxu.com/proxychains-ng/</link>
        <guid isPermaLink="true">http://www.dreamxu.com/proxychains-ng/</guid>
        
        <category>记录</category>
        
        <category>ProxyChains-NG</category>
        
        <category>ProxyChains</category>
        
      </item>
    
      <item>
        <title>安装及配置 Mac 上的 Rime 输入法——鼠鬚管 (Squirrel)</title>
        <description>&lt;blockquote&gt;
  &lt;p&gt;奉送原甫侍讀出守永興&lt;br /&gt;
嘉祐五年&lt;br /&gt;
歐陽修&lt;/p&gt;

  &lt;p&gt;酌君以荊州魚枕之蕉&lt;br /&gt;
贈君以宣城鼠鬚之管&lt;br /&gt;
酒如長虹飲滄海&lt;br /&gt;
筆若駿馬馳平坂&lt;br /&gt;
受君尚少力方豪&lt;br /&gt;
嗟我久衰歡漸鮮&lt;br /&gt;
文章驚世知名早&lt;br /&gt;
意氣論交相得晩&lt;br /&gt;
魚枕蕉&lt;br /&gt;
一舉十分當覆盞&lt;br /&gt;
鼠鬚管&lt;br /&gt;
爲物雖微情不淺&lt;br /&gt;
新詩醉墨時一揮&lt;br /&gt;
別後寄我無辭遠&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;这首诗应该就是「鼠须管」的出处吧&lt;/p&gt;

&lt;p&gt;奉上一张用「小鹤双拼·语句流」输入的效果，中英混输 + Emoji 表情哦&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/posts/2014-06-12_230341.gif&quot; alt=&quot;Rime输入法演示&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;安装&quot;&gt;安装&lt;/h2&gt;

&lt;p&gt;就一条理由就可以使我弃用使用 N 多年的其它输入法&lt;br /&gt;
1. &lt;a href=&quot;https://github.com/lotem/squirrel&quot;&gt;https://github.com/lotem/squirrel&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Rime 官网：&lt;a href=&quot;http://rime.im/&quot;&gt;http://rime.im/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;可以去官网下载或者使用 Homebrew Cask 来安装（截至到今天版本非最新）&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;brew cask install squirrel
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;刚安装好，拼音输入是繁体的，按组合键 &lt;code class=&quot;highlighter-rouge&quot;&gt;Ctrl+`&lt;/code&gt; 呼出输入法方案选单（如下），切换为「汉字」就可以输入简体了&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/posts/2014-06-09_212556.png&quot; alt=&quot;输入法方案选单&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;配置&quot;&gt;配置&lt;/h2&gt;

&lt;p&gt;自行查看《&lt;a href=&quot;https://github.com/rime/home/wiki/CustomizationGuide&quot;&gt;Rime 定製指南 | GitHub&lt;/a&gt;》&lt;/p&gt;

&lt;p&gt;以下是我对官网说明书的一些摘录，加上我的一些修改，只限于对拼音输入的理解&lt;br /&gt;
如果你用的是小鹤双拼，可以直接看下文《&lt;a href=&quot;#详细配置「小鹤双拼·语句流」&quot;&gt;详细配置「小鹤双拼·语句流」&lt;/a&gt;》，介绍的是「小鹤双拼·语句流」的配置。
语句流和普通的输入方式在配置上只有一条配置语句的不同，如果不喜欢语句流这种方式，改成普通的也非常简单，下文有介绍。
BTW, 现在我自己都不使用「语句流」这种方式了&lt;/p&gt;

&lt;h3 id=&quot;数据文件位置&quot;&gt;数据文件位置&lt;/h3&gt;

&lt;p&gt;共享资料夹：”/Library/Input Methods/Squirrel.app/Contents/SharedSupport/”&lt;br /&gt;
用户资料夹：”~/Library/Rime/”&lt;/p&gt;

&lt;h3 id=&quot;用户资料夹内的文件说明如下&quot;&gt;用户资料夹内的文件说明如下&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;〔全局设定〕 default.yaml&lt;/li&gt;
  &lt;li&gt;〔发行版设定〕 weasel.yaml&lt;/li&gt;
  &lt;li&gt;〔预设输入方案副本〕 &amp;lt;方案标识&amp;gt;.schema.yaml&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;※〔安装信息〕 installation.yaml&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;※〔用户状态信息〕 user.yaml&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;编译输入方案所产生的二进制文件：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;〔Rime 棱镜〕 &amp;lt;方案标识&amp;gt;.prism.bin&lt;/li&gt;
  &lt;li&gt;〔Rime 固态词典〕 &amp;lt;词典名&amp;gt;.table.bin&lt;/li&gt;
  &lt;li&gt;〔Rime 反查词典〕 &amp;lt;词典名&amp;gt;.reverse.bin&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;记录用户写作习惯的文件：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;※〔用户词典〕 &amp;lt;词典名&amp;gt;.userdb.kct&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;※〔用户词典快照〕 &amp;lt;词典名&amp;gt;.userdb.txt、&amp;lt;词典名&amp;gt;.userdb.kct.snapshot 见于同步文件夾&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;以及用户自己设定的：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;※〔用户对全局设定的定制信息〕 default.custom.yaml&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;※〔用户对预设输入方案的定制信息〕 &amp;lt;方案标识&amp;gt;.custom.yaml&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;※〔用户自制输入方案〕及配套的词典源文件&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;注：以上标有「※ 号」和「粗体」的文件，包含用户资料，您在清理文件时要注意备份！&lt;/strong&gt;&lt;/p&gt;

&lt;h3 id=&quot;自定义配置&quot;&gt;自定义配置&lt;/h3&gt;

&lt;h4 id=&quot;对全局的定制&quot;&gt;对全局的定制&lt;/h4&gt;

&lt;p&gt;新建文件 &lt;code class=&quot;highlighter-rouge&quot;&gt;touch ~/Library/Rime/default.custom.yaml&lt;/code&gt;, 内容如下&lt;/p&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;c1&quot;&gt;# default.custom.yaml, 全局生效&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# 添加小鹤双拼到方案选单&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;patch&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;schema_list&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;schema&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;double_pinyin_flypy&lt;/span&gt;   &lt;span class=&quot;c1&quot;&gt;# 新增小鹤双拼&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;schema&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;luna_pinyin&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;schema&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;cangjie5&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;schema&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;luna_pinyin_fluency&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;schema&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;luna_pinyin_simp&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;schema&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;luna_pinyin_tw&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h4 id=&quot;对输入方案的定制&quot;&gt;对输入方案的定制&lt;/h4&gt;

&lt;p&gt;比如定制小鹤双拼&lt;br /&gt;
新建文件 &lt;code class=&quot;highlighter-rouge&quot;&gt;touch ~/Library/Rime/double_pinyin_flypy.custom.yaml&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;c1&quot;&gt;# double_pinyin_flypy.custom.yaml, 只对小鹤双拼生效&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;patch&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;translator/preedit_format&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;{}&lt;/span&gt;     &lt;span class=&quot;c1&quot;&gt;# 输入双拼码的时候不转化为全拼码&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;配置好之后需要「重新部署」：切换到「鼠须管」输入法，点击右上角的的输入法图标，点击「重新部署」&lt;br /&gt;
之后就可以用小鹤双拼了&lt;/p&gt;

&lt;h3 id=&quot;外观设定&quot;&gt;外观设定&lt;/h3&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;c1&quot;&gt;# 适用于【鼠须管】0.9.13+&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# 位置：~/Library/Rime/squirrel.custom.yaml&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# 用法：想要哪项生效，就删去该行行首的 &quot;#&quot; 字符，但注意保留用于缩进的空格&lt;/span&gt;

&lt;span class=&quot;s&quot;&gt;patch&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#  us_keyboard_layout: true                 # 键盘选项：应用美式键盘布局&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# 状态通知，适当，也可设为全开（always）全关（never）&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#  show_notifications_when: appropriate&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#  style/color_scheme: luna                 # 选择配色方案&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#  style/horizontal: true                   # 候选窗横向显示&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#  style/inline_preedit: false              # 关闭内嵌编码，这样就可以显示首行的拼音&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#  style/corner_radius: 10                  # 窗口圆角半径&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#  style/border_height: 0                   # 窗口边界高度，大于圆角半径才有效果&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#  style/border_width: 0                    # 窗口边界宽度，大于圆角半径才有效果&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#  style/line_spacing: 1                    # 候选词的行间距&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#  style/spacing: 5                         # 在非内嵌编码模式下，预编辑和候选词之间的间距&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#  style/font_face: &quot;Hiragino Sans GB W3&quot;   # 字体名称&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#  style/font_point: 21                     # 字号&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# 注：预设的配色方案及代码（指定为 style/color_scheme ）&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#   碧水 - aqua&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#   青天 - azure&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#   明月 - luna&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#   墨池 - ink&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#   孤寺 - lost_temple&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#   暗堂 - dark_temple&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#   星际我争霸 - starcraft&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#   谷歌 - google&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#   晒经石 - solarized_rock&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#   简约白 - clean_white&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h3 id=&quot;一些快捷键&quot;&gt;一些快捷键&lt;/h3&gt;

&lt;h4 id=&quot;输入的时候删除一个音节&quot;&gt;输入的时候删除一个音节&lt;/h4&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;⌃ + BackSpace&lt;/code&gt; 或 &lt;code class=&quot;highlighter-rouge&quot;&gt;⇧ + BackSpace&lt;/code&gt;&lt;/p&gt;

&lt;h4 id=&quot;从用户词典中删除误上屏的错词&quot;&gt;从用户词典中删除误上屏的错词&lt;/h4&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Shift + Fn + Delete&lt;/code&gt;&lt;/p&gt;

&lt;h4 id=&quot;emacs-风格的编辑键&quot;&gt;Emacs 风格的编辑键&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;↑：&lt;code class=&quot;highlighter-rouge&quot;&gt;⌃ + p&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;↓：&lt;code class=&quot;highlighter-rouge&quot;&gt;⌃ + n&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;←：&lt;code class=&quot;highlighter-rouge&quot;&gt;⌃ + b&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;→：&lt;code class=&quot;highlighter-rouge&quot;&gt;⌃ + f&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;上页：&lt;code class=&quot;highlighter-rouge&quot;&gt;⌥ + v&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;下页：&lt;code class=&quot;highlighter-rouge&quot;&gt;⌃ + v&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;句首：&lt;code class=&quot;highlighter-rouge&quot;&gt;⌃ + a&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;句末：&lt;code class=&quot;highlighter-rouge&quot;&gt;⌃ + e&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;回退：&lt;code class=&quot;highlighter-rouge&quot;&gt;⌃ + h&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;刪除：&lt;code class=&quot;highlighter-rouge&quot;&gt;⌃ + d&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;清空：&lt;code class=&quot;highlighter-rouge&quot;&gt;⌃ + g&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;有时候快捷键可能会用不了，那是因为其它应用首先获取了快捷键，这样输入法就不会影响你对其它软件的控制&lt;/p&gt;

&lt;h3 id=&quot;定制标点符号&quot;&gt;定制标点符号&lt;/h3&gt;

&lt;p&gt;可以参考 default.yaml 和相应输入法方案的配置（比如 double_pinyin_flypy.schema.yaml）&lt;/p&gt;

&lt;p&gt;比如在 default.yaml 中看到&lt;/p&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;s&quot;&gt;punctuator&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;half_shape&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;/&quot;&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;、&quot;&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;/&quot;&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;／&quot;&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;÷&quot;&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;意思是当你输入 “/” 的时候，会出现上面列表中的候选&lt;br /&gt;
若你想让 “/键” 直接输出 “、”，可以做如下修改&lt;/p&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;c1&quot;&gt;# double_pinyin_flypy.custom.yaml&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;patch&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;punctuator/full_shape&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;/&quot;&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;、&quot;&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;punctuator/half_shape&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;/&quot;&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;、&quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;如果你的用的输入方案导入了 symbols.yaml, 你就可以参考 symbols.yaml 文件来修改了，
里面还有各种特殊符号&lt;/p&gt;

&lt;h4 id=&quot;活用标点创建自定义词组&quot;&gt;活用标点创建自定义词组&lt;/h4&gt;

&lt;p&gt;这还有个用法，你可以将一个键或多个键专门用于输入自定义的词组比如&lt;/p&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;c1&quot;&gt;# double_pinyin_flypy.custom.yaml&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;patch&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;punctuator/half_shape&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;+&quot;&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;+_+&quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;当你输入 “+” 的时候就会变成 “+_+” 了&lt;/p&gt;

&lt;h3 id=&quot;在特定程序里关闭中文输入&quot;&gt;在特定程序里关闭中文输入&lt;/h3&gt;

&lt;p&gt;在一些程序里很少需要输入中文，于是让鼠须管在这些程序里默认不开启中文输入&lt;/p&gt;

&lt;p&gt;要自定义 Mac 应用程序的初始转换状态，
首先查看应用的 Info.plist 文件得到该应用的 Bundle Identifier, 
通常是形如 com.apple.Xcode 的字符串&lt;/p&gt;

&lt;p&gt;例如，要在 Xcode 里面默认关闭中文输入，又要在 Alfred 2 里面恢复开启中文输入，可如此设定：&lt;/p&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;c1&quot;&gt;# squirrel.custom.yaml&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;patch&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;app_options/com.apple.Xcode&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;ascii_mode&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;true&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;app_options/com.runningwithcrayons.Alfred-2&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;{}&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;修改之前先查看以下 squirrel.yaml 文件，默认设置了一些常用的软件&lt;/p&gt;

&lt;h3 id=&quot;更改切换中西文的快捷键&quot;&gt;更改切换中西文的快捷键&lt;/h3&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;c1&quot;&gt;# default.custom.yaml&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# 可用的按键有 Caps_Lock, Shift_L, Shift_R, Control_L, control_R&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# Mac 系统上的鼠须管不能区分左、右，因此只有对 Shift_L, Control_L 的设定起作用&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# 已输入编码时按切换键，可以进一步设定输入法中西文切换的形式&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# 可选的临时切换策略有三：&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# inline_ascii 在输入法的临时西文编辑区内输入字母、数字、符号、空格等，回车上屏后自动复位到中文&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# commit_text 已输入的候选文字上屏并切换至西文输入模式&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# commit_code 已输入的编码字符上屏并切换至西文输入模式&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# 设为 noop, 屏蔽该切换键&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# 如果要把Caps Lock 设为只改变字母的大小写而不做中西文切换，可将 Caps_Lock 对应的切换方式设为 noop&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# 如果要以Caps Lock 切换到西文模式，默认输出小写字母，请置 ascii_composer/good_old_caps_lock: false&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# 如果要以Caps Lock 切换到西文模式，默认输出大写字母，请置 ascii_composer/good_old_caps_lock: true&lt;/span&gt;

&lt;span class=&quot;s&quot;&gt;patch&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;ascii_composer/good_old_caps_lock&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;true&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;ascii_composer/switch_key&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;Caps_Lock&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;noop&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;Shift_L&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;commit_code&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;Shift_R&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;noop&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;Control_L&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;noop&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;Control_R&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;noop&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h3 id=&quot;以方括号-和-来换页&quot;&gt;以方括号 “[” 和 “]” 来换页&lt;/h3&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;c1&quot;&gt;# default.custom.yaml&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;patch&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;key_binder/bindings&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;when&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;paging&lt;/span&gt;
      &lt;span class=&quot;s&quot;&gt;accept&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;bracketleft&lt;/span&gt;
      &lt;span class=&quot;s&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Page_Up&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;when&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;has_menu&lt;/span&gt;
      &lt;span class=&quot;s&quot;&gt;accept&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;bracketright&lt;/span&gt;
      &lt;span class=&quot;s&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Page_Down&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h3 id=&quot;定制每页候选数&quot;&gt;定制每页候选数&lt;/h3&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;c1&quot;&gt;# default.custom.yaml&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;patch&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;menu/page_size&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;5&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;来张 15 个候选的靓照&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/posts/2014-06-12_221853.png&quot; alt=&quot;输入法15个候选词&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;关闭用户词典和字频调整&quot;&gt;关闭用户词典和字频调整&lt;/h3&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;c1&quot;&gt;# double_pinyin_flypy.custom.yaml&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;patch&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;translator/enable_user_dict&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;false&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h3 id=&quot;关于调试&quot;&gt;关于调试&lt;/h3&gt;

&lt;p&gt;使用过程中难免会出现莫名其妙的问题，这个时候我们可以通过如下方法来查找错误&lt;br /&gt;
官方文档关于调试的章节 &lt;a href=&quot;https://github.com/rime/home/wiki/RimeWithSchemata#關於調試&quot;&gt;https://github.com/rime/home/wiki/RimeWithSchemata#關於調試&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;词库管理及用户资料的同步&quot;&gt;词库管理及用户资料的同步&lt;/h2&gt;

&lt;h3 id=&quot;用户词库的导入导出&quot;&gt;用户词库的导入导出&lt;/h3&gt;

&lt;p&gt;目前鼠须管没有图形工具，使用命令行工具也是一样的&lt;/p&gt;

&lt;p&gt;先做一些准备工作&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;新建文件 &lt;code class=&quot;highlighter-rouge&quot;&gt;touch ~/Library/Rime/rime_dict_manager&lt;/code&gt;, 输入如下内容&lt;/p&gt;

    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;c&quot;&gt;#!/bin/bash&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# put this script in ~/Library/Rime, list existing user dictionaries:&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# ./rime_dict_manager --list&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# see other supported options:&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# ./rime_dict_manager&lt;/span&gt;

&lt;span class=&quot;nv&quot;&gt;DYLD_LIBRARY_PATH&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;/Library/Input Methods/Squirrel.app/Contents/Frameworks&quot;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;/Library/Input Methods/Squirrel.app/Contents/MacOS/rime_dict_manager&quot;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$@&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;然后添加可执行权限&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;chmod +x ~/Library/Rime/rime_dict_manager
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;进入用户资料夹 (~/Library/Rime/), 执行相关操作&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h4 id=&quot;导入导出&quot;&gt;导入导出&lt;/h4&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;查看用户词典列表&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;./rime_dict_manager -l
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;先关闭输入法，释放以独占方式打开的词典文件&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;killall Squirrel
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;将词库导入&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;./rime_dict_manager -i dict_name import.txt
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;将词库导出&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;./rime_dict_manager -e dict_name export.txt
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h4 id=&quot;导入扩充词库&quot;&gt;导入扩充词库&lt;/h4&gt;

&lt;p&gt;应该导入到系统词库，方法：固态词典引用多份码表文件&lt;br /&gt;
详细解释请看《&lt;a href=&quot;http://tieba.baidu.com/p/2757690418&quot;&gt;〔新手推荐敎程〕关于导入词库及「深蓝词库转换」的正确操作方法 | rime 吧&lt;/a&gt;》&lt;/p&gt;

&lt;p&gt;感谢词库制作者，下载词库点击《&lt;a href=&quot;https://bintray.com/rime-aca/dictionaries/luna_pinyin.dict&quot;&gt;朙月拼音擴充詞庫 | Rime 翰林院&lt;/a&gt;》&lt;/p&gt;

&lt;p&gt;导入方法（以「小鹤双拼·语句流」输入方案，extend_dictionaries20131121.rar 词库文件为例）：&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;修改定制文件&lt;/p&gt;

    &lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;c1&quot;&gt;# double_pinyin_flypy_fluency.custom.yaml&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;patch&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;translator/dictionary&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;luna_pinyin.extended&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;将&lt;br /&gt;
luna_pinyin.hanyu.dict.yaml&lt;br /&gt;
luna_pinyin.extended.dict.yaml&lt;br /&gt;
luna_pinyin.poetry.dict.yaml&lt;br /&gt;
这三个词库文件移动到用户资料夹 “~/Library/Rime/”&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;重新部署&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;注意&lt;/strong&gt;，在「朙月拼音擴充詞庫」的这个版本中 extend_dictionaries20140909.zip,
他们增加了 luna_pinyin.cn_en 这个词库，
但是同时他们在 luna_pinyin.extended.dict.yaml 这个文件写明了双拼不支持 luna_pinyin.cn_en 这个词库，
如果你使用的是双拼，记得在 luna_pinyin.extended.dict.yaml 文件中将 luna_pinyin.cn_en 这个去掉&lt;/p&gt;

    &lt;p&gt;说的更明白一点就是，将 luna_pinyin.extended.dict.yaml 文件中的：&lt;/p&gt;

    &lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;s&quot;&gt;import_tables&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;luna_pinyin&lt;/span&gt;
  &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;luna_pinyin.hanyu&lt;/span&gt;
  &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;luna_pinyin.poetry&lt;/span&gt;
  &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;luna_pinyin.cn_en&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;

    &lt;p&gt;改写成（去掉 luna_pinyin.cn_en）&lt;/p&gt;

    &lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;s&quot;&gt;import_tables&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;luna_pinyin&lt;/span&gt;
  &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;luna_pinyin.hanyu&lt;/span&gt;
  &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;luna_pinyin.poetry&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;同步用户资料&quot;&gt;同步用户资料&lt;/h3&gt;

&lt;h4 id=&quot;使用-dropbox-同步&quot;&gt;使用 Dropbox 同步&lt;/h4&gt;

&lt;p&gt;编辑 installation.yaml 文件，添加一行：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sync_dir: &#39;/Users/username/Dropbox/sync/Rime&#39;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h4 id=&quot;在不同电脑间进行同步&quot;&gt;在不同电脑间进行同步&lt;/h4&gt;

&lt;p&gt;同步机制可以理解为这样的：&lt;br /&gt;
比如两者的同步文件夹都为 Rime（通过 Dropbox 等同步工具同步），
在这之下就会生成两个以 installation_id 命名的文件夹，分别存放了两者的配置，
所以两者之间的配置是不会共享的，自己同步自己的。
但是用户词典是相互同步的（显然需要这个功能）&lt;/p&gt;

&lt;p&gt;举个同步的例子（我在 Mac 已经进行了相关的配置，也拥有了相当的词库，
我又在一台 Windows 上安装了小狼毫输入法，想使用 Mac 下相同的配置和词库）：&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;在 Windows 上安装小狼毫输入法&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;使用 Dropbox 等工具将鼠须管的同步文件夹同步到这台 Windows 上（例如为 Y:\Rime）&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;打开小狼毫的用户文件夹（开始菜单中可直接打开），修改 installation.yaml 文件，添加一行&lt;/p&gt;

    &lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;s&quot;&gt;sync_dir&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Y:\Rime&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;

    &lt;p&gt;&lt;strong&gt;注意&lt;/strong&gt;不要在路径两边加上双引号，不然无法同步&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;在开始菜单中点击小狼毫的用户资料同步&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;将鼠须管的配置文件复制到小狼毫的用户资料文件夹中，
例如如下的「小鹤双拼·语句流」的方案，需要复制的配置文件有：&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;double_pinyin_flypy_fluency.schema.yaml&lt;/li&gt;
      &lt;li&gt;chinese_contain_english.schema.yaml&lt;/li&gt;
      &lt;li&gt;chinese_contain_english.dict.yaml&lt;/li&gt;
      &lt;li&gt;default.custom.yaml&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;重新部署小狼毫&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;详细配置「小鹤双拼·语句流」&quot;&gt;详细配置「小鹤双拼·语句流」&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;2014-06-09 更新：&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;用了一段时间的语句流，和普通的方式比起来繁琐了一点，但是又没什么明显的优点，至少在 Rime 上是这样子的，
我理想中还是觉得语句流要好，但是现在 Rime 还不够强大。&lt;/p&gt;

&lt;p&gt;我理想中的语句流输入方式：你输入一系列按键，然后他会自动生成一段话，
有时候你会输错，有时候里面夹杂着英文。
如果这个输入法非常聪明，他就会正确理解你的意思，就好像你让秘书做事一样，
不用告诉他第一步是什么，第二步是什么，他理解你的意思，并且完美地做好。&lt;/p&gt;

&lt;p&gt;但是 Rime 做不到秘书这样的水平，你得告诉 Rime 这是中文，这是英文，而且也不能输错。&lt;/p&gt;

&lt;p&gt;普通的输入方式：空格上屏，回车输入码直接上屏。
相比语句流简单了一点。所以我现在自己也不用语句流了。&lt;/p&gt;

&lt;p&gt;虽然当初我写的是语句流的配置，但是没什么关系，他们只有一行配置的不同。
详情见&lt;a href=&quot;#创建「小鹤双拼·语句流」输入方案&quot;&gt;《创建「小鹤双拼·语句流」输入方案》&lt;/a&gt; 配置文件中的第 40 行。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;首先简单介绍一下语句流&lt;/p&gt;

&lt;p&gt;玩法是：空格断词，回车和标点上屏&lt;br /&gt;
令输入码直接上屏：输入的时候切换为西文编码，然后回车上屏&lt;/p&gt;

&lt;p&gt;对用户来说优点很明显，整句输入真的很爽，中英文混输很方便&lt;br /&gt;
对输入法来说，它能知道你输入的更多信息，使你输入更爽快&lt;/p&gt;

&lt;p&gt;效果图在最上面，&lt;a href=&quot;#&quot;&gt;点这里乘电梯&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;创建「小鹤双拼·语句流」输入方案&quot;&gt;创建「小鹤双拼·语句流」输入方案&lt;/h3&gt;

&lt;p&gt;在「小鹤双拼」的基础上进行修改&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;cp /Library/Input\ Methods/Squirrel.app/Contents/SharedSupport/double_pinyin_flypy.schema.yaml ~/Library/Rime/double_pinyin_flypy_fluency.schema.yaml
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;不同的地方基本都有说明&lt;/p&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;c1&quot;&gt;# double_pinyin_flypy_fluency.schema.yaml&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# Rime schema&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# encoding: utf-8&lt;/span&gt;

&lt;span class=&quot;s&quot;&gt;schema&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;schema_id&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;double_pinyin_flypy_fluency&lt;/span&gt;        &lt;span class=&quot;c1&quot;&gt;# 更改方案标识&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;小鶴雙拼·語句流&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;version&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;fluency_0.17&quot;&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;author&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;double pinyin layout by 鶴&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Rime schema by 佛振 &amp;lt;chen.sst@gmail.com&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;description&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;|&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;「朙月拼音＋小鶴雙拼」語句流方案。&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;以空格分詞、標點或回車上屏。&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;dependencies&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;stroke&lt;/span&gt;                        &lt;span class=&quot;c1&quot;&gt;# 带别名的 translator 所引用的字典部署时不会自动编译&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;chinese_contain_english&lt;/span&gt;       &lt;span class=&quot;c1&quot;&gt;# 只有 translator/dictionary: 指定的字典会被编译&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;emoji&lt;/span&gt;                         &lt;span class=&quot;c1&quot;&gt;# 因此需要设置输入方案的依赖关系，保证词典可用&lt;/span&gt;

&lt;span class=&quot;s&quot;&gt;switches&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;ascii_mode&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;reset&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;0&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;states&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;中文&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;西文&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;full_shape&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;states&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;半角&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;全角&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;ascii_punct&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;states&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;，。&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;，．&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;simplification&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;states&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;漢字&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;汉字&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;s&quot;&gt;engine&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;processors&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;ascii_composer&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;recognizer&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;key_binder&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;speller&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;punctuator&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;selector&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;navigator&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;fluency_editor&lt;/span&gt;        &lt;span class=&quot;c1&quot;&gt;# 语句流必需，编辑器，处理空格、回车上屏、回退键等&lt;/span&gt;
                            &lt;span class=&quot;c1&quot;&gt;# 如果你不喜欢语句流，可将其改为 express_editor&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;segmentors&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;ascii_segmentor&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;matcher&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;abc_segmentor&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;punct_segmentor&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;fallback_segmentor&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;translators&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;punct_translator&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;reverse_lookup_translator&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;script_translator&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;table_translator@chinese_contain_english&lt;/span&gt;      &lt;span class=&quot;c1&quot;&gt;# 添加码表式副翻译器&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;table_translator@custom_phrase&lt;/span&gt;                &lt;span class=&quot;c1&quot;&gt;# 同上&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;table_translator@emoji&lt;/span&gt;                        &lt;span class=&quot;c1&quot;&gt;# 同上&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;filters&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;simplifier&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;uniquifier&lt;/span&gt;

&lt;span class=&quot;s&quot;&gt;speller&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;alphabet&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;zyxwvutsrqponmlkjihgfedcba&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;delimiter&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&#39;&quot;&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;algebra&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;erase/^xx$/&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;derive/^([jqxy])u$/$1v/&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;derive/^([aoe])([ioun])$/$1$1$2/&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;xform/^([aoe])(ng)?$/$1$1$2/&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;xform/iu$/Q/&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;xform/(.)ei$/$1W/&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;xform/uan$/R/&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;xform/[uv]e$/T/&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;xform/un$/Y/&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;xform/^sh/U/&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;xform/^ch/I/&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;xform/^zh/V/&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;xform/uo$/O/&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;xform/ie$/P/&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;xform/i?ong$/S/&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;xform/ing$|uai$/K/&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;xform/(.)ai$/$1D/&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;xform/(.)en$/$1F/&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;xform/(.)eng$/$1G/&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;xform/[iu]ang$/L/&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;xform/(.)ang$/$1H/&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;xform/ian$/M/&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;xform/(.)an$/$1J/&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;xform/(.)ou$/$1Z/&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;xform/[iu]a$/X/&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;xform/iao$/N/&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;xform/(.)ao$/$1C/&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;xform/ui$/V/&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;xform/in$/B/&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;xlit/QWRTYUIOPSDFGHJKLZXCVBNM/qwrtyuiopsdfghjklzxcvbnm/&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;#- abbrev/^(.).+$/$1/&lt;/span&gt;

&lt;span class=&quot;s&quot;&gt;translator&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;dictionary&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;luna_pinyin&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;prism&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;double_pinyin_flypy_fluency&lt;/span&gt;    &lt;span class=&quot;c1&quot;&gt;# 由拼写运算规则产生的拼写映射表的名称&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# 去掉了 preedit_format:, 作用是输入双拼码的时候不转化为全拼码&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# 中英文混输的时候，可补全英文，并在英文两边加上半角空格&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# 例如：我爱 Rime 输入法&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;chinese_contain_english&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;dictionary&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;chinese_contain_english&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# 用户自定义词典，可直接编辑文件 &quot;~/Library/Rime/custom_phrase.txt&quot;&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# db_class: stabledb 指定词典格式为文本码表格式（文字&amp;lt;TAB&amp;gt;编码&amp;lt;TAB&amp;gt;权重（可选））&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;custom_phrase&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;dictionary&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;user_dict&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;custom_phrase&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;db_class&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;stabledb&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;enable_completion&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;false&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;enable_sentence&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;false&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;initial_quality&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;1&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# 可直接输入 Emoji 表情编码来输入表情&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;emoji&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;dictionary&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;emoji&lt;/span&gt;

&lt;span class=&quot;s&quot;&gt;reverse_lookup&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;dictionary&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;stroke&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;enable_completion&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;true&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;prefix&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;`&quot;&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;suffix&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&#39;&quot;&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;tips&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;〔筆畫〕&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;preedit_format&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;xlit/hspnz/一丨丿丶乙/&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;comment_format&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;xform/([nl])v/$1ü/&lt;/span&gt;

&lt;span class=&quot;s&quot;&gt;punctuator&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;import_preset&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;symbols&lt;/span&gt;        &lt;span class=&quot;c1&quot;&gt;# 导入 symbols.yaml, 用于输入特殊符号&lt;/span&gt;

&lt;span class=&quot;s&quot;&gt;key_binder&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;import_preset&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;default&lt;/span&gt;

&lt;span class=&quot;s&quot;&gt;recognizer&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;import_preset&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;default&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;patterns&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;number&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;^[-+]?[0-9][.:0-9]*[%]?$&quot;&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# 配合特殊符号的输入&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;punct&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;^/[0-9]*[a-z]*$&quot;&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;reverse_lookup&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;`[a-z]*&#39;?$&quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h4 id=&quot;创建-chinesecontainenglish-输入方案&quot;&gt;创建 chinese_contain_english 输入方案&lt;/h4&gt;

&lt;p&gt;因「小鹤双拼·语句流」输入方案依赖 “chinese_contain_english” 输入方案，
如果不创建的话 chinese_contain_english 词典无法被编译&lt;br /&gt;
创建简单版本即可 &lt;code class=&quot;highlighter-rouge&quot;&gt;touch ~/Library/Rime/chinese_contain_english.schema.yaml&lt;/code&gt;, 内容如下：&lt;/p&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;c1&quot;&gt;# chinese_contain_english.schema.yaml&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# Rime schema&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# encoding: utf-8&lt;/span&gt;

&lt;span class=&quot;s&quot;&gt;schema&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;schema_id&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;chinese_contain_english&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;英文&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;version&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;0.1&quot;&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;description&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;为了配合「小鹤双拼·语句流」输入方案&lt;/span&gt;

&lt;span class=&quot;s&quot;&gt;engine&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;processors&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;speller&lt;/span&gt;               &lt;span class=&quot;c1&quot;&gt;# 把字母追加到编码串&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;selector&lt;/span&gt;              &lt;span class=&quot;c1&quot;&gt;# 选字、换页&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;navigator&lt;/span&gt;             &lt;span class=&quot;c1&quot;&gt;# 移动插入点&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;express_editor&lt;/span&gt;        &lt;span class=&quot;c1&quot;&gt;# 空格确认当前输入、其他字符直接上屏&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;segmentors&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;abc_segmentor&lt;/span&gt;         &lt;span class=&quot;c1&quot;&gt;# 标记输入码的类型&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;translators&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;echo_translator&lt;/span&gt;       &lt;span class=&quot;c1&quot;&gt;# 没有候选项时，创建一个与编码串一个模样的候选项&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;table_translator&lt;/span&gt;      &lt;span class=&quot;c1&quot;&gt;# 码表式转换&lt;/span&gt;

&lt;span class=&quot;s&quot;&gt;translator&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;dictionary&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;chinese_contain_english&lt;/span&gt;       &lt;span class=&quot;c1&quot;&gt;# 设定 table_translator 使用的词典名&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h4 id=&quot;创建-chinesecontainenglish-词典&quot;&gt;创建 chinese_contain_english 词典&lt;/h4&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;touch ~/Library/Rime/chinese_contain_english.dict.yaml
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;内容如下：&lt;/p&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;c1&quot;&gt;# chinese_contain_english.dict.yaml&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# Rime dictionary&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# encoding: utf-8&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# 中英文混输的时候有用&lt;/span&gt;

&lt;span class=&quot;nn&quot;&gt;---&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;chinese_contain_english&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;version&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;0.1&quot;&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;sort&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;by_weight&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;use_preset_vocabulary&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;false&lt;/span&gt;
&lt;span class=&quot;nn&quot;&gt;...&lt;/span&gt;

 &lt;span class=&quot;s&quot;&gt;Rime &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;rime&lt;/span&gt;
 &lt;span class=&quot;s&quot;&gt;Android &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;android&lt;/span&gt;
 &lt;span class=&quot;s&quot;&gt;Apple &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;apple&lt;/span&gt;
 &lt;span class=&quot;s&quot;&gt;Mac &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;mac&lt;/span&gt;
 &lt;span class=&quot;s&quot;&gt;Windows &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;windows&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# ... 自己扩展&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;需要&lt;strong&gt;注意&lt;/strong&gt;的是：&lt;code class=&quot;highlighter-rouge&quot;&gt; Rime 	rime&lt;/code&gt; 之间要有 tab，其它的类似，词典格式是如此&lt;br /&gt;
完整的文件内容请看：&lt;a href=&quot;https://gist.github.com/lifenod/931e306e2ae8bd32b169&quot;&gt;https://gist.github.com/lifenod/931e306e2ae8bd32b169&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;添加「小鹤双拼·语句流」输入方案以及对全局的定制&quot;&gt;添加「小鹤双拼·语句流」输入方案以及对全局的定制&lt;/h3&gt;

&lt;p&gt;首先创建对全局的用户定制文件&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;touch ~/Library/Rime/default.custom.yaml
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;然后编辑该文件&lt;/p&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;c1&quot;&gt;# default.custom.yaml&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# Rime default settings&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# encoding: utf-8&lt;/span&gt;

&lt;span class=&quot;s&quot;&gt;patch&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;schema_list&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;schema&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;double_pinyin_flypy_fluency&lt;/span&gt;   &lt;span class=&quot;c1&quot;&gt;# 新增「小鶴雙拼·語句流」&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;schema&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;luna_pinyin&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;schema&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;cangjie5&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;schema&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;luna_pinyin_fluency&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;schema&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;luna_pinyin_simp&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;schema&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;luna_pinyin_tw&lt;/span&gt;

  &lt;span class=&quot;s&quot;&gt;key_binder/bindings&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;                      &lt;span class=&quot;c1&quot;&gt;# 以方括号换页&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;when&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;paging&lt;/span&gt;
      &lt;span class=&quot;s&quot;&gt;accept&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;bracketleft&lt;/span&gt;
      &lt;span class=&quot;s&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Page_Up&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;when&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;has_menu&lt;/span&gt;
      &lt;span class=&quot;s&quot;&gt;accept&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;bracketright&lt;/span&gt;
      &lt;span class=&quot;s&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Page_Down&lt;/span&gt;

  &lt;span class=&quot;s&quot;&gt;ascii_composer/good_old_caps_lock&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;true&lt;/span&gt;   &lt;span class=&quot;c1&quot;&gt;# 中西文切换快捷键&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;ascii_composer/switch_key&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;Caps_Lock&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;noop&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;Shift_L&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;inline_ascii&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;Shift_R&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;noop&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;Control_L&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;noop&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;Control_R&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;noop&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h3 id=&quot;外观设定-1&quot;&gt;外观设定&lt;/h3&gt;

&lt;p&gt;见上文《&lt;a href=&quot;#外观设定&quot;&gt;外观设定&lt;/a&gt;》&lt;/p&gt;

&lt;h3 id=&quot;导入扩充词库-1&quot;&gt;导入扩充词库&lt;/h3&gt;

&lt;p&gt;见上文《&lt;a href=&quot;#导入扩充词库&quot;&gt;导入扩充词库&lt;/a&gt;》&lt;/p&gt;

&lt;h3 id=&quot;同步用户资料-1&quot;&gt;同步用户资料&lt;/h3&gt;

&lt;p&gt;见上文《&lt;a href=&quot;#同步用户资料&quot;&gt;同步用户资料&lt;/a&gt;》&lt;/p&gt;

&lt;h2 id=&quot;ios-上的双拼输入法&quot;&gt;iOS 上的双拼输入法&lt;/h2&gt;

&lt;p&gt;在 iOS 9 系统下，我使用的是「SPi 双拼输入法 for iPhone」，一款不需要「完全访问」的输入法，
界面近乎原生，简单快速，双拼功能也足够使用&lt;/p&gt;

&lt;p&gt;官网：&lt;a href=&quot;http://spiim.com/&quot;&gt;http://spiim.com/&lt;/a&gt;&lt;br /&gt;
GitHub 主页：&lt;a href=&quot;https://github.com/guoc/spi&quot;&gt;https://github.com/guoc/spi&lt;/a&gt;, 这款输入法是开源的&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;参考：&lt;br /&gt;
&lt;a href=&quot;https://github.com/rime/home/wiki/MoodCollection&quot;&gt;Rime 心情集 | GitHub&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;https://github.com/rime/home/wiki/UserGuide&quot;&gt;說明書 | GitHub&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;https://github.com/rime/home/wiki/CustomizationGuide&quot;&gt;Rime 定製指南 | GitHub&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;https://github.com/rime/home/wiki/RimeWithSchemata&quot;&gt;Rime 輸入方案設計書 | GitHub&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;https://github.com/LEOYoon-Tsaw/Rime_collections/blob/master/Rime_description.md&quot;&gt;雪齋的文檔 | GitHub&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://tieba.baidu.com/p/2283095493&quot;&gt;预备发布一个新版本【小狼毫】0.9.21 | rime 吧&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://tieba.baidu.com/p/2757690418&quot;&gt;〔新手推荐敎程〕关于导入词库及「深蓝词库转换」的正确操作方法 | rime 吧&lt;/a&gt;&lt;/p&gt;
</description>
        <pubDate>Mon, 09 Jun 2014 00:00:00 +0800</pubDate>
        
        <lastBuildDate>Wed, 03 Jun 2015 20:26:42 +0800</lastBuildDate>
        
        <link>http://www.dreamxu.com/install-config-squirrel/</link>
        <guid isPermaLink="true">http://www.dreamxu.com/install-config-squirrel/</guid>
        
        <category>记录</category>
        
        <category>Rime</category>
        
        <category>Squirrel</category>
        
        <category>小鹤双拼</category>
        
        <category>鼠须管</category>
        
        <category>小狼毫</category>
        
        <category>输入法</category>
        
        <category>Mac</category>
        
        <category>Install</category>
        
      </item>
    
      <item>
        <title>Mac 下配置终端环境 iTerm2 + Zsh + Oh My Zsh + tmux</title>
        <description>&lt;h2 id=&quot;iterm2&quot;&gt;iTerm2&lt;/h2&gt;

&lt;blockquote&gt;
  &lt;p&gt;iTerm 2 is a terminal emulator for Mac OS X that does amazing things.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;iTerm2 是一个终端模拟器，官方网站：&lt;a href=&quot;http://www.iterm2.com/&quot;&gt;http://www.iterm2.com/&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;更改配色方案为-solarized&quot;&gt;更改配色方案为 Solarized&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;注意&lt;/strong&gt;：iTerm2 3.0.12（应该比这更早）已经内置 Solarized 的配色方案了，直接在 iTerm2 - Preferences - Profiles - Colors 里面配置就好了&lt;/p&gt;

&lt;p&gt;Solarized 的主页：&lt;a href=&quot;http://ethanschoonover.com/solarized&quot;&gt;http://ethanschoonover.com/solarized&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;直接去主页下载或者使用 Git&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;git clone git://github.com/altercation/solarized.git
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;然后打开 solarized/iterm2-colors-solarized/ 双击里面的文件&lt;/p&gt;

&lt;h4 id=&quot;遇到的问题&quot;&gt;遇到的问题&lt;/h4&gt;

&lt;p&gt;终端灰蒙蒙的，就像下面这样&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/posts/2014-05-11_230829.png&quot; alt=&quot;terminal-gray&quot; /&gt;&lt;/p&gt;

&lt;p&gt;下面我们来回到彩色世界：&lt;br /&gt;
依次打开 iTerm2 - Preferences - Profiles - Text - Text Rendering，将 Draw bold text in bright colors 前面的勾去掉&lt;br /&gt;
彩色的世界就回来了&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/posts/2014-05-11_230856.png&quot; alt=&quot;terminal-color&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;有意思的配置&quot;&gt;有意思的配置&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;快捷键呼出&lt;br /&gt;
Preferences - Keys - Hotkey - Hotkey toggles a dedicated window with profile&lt;br /&gt;
把它设置成 Hotkey Window，按快捷键之后 Hotkey Window 会从屏幕上面折叠下来&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;菜单栏中的 Window 还有一些有趣的东西，比如保存读取窗口快照&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Preferences - Profiles - Terminal - Terminal Emulation - Report Terminal Type&lt;br /&gt;
将其中的 xterm 改成 xterm-256color，比如在 Vim 显示一些配色方案会好很多&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;复用上个会话的目录&lt;br /&gt;
Preferences - Profiles - Working Directory - Reuse previous session’s directory&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;快捷键&quot;&gt;快捷键&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;⌘ + Click&lt;/code&gt;：可以打开文件，文件夹和链接&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;⌘ + n&lt;/code&gt;：新建窗口&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;⌘ + t&lt;/code&gt;：新建标签页&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;⌘ + w&lt;/code&gt;：关闭当前页&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;⌘ + 数字&lt;/code&gt; &amp;amp; &lt;code class=&quot;highlighter-rouge&quot;&gt;⌘ + 方向键&lt;/code&gt;：切换标签页&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;⌥⌘ + 数字&lt;/code&gt;：切换窗口&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;⌘ + enter&lt;/code&gt;：切换全屏&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;⌘ + d&lt;/code&gt;：左右分屏&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;⇧⌘ + d&lt;/code&gt;：上下分屏&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;⌘ + ;&lt;/code&gt;：自动补全历史记录&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;⇧⌘ + h&lt;/code&gt;：自动补全剪贴板历史&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;⌥⌘ + e&lt;/code&gt;：查找所有来定位某个标签页&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;⌘ + r&lt;/code&gt; &amp;amp; &lt;code class=&quot;highlighter-rouge&quot;&gt;⌃ + l&lt;/code&gt;：清屏&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;⌘ + /&lt;/code&gt;：显示光标位置&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;⌥⌘ + b&lt;/code&gt;：历史回放&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;⌘ + f&lt;/code&gt;：查找，然后用 &lt;code class=&quot;highlighter-rouge&quot;&gt;tab&lt;/code&gt; 和 &lt;code class=&quot;highlighter-rouge&quot;&gt;⇧ + tab&lt;/code&gt; 可以向右和向左补全，补全之后的内容会被自动复制，
还可以用 &lt;code class=&quot;highlighter-rouge&quot;&gt;⌥ + enter&lt;/code&gt; 将查找结果输入终端&lt;/li&gt;
  &lt;li&gt;选中即复制，鼠标中键粘贴&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;很多快捷键都是通用的，和 Emace 等都是一样的&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;⌃ + u&lt;/code&gt;：清空当前行&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;⌃ + a&lt;/code&gt;：移动到行首&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;⌃ + e&lt;/code&gt;：移动到行尾&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;⌃ + f&lt;/code&gt;：向前移动&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;⌃ + b&lt;/code&gt;：向后移动&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;⌃ + p&lt;/code&gt;：上一条命令&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;⌃ + n&lt;/code&gt;：下一条命令&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;⌃ + r&lt;/code&gt;：搜索历史命令&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;⌃ + y&lt;/code&gt;：召回最近用命令删除的文字&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;⌃ + h&lt;/code&gt;：删除光标之前的字符&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;⌃ + d&lt;/code&gt;：删除光标所指的字符&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;⌃ + w&lt;/code&gt;：删除光标之前的单词&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;⌃ + k&lt;/code&gt;：删除从光标到行尾的内容&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;⌃ + t&lt;/code&gt;：交换光标和之前的字符&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;还有鼠标和触摸板控制&lt;br /&gt;
Preferences - Pointer&lt;/p&gt;

&lt;h2 id=&quot;zsh&quot;&gt;Zsh&lt;/h2&gt;

&lt;p&gt;Mac 系统自带了 Zsh, 一般不是最新版，如果需要最新版可通过 Homebrew 来安装&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;brew install zsh
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;可通过 &lt;code class=&quot;highlighter-rouge&quot;&gt;zsh --version&lt;/code&gt; 命令查看 Zsh 的版本&lt;br /&gt;
使用 &lt;code class=&quot;highlighter-rouge&quot;&gt;echo $ZSH_VERSION&lt;/code&gt; 命令查看当前使用的 Zsh 版本&lt;/p&gt;

&lt;p&gt;修改默认 Shell&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;在 /etc/shells 文件中加入如下一行&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;/usr/local/bin/zsh
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;然后运行命令&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;chsh -s /usr/local/bin/zsh
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;oh-my-zsh&quot;&gt;Oh My Zsh&lt;/h2&gt;

&lt;p&gt;Oh My Zsh 用来管理 Zsh 配置的，自带了好用的基本配置，基本都是 Zsh 的标配了，你不用再一步步重新配置 Zsh ，节约你的宝贵时间&lt;/p&gt;

&lt;p&gt;项目主页：&lt;a href=&quot;https://github.com/robbyrussell/oh-my-zsh&quot;&gt;https://github.com/robbyrussell/oh-my-zsh&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;安装方法见主页，很简单就不说了，下面说说一些常用的好用的功能：&lt;br /&gt;
配置文件在 &lt;code class=&quot;highlighter-rouge&quot;&gt;~/.zshrc&lt;/code&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;连续按 tab, 能直接选择文件及文件夹，还可以使用 &lt;code class=&quot;highlighter-rouge&quot;&gt;⌃ + n/p/f/b&lt;/code&gt; 来选择&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;直接输入文件名打开文件，可指定不同的后缀名用不同的程序打开&lt;br /&gt;
在配置文件中写入 &lt;code class=&quot;highlighter-rouge&quot;&gt;alias -s md=mvim&lt;/code&gt;, 表明在命令行中输入 md 后缀的文件名，会用 mvim 打开&lt;br /&gt;
又例如：&lt;code class=&quot;highlighter-rouge&quot;&gt;alias -s gz=&quot;tar -xzvf&quot;&lt;/code&gt;, 自动解压后缀为 gz 的压缩包&lt;br /&gt;
一些常用的压缩方式如下：&lt;/p&gt;

    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nb&quot;&gt;alias&lt;/span&gt; -s &lt;span class=&quot;nv&quot;&gt;tar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;tar -xvf&quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;alias&lt;/span&gt; -s &lt;span class=&quot;nv&quot;&gt;gz&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;tar -xzvf&quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;alias&lt;/span&gt; -s &lt;span class=&quot;nv&quot;&gt;tgz&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;tar -xzvf&quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;alias&lt;/span&gt; -s &lt;span class=&quot;nv&quot;&gt;bz2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;tar -xjvf&quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;alias&lt;/span&gt; -s &lt;span class=&quot;nv&quot;&gt;zip&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;unzip&quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kill &amp;lt;tab&amp;gt;&lt;/code&gt; 会自动列出进程，或者 &lt;code class=&quot;highlighter-rouge&quot;&gt;kill nginx&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;支持递归，例如 &lt;code class=&quot;highlighter-rouge&quot;&gt;ls **/*&lt;/code&gt; 列出当前目录下所有文件及目录，并递归目录&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;使 &lt;code class=&quot;highlighter-rouge&quot;&gt;man&lt;/code&gt; 结果高亮显示，在配置文件中写入如下内容：&lt;/p&gt;

    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;c&quot;&gt;# man page highlight&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;LESS_TERMCAP_mb&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$&#39;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\E&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;01;31m&lt;span class=&quot;s1&quot;&gt;&#39;       # begin blinking
export LESS_TERMCAP_md=$&#39;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\E&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;01;38;5;74m&lt;span class=&quot;s1&quot;&gt;&#39;  # begin bold
export LESS_TERMCAP_me=$&#39;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\E&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;0m&lt;span class=&quot;s1&quot;&gt;&#39;           # end mode
export LESS_TERMCAP_se=$&#39;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\E&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;0m&lt;span class=&quot;s1&quot;&gt;&#39;           # end standout-mode
export LESS_TERMCAP_so=$&#39;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\E&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;38;5;246m&lt;span class=&quot;s1&quot;&gt;&#39;    # begin standout-mode - info box
export LESS_TERMCAP_ue=$&#39;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\E&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;0m&lt;span class=&quot;s1&quot;&gt;&#39;           # end underline
export LESS_TERMCAP_us=$&#39;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\E&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;04;38;5;146m&lt;span class=&quot;s1&quot;&gt;&#39; # begin underline
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Oh My Zsh 本身自带了很多插件，不过基本都没有启用，插件目录 &lt;code class=&quot;highlighter-rouge&quot;&gt;~/.oh-my-zsh/plugins&lt;/code&gt;&lt;br /&gt;
例如启用插件 git, autojump osx, 需要在配置文件中加入如下内容&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;plugins=(git autojump osx)
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;osx 插件&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;man-preview&lt;/code&gt; 通过 preview 程序查看一个命令的手册&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;quick-look&lt;/code&gt; 快速预览文件&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;pfd&lt;/code&gt; 返回当前 Finder 打开的文件夹的路径&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;cdf&lt;/code&gt; 切换到当前 Finder 所在的目录&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;autojump 插件&lt;/p&gt;

    &lt;p&gt;需要先安装 autojump&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;brew install autojump
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;

    &lt;p&gt;使用方法：&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;j 目录名或目录名的一部分
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;

    &lt;p&gt;跳转到最多访问的目录&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;tmux&quot;&gt;tmux&lt;/h2&gt;

&lt;p&gt;官网：&lt;a href=&quot;http://tmux.github.io/&quot;&gt;http://tmux.github.io/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;一个终端复用软件，可将终端方案化&lt;/p&gt;

&lt;p&gt;安装&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;brew install tmux
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;配置&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;mvim ~/.tmux.conf
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;并不喜欢反人类的全键盘式操作，而且也没有特别吸引我的点，所以基本不使用&lt;/p&gt;

&lt;p&gt;经常连接服务器的人用起来应该挺好用的&lt;br /&gt;
比如，在一个窗口中分隔成多个终端同时运行不同的命令&lt;br /&gt;
使用 SSH 的时候，在网络不稳定的情况下，可保存工作环境&lt;/p&gt;

&lt;p&gt;在网络不好的环境下，还可以尝试使用 &lt;a href=&quot;https://mosh.mit.edu/&quot;&gt;Mosh&lt;/a&gt; 来代替 SSH&lt;/p&gt;
</description>
        <pubDate>Sun, 11 May 2014 00:00:00 +0800</pubDate>
        
        <lastBuildDate>Sun, 26 Oct 2014 14:05:00 +0800</lastBuildDate>
        
        <link>http://www.dreamxu.com/mac-terminal/</link>
        <guid isPermaLink="true">http://www.dreamxu.com/mac-terminal/</guid>
        
        <category>记录</category>
        
        <category>iTerm2</category>
        
        <category>Zsh</category>
        
        <category>Oh My Zsh</category>
        
        <category>tmux</category>
        
      </item>
    
      <item>
        <title>树莓派作 NAS (RAID1, SMB/FTP, ARIA2, 迅雷离线, 异地备份)</title>
        <description>&lt;p&gt;本文比较长，列个目录方便阅读&lt;/p&gt;

&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#前提&quot; id=&quot;markdown-toc-前提&quot;&gt;前提&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#准备硬盘&quot; id=&quot;markdown-toc-准备硬盘&quot;&gt;准备硬盘&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#安装并配置-samba&quot; id=&quot;markdown-toc-安装并配置-samba&quot;&gt;安装并配置 Samba&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#测试-samba&quot; id=&quot;markdown-toc-测试-samba&quot;&gt;测试 Samba&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ftp-服务器安装及配置&quot; id=&quot;markdown-toc-ftp-服务器安装及配置&quot;&gt;FTP 服务器安装及配置&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#aria2-安装及配置-web-前端-迅雷离线&quot; id=&quot;markdown-toc-aria2-安装及配置-web-前端-迅雷离线&quot;&gt;aria2 安装及配置 + web 前端 + 迅雷离线&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#aria2-安装及配置&quot; id=&quot;markdown-toc-aria2-安装及配置&quot;&gt;aria2 安装及配置&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#web-前端的配置-yaaw-和-webui-aria2&quot; id=&quot;markdown-toc-web-前端的配置-yaaw-和-webui-aria2&quot;&gt;web 前端的配置 yaaw 和 webui-aria2&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#迅雷离线下载&quot; id=&quot;markdown-toc-迅雷离线下载&quot;&gt;迅雷离线下载&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#aria2-出现问题的解决方法&quot; id=&quot;markdown-toc-aria2-出现问题的解决方法&quot;&gt;aria2 出现问题的解决方法&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#磁盘阵列-raid1-与异地备份&quot; id=&quot;markdown-toc-磁盘阵列-raid1-与异地备份&quot;&gt;磁盘阵列 RAID1 与异地备份&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;总的来说树莓派作为 nas 还是不错的，连续运行几十天了没有任何异常&lt;/p&gt;

&lt;h2 id=&quot;前提&quot;&gt;前提&lt;/h2&gt;

&lt;p&gt;首先保证树莓派运行 Raspbian 系统正常，并将空间扩展至整张 SD 卡，需要安装各种软件以防空间不够&lt;br /&gt;
操作树莓派直接使用 ssh 就可以了，不需要显示器的&lt;/p&gt;

&lt;p&gt;在进行操作之前，最好先更新一下软件源&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo apt-get update
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;然后再更新一下软件（非必须）&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo apt-get upgrade
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h2 id=&quot;准备硬盘&quot;&gt;准备硬盘&lt;/h2&gt;

&lt;p&gt;若需要组建 raid1, 可看我写的另一篇文章
《&lt;a href=&quot;http://www.dreamxu.com/debian-create-software-raid-one-arrays/&quot;&gt;Debian 组建软 RAID 1 磁盘阵列&lt;/a&gt;》&lt;/p&gt;

&lt;p&gt;最好使用隔离式带电源的 USB HUB, 保护硬盘也保护树莓派&lt;/p&gt;

&lt;p&gt;如果硬盘是 NTFS 格式的，那么需要安装 ntfs-3g 模块或者将硬盘格式化为 ext4 格式。&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;安装 ntfs-3g 模块，就能读写 ntfs 格式了。不安装的话只能读，但是不能写&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo apt-get install ntfs-3g
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;格式化硬盘为 ext4 格式&lt;/p&gt;

    &lt;ol&gt;
      &lt;li&gt;
        &lt;p&gt;查看硬盘的内核名称，其中的 “/dev/mmcblk0” 指的是树莓派中的 SD 卡，而 “/dev/sda” 一般就是指硬盘了&lt;/p&gt;

        &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo fdisk -l
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
        &lt;/div&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;按照提示对硬盘进行进行分区&lt;/p&gt;

        &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo fdisk /dev/sda
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
        &lt;/div&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;将硬盘分区格式化为 ext4 格式，格式化之前必须先卸载硬盘，使用 umount 命令即可&lt;/p&gt;

        &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo mkfs.ext4 /dev/sda1
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
        &lt;/div&gt;
      &lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;开机自动挂载硬盘&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;先挂载一下硬盘，修改权限，要不然我们的 pi 可是写不了的&lt;br /&gt;
ext4 格式是可以记录权限信息的，所以修改一次下次挂载 pi 就可以写了&lt;br /&gt;
ntfs 格式的话，挂载的时候指定 uid=pi,gid=pi 就可以了，直接看第2步&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;mkdir /home/pi/nas-data
sudo mount /dev/sda1 /home/pi/nas-data
sudo chown pi:pi /home/pi/nas-data
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;查看硬盘的 uuid&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;$ sudo blkid
/dev/sda1: UUID=&quot;d5a3d30a-d2e7-4b12-bb31-b4439c5db200&quot; TYPE=&quot;ext4&quot;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;编辑 &lt;code class=&quot;highlighter-rouge&quot;&gt;sudo vim /etc/fstab&lt;/code&gt; 文件，在末尾加入以下内容，文件格式说明请看 &lt;code class=&quot;highlighter-rouge&quot;&gt;man fstab&lt;/code&gt; 或者《&lt;a href=&quot;http://vbird.dic.ksu.edu.tw/linux_basic/0230filesystem.php#bootup&quot;&gt;配置启动挂载&lt;/a&gt;》&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;UUID=d5a3d30a-d2e7-4b12-bb31-b4439c5db200       /home/pi/nas-data   ext4    defaults    0       2
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;

    &lt;p&gt;如果是 ntfs 格式，如下&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;UUID=588650B08650907C   /home/pi/nas-data   ntfs    gid=pi,uid=pi,dmask=002,fmask=113   0   0
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;安装并配置-samba&quot;&gt;安装并配置 Samba&lt;/h2&gt;

&lt;p&gt;首先安装 samba&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo apt-get install samba samba-common-bin
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;然后配置 samba&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;备份配置文件，备份是个好习惯&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo cp /etc/samba/smb.conf /etc/samba/smb.conf.bak
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;编辑配置文件 &lt;code class=&quot;highlighter-rouge&quot;&gt;sudo vim /etc/samba/smb.conf&lt;/code&gt; , 做如下修改&lt;/p&gt;

    &lt;div class=&quot;language-ini highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;c&quot;&gt;# 找到 &quot;#   security = user&quot; 这一行，将前面的&quot;#&quot;去掉，修改后内容如下
&lt;/span&gt;    &lt;span class=&quot;c&quot;&gt;# 使用本地用户来登陆
&lt;/span&gt;    &lt;span class=&quot;py&quot;&gt;security&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;user&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# 在末尾加入如下内容
# 分享名称
&lt;/span&gt;&lt;span class=&quot;nn&quot;&gt;[nas]&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# 说明信息
&lt;/span&gt;    &lt;span class=&quot;py&quot;&gt;comment&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;NAS Storage&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# 要问我为啥多加了个 nas-data，因为我把 ext4 格式的硬盘挂载在 /home/pi/nas-data 下
&lt;/span&gt;    &lt;span class=&quot;c&quot;&gt;# ext4 文件系统会在根目录下产生 lost+found 文件夹，看着烦，就让它“消失了”（多加一层目录）
&lt;/span&gt;    &lt;span class=&quot;c&quot;&gt;# 共享文件的路径
&lt;/span&gt;    &lt;span class=&quot;py&quot;&gt;path&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;/home/pi/nas-data/nas-data&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# 可被其他人看到资源名称（非内容）
&lt;/span&gt;    &lt;span class=&quot;py&quot;&gt;browseable&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;yes&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# 可写
&lt;/span&gt;    &lt;span class=&quot;py&quot;&gt;writable&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;yes&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# 新建文件的权限为 664
&lt;/span&gt;    &lt;span class=&quot;err&quot;&gt;create&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;mask&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;0664&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# 新建目录的权限为 775
&lt;/span&gt;    &lt;span class=&quot;err&quot;&gt;directory&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;mask&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;0775&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;

    &lt;p&gt;可以把配置文件中你不需要的分享名称删除，例如 [homes], [printers] 等&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;测试配置文件是否有错误，”[ ]”之前的为错误信息，根据提示做相应修改&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;$ testparm
rlimit_max: increasing rlimit_max (1024) to minimum Windows limit (16384)
Processing section &quot;[nas]&quot;
Loaded services file OK.
...
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;

    &lt;p&gt;出现 rlimit_max 这个问题，一搜发现出现这个问题的很多啊，摘录一个回答&lt;/p&gt;

    &lt;blockquote&gt;
      &lt;p&gt;It’s a warning, you can safely ignore it. Windows 7 clients need to
have exactly the same number of open handles available as Windows
servers, else it fails in some file copy situations with a “out of
handles” message. Samba has taken care of it for you, but it’s just
letting you know your fd limit is set a bit low.&lt;br /&gt;
——Jeremy&lt;/p&gt;
    &lt;/blockquote&gt;

    &lt;p&gt;既然这样，那就把这个提示忽略吧&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;给 samba 添加用户并创建密码（登陆 samba 用的），其中的用户必须是 linux 已存在的用户&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo smbpasswd -a pi
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;配置好后，使用如下命令重启 samba 服务&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo /etc/init.d/samba restart
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;到这里，各个设备应该都可以访问了，大功告成？&lt;br /&gt;
还差点，下面进行测试&lt;/p&gt;

&lt;h2 id=&quot;测试-samba&quot;&gt;测试 Samba&lt;/h2&gt;

&lt;p&gt;我的网络拓扑结构如下：&lt;br /&gt;
linux 主机 &amp;lt;--无线--&amp;gt; 300M 路由器 &amp;lt;--网线--&amp;gt; 树莓派&lt;/p&gt;

&lt;p&gt;打开 linux 主机，首先挂载好 samba (可用 &lt;code class=&quot;highlighter-rouge&quot;&gt;smbclient -L [raspberrypi ip]&lt;/code&gt; 查看树莓派分享的资源)&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo mount -t cifs //192.168.1.2/nas /mnt -o username=pi,password=raspberry
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;分别在路由器附近和工作地点测试（距离路由器10米左右，穿过2堵墙）&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;路由器附近&lt;/p&gt;

    &lt;p&gt;向树莓派写入文件，四次测试分别为 10.0 MB/s, 9.8 MB/s, 10.1 MB/s, 10.0 MB/s&lt;br /&gt;
平均 9.975 MB/s&lt;br /&gt;
&lt;img src=&quot;/assets/images/posts/2013-11-29_132334.png&quot; alt=&quot;samba-速度测试&quot; /&gt;&lt;/p&gt;

    &lt;p&gt;从树莓派中读取文件，四次测试分别为 10.2 MB/s, 10.2 MB/s, 10.2 MB/s, 10.2 MB/s&lt;br /&gt;
平均 10.2 MB/s&lt;br /&gt;
&lt;img src=&quot;/assets/images/posts/2013-11-29_135644.png&quot; alt=&quot;samba-速度测试&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;工作地点&lt;/p&gt;

    &lt;p&gt;向树莓派写入文件，四次测试分别为 6.8 MB/s, 6.9 MB/s, 6.8 MB/s, 6.9 MB/s&lt;br /&gt;
平均 6.85 MB/s&lt;br /&gt;
&lt;img src=&quot;/assets/images/posts/2013-11-29_131225.png&quot; alt=&quot;samba-速度测试&quot; /&gt;&lt;/p&gt;

    &lt;p&gt;从树莓派中读取文件，四次测试分别为 8.7 MB/s, 8.2 MB/s, 8.0 MB/s, 8.7 MB/s&lt;br /&gt;
平均 8.4 MB/s&lt;br /&gt;
&lt;img src=&quot;/assets/images/posts/2013-11-29_132126.png&quot; alt=&quot;samba-速度测试&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;100 以太网卡能有这样的速度已经相当不错了&lt;br /&gt;
距离路由器近的话性能瓶颈在树莓派的以太网卡，算它 9MB/s，相当于 72Mbps, 
播放蓝光原盘肯定是没有问题的，本来想下部电影来试试的，可惜某些站点最近上不去了，
而我又没存货&lt;br /&gt;
手头有部 10G 的电影，在工作地点测试，播放完全没有问题，拖动进度条也能瞬间反应&lt;/p&gt;

&lt;p&gt;按我家的情况来说，就算把树莓派换成千兆网卡，还是那个速度，树莓派是够用的了&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;以下纯属理论上的 YY，没设备来验证&lt;/p&gt;

&lt;p&gt;难道树莓派就被百兆网卡耍着玩，认命了吗？&lt;br /&gt;
树莓派沉思了一下，不对啊，我明明是被折腾的命&lt;br /&gt;
拼了，外接一个千兆 USB 网卡，那到底有没有用呢？不说别的，CPU 就受不了&lt;br /&gt;
当然树莓派的 IO 性能也是个瓶颈，先来张图吧，树莓派功能模块之间的关系&lt;br /&gt;
&lt;img src=&quot;/assets/images/posts/2013-11-29_172321.svg&quot; alt=&quot;Raspberrypi block function&quot; style=&quot;width: 360px&quot; /&gt;&lt;br /&gt;
其中的 USB hub 和 Ethernet 应该就是 LAN9512 芯片，不管如何，网卡和硬盘是连在一个 USB hub 上的&lt;br /&gt;
那么这个 USB hub 的 IO 性能如何呢，可用 &lt;code class=&quot;highlighter-rouge&quot;&gt;dd if=/dev/sda of=/dev/null bs=32M count=10 iflag=direct&lt;/code&gt; 这个命令测试，
大概是 31 MB/s&lt;br /&gt;
所以，假设树莓派啥都不干，只通过硬盘和网卡传输数据，最大也就 15MB/s 的样子，150M 网卡就是极限了。
等等，既然是折腾嘛，那就继续吧。
别忘了你还有 SD 卡，这可没连在 USB hub 上哦，直接和 soc 相连的，读取速度算它 20M/s 吧。
综合起来看，SD 卡和硬盘同时读取数据，网卡负责传输数据。
理想情况下，SD 卡 20M/s，硬盘 5M/s，网卡 25M/s，实际网络传输速度 25M/s。
上 300M 网卡应该可以试试，好像也没谁那么蛋疼吧。
如果你的树莓派还充当无线 AP，那么 300M 网卡也是可以的&lt;/p&gt;

&lt;h2 id=&quot;ftp-服务器安装及配置&quot;&gt;FTP 服务器安装及配置&lt;/h2&gt;

&lt;p&gt;安装 vsftpd 软件，全名 very secure FTP daemon&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo apt-get install vsftpd
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;备份配置文件&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo cp /etc/vsftpd.conf /etc/vsftpd.conf.bak
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;创建这个文件，下面有说为什么创建它 &lt;code class=&quot;highlighter-rouge&quot;&gt;sudo touch /etc/vsftpd.chroot_list&lt;/code&gt;&lt;br /&gt;
修改配置文件 &lt;code class=&quot;highlighter-rouge&quot;&gt;sudo vim /etc/vsftpd.conf&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;language-ini highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;c&quot;&gt;# 不允许匿名者登陆
&lt;/span&gt;&lt;span class=&quot;py&quot;&gt;anonymous_enable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;NO&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# 允许本地用户登陆
&lt;/span&gt;&lt;span class=&quot;py&quot;&gt;local_enable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;YES&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# 允许用户上传数据
&lt;/span&gt;&lt;span class=&quot;py&quot;&gt;write_enable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;YES&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# 本地用户上传文件权限为 664, 文件夹为 775
&lt;/span&gt;&lt;span class=&quot;py&quot;&gt;local_umask&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;002&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# 使用本地时间
&lt;/span&gt;&lt;span class=&quot;py&quot;&gt;use_localtime&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;YES&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# 本地用户启用 chroot, 意思就是，根被改变为用户的家目录，就进不去其它目录了，当然是为了安全了
&lt;/span&gt;&lt;span class=&quot;py&quot;&gt;chroot_local_user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;YES&lt;/span&gt;
&lt;span class=&quot;py&quot;&gt;chroot_list_enable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;YES&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# 在这个列表中的账号不进行 chroot, 即使没有账号也必须要有 &quot;/etc/vsftpd.chroot_list&quot; 这个文件
&lt;/span&gt;&lt;span class=&quot;py&quot;&gt;chroot_list_file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;/etc/vsftpd.chroot_list&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# 只列出了一些的配置，还有很多可查看配置文件内部的说明，更详细请 &quot;man 5 vsftpd.conf&quot;
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;但是问题来了，从 vsftpd 2.3.5 开始，chroot 目录必须为不可写&lt;br /&gt;
最简单的解决办法就是 &lt;code class=&quot;highlighter-rouge&quot;&gt;sudo chmod ugo-w /home/pi&lt;/code&gt; （对于系统默认的 pi 用户来说）&lt;br /&gt;
但是这样又出现新问题了，家目录变成不可写了，如果你没必要在家目录里写的话那也无所谓，但如果要写呢？&lt;/p&gt;

&lt;p&gt;这里提供一个办法，而不改变原来用户家目录&lt;br /&gt;
新建一个用户 ftppi, 将它的家目录变为不可写，且 pi 和 ftppi 属于同一个组 pi，实现协作编辑。
我们上传下载使用这个目录 /home/pi/nas-data/nas-data，也是我们配置 samba 共享所使用的目录，
详情见上上个标题《&lt;a href=&quot;#安装并配置-samba&quot;&gt;安装并配置 Samba&lt;/a&gt;》&lt;br /&gt;
如果你不想让父母修改 /home/pi/nas-data/nas-data 中的文件，但是要能读取。
可以新建一个用户 ftpparents, 不将 ftpparents 用户加入组 pi 就可以了。
因为 nas-data 中的文件对于除 pi 和 ftppi 用户之外的用户是只读的&lt;br /&gt;
因 Raspbian 系统默认 umask 为 022, 所以需要一些额外的操作&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;新建一个用户 ftppi, 家目录为 /home/pi/nas-data, 指定所属组 pi&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo useradd -d /home/pi/nas-data -g pi ftppi
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;创建 ftppi 用户的密码&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo passwd ftppi
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;如果不允许 ftppi 账户登陆系统，但是能用 ftp, 做如下修改
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;sudo vim /etc/passwd&lt;/code&gt;, 找到 “ftppi” 这一行，将最后的 “/bin/bash” 改为 “/bin/false”&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;sudo vim /etc/shells&lt;/code&gt;, 添加一行 “/bin/false”&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;将家目录变为不可写&lt;br /&gt;
/home/pi/nas-data 不可写，/home/pi/nas-data/nas-data 可写（实际我们要用的是这个目录）&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo chmod 555 /home/pi/nas-data
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;将 pi 用户的 umask 修改为 002, 只有 pi 用户登陆才有效，系统才会去执行 “/home/pi/.profile” 这个脚本&lt;br /&gt;
&lt;code class=&quot;highlighter-rouge&quot;&gt;sudo vim /home/pi/.profile&lt;/code&gt;, 添加一行 “umask 002”&lt;br /&gt;
这样新建文件权限为 664，而 pi 和 ftppi 同属于 pi 组，即可相互编辑文件&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;修改 /home/pi/nas-data 文件夹内所有文件权限为 664, 文件夹权限为 775&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;find /home/pi/nas-data/ -type f -print0 | xargs -0 chmod 664
find /home/pi/nas-data/ -type d -print0 | xargs -0 chmod 775
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;以上步骤完成后，即实现了 pi 和 ftppi 可共同编辑 /home/pi/nas-data/nas-data 目录下的文件&lt;br /&gt;
一般情况下用 ftppi 登陆 ftp 就可以了&lt;br /&gt;
顺便一说，umask 为 002，方便团队协作；umask 为 022 看上去貌似是 owner, 只有自己私有（组用户和其它用户不可写）&lt;/p&gt;

&lt;h2 id=&quot;aria2-安装及配置-web-前端-迅雷离线&quot;&gt;aria2 安装及配置 + web 前端 + 迅雷离线&lt;/h2&gt;

&lt;h3 id=&quot;aria2-安装及配置&quot;&gt;aria2 安装及配置&lt;/h3&gt;

&lt;p&gt;关于这软件就不多说了，太有名了，总之占用资源少且非常好用&lt;br /&gt;
下面来安装 aria2&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;直接用 apt-get 安装的话，版本比较老（aria2 version 1.15.11），可自行编译最新版&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo apt-get install aria2
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;

    &lt;p&gt;或者改变 apt-get 的源来安装比较新的版本&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo vim /etc/apt/sources.list
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;

    &lt;p&gt;将 deb http://mirrordirector.raspbian.org/raspbian/ wheezy main contrib non-free rpi&lt;br /&gt;
改为 deb http://mirrordirector.raspbian.org/raspbian/ testing main contrib non-free rpi&lt;br /&gt;
然后更新源并安装新版的 aria2&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo apt-get update
sudo apt-get install aria2
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;

    &lt;p&gt;若继续用稳定版的系统及其它软件的话，记得把源改回来&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;创建 aria2 配置文件 “/home/pi/.aria2/aria2.conf” 和 “/home/pi/.aria2/aria2.session” 这个文件 (我是以 pi 账户启动 aria2 的), 
命令是 &lt;code class=&quot;highlighter-rouge&quot;&gt;mkdir /home/pi/.aria2&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;touch /home/pi/.aria2/aria2.session&lt;/code&gt; 和 &lt;code class=&quot;highlighter-rouge&quot;&gt;vim /home/pi/.aria2/aria2.conf&lt;/code&gt; 配置文件内容如下，只是参考&lt;/p&gt;

    &lt;div class=&quot;language-ini highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;c&quot;&gt;# 基本配置
# 下载目录
&lt;/span&gt;&lt;span class=&quot;py&quot;&gt;dir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;/home/pi/nas-data/nas-data/Inbox&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# 下载从这个文件中找到的 urls, 需自己建立这个文件
# touch /home/pi/.aria2/aria2.session
&lt;/span&gt;&lt;span class=&quot;py&quot;&gt;input-file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;/home/pi/.aria2/aria2.session&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# 最大同时下载任务数，默认 5
&lt;/span&gt;&lt;span class=&quot;py&quot;&gt;max-concurrent-downloads&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;3&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# 断点续传，只适用于 HTTP(S)/FTP
&lt;/span&gt;&lt;span class=&quot;py&quot;&gt;continue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;true&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# HTTP/FTP 配置
# 关闭连接如果下载速度等于或低于这个值，默认 0
&lt;/span&gt;&lt;span class=&quot;py&quot;&gt;lowest-speed-limit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# 对于每个下载在同一个服务器上的连接数，默认 5
&lt;/span&gt;&lt;span class=&quot;py&quot;&gt;max-connection-per-server&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;5&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# 每个文件最小分片大小，例如文件 20M，设置 size 为 10M, 则用2个连接下载，默认 20M
&lt;/span&gt;&lt;span class=&quot;py&quot;&gt;min-split-size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;10M&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# 下载一个文件的连接数，默认 5
&lt;/span&gt;&lt;span class=&quot;py&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;5&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# BT 特殊配置
# 启用本地节点查找，默认 false
&lt;/span&gt;&lt;span class=&quot;py&quot;&gt;bt-enable-lpd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;true&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# 指定最大文件数对于每个 bt 下载，默认 100
&lt;/span&gt;&lt;span class=&quot;py&quot;&gt;bt-max-open-files&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;100&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# 单种子最大连接数，默认 55
&lt;/span&gt;&lt;span class=&quot;py&quot;&gt;bt-max-peers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;55&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# 设置最低的加密级别，可选全连接加密 arc4，默认是头加密 plain
&lt;/span&gt;&lt;span class=&quot;py&quot;&gt;bt-min-crypto-level&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;plain&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# 总是使用 obfuscation handshake，防迅雷必备，默认 false
&lt;/span&gt;&lt;span class=&quot;py&quot;&gt;bt-require-crypto&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;true&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# 如果下载的是种子文件则自动解析并下载，默认 true
&lt;/span&gt;&lt;span class=&quot;py&quot;&gt;follow-torrent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;true&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# 为 BT 下载设置 TCP 端口号，确保开放这些端口，默认 6881-6999
&lt;/span&gt;&lt;span class=&quot;py&quot;&gt;listen-port&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;6881-6999&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# 整体上传速度限制，0 表示不限制，默认 0
&lt;/span&gt;&lt;span class=&quot;py&quot;&gt;max-overall-upload-limit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# 每个下载上传速度限制，默认 0
&lt;/span&gt;&lt;span class=&quot;py&quot;&gt;max-upload-limit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# 种子分享率大于1, 则停止做种，默认 1.0
&lt;/span&gt;&lt;span class=&quot;py&quot;&gt;seed-ratio&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# 做种时间大于2小时，则停止做种
&lt;/span&gt;&lt;span class=&quot;py&quot;&gt;seed-time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;120&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# RPC 配置
# 开启 JSON-RPC/XML-RPC 服务，默认 false
&lt;/span&gt;&lt;span class=&quot;py&quot;&gt;enable-rpc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;true&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# 允许所有来源，web 界面跨域权限需要，默认 false
&lt;/span&gt;&lt;span class=&quot;py&quot;&gt;rpc-allow-origin-all&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;true&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# 允许外部访问，默认 false
&lt;/span&gt;&lt;span class=&quot;py&quot;&gt;rpc-listen-all&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;true&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# rpc 端口，默认 6800
&lt;/span&gt;&lt;span class=&quot;py&quot;&gt;rpc-listen-port&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;6800&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# 设置最大的 JSON-RPC/XML-RPC 请求大小，默认 2M
&lt;/span&gt;&lt;span class=&quot;py&quot;&gt;rpc-max-request-size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;2M&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# rpc 密码，可不设置
&lt;/span&gt;&lt;span class=&quot;py&quot;&gt;rpc-passwd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;raspberry&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# rpc 用户名，可不设置
&lt;/span&gt;&lt;span class=&quot;py&quot;&gt;rpc-user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;aria2pi&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# 高级配置
# This is useful if you have to use broken DNS and
# want to avoid terribly slow AAAA record lookup.
# 默认 false
&lt;/span&gt;&lt;span class=&quot;py&quot;&gt;disable-ipv6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;true&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# 指定文件分配方法，预分配能有效降低文件碎片，提高磁盘性能，缺点是预分配时间稍长
# 如果使用新的文件系统，例如 ext4 (with extents support), btrfs, xfs or NTFS(MinGW build only), falloc 是最好的选择
# 如果设置为 none，那么不预先分配文件空间，默认 prealloc
&lt;/span&gt;&lt;span class=&quot;py&quot;&gt;file-allocation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;falloc&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# 整体下载速度限制，默认 0
&lt;/span&gt;&lt;span class=&quot;py&quot;&gt;max-overall-download-limit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# 每个下载下载速度限制，默认 0
&lt;/span&gt;&lt;span class=&quot;py&quot;&gt;max-download-limit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# 保存错误或者未完成的下载到这个文件
# 和基本配置中的 input-file 一起使用，那么重启后仍可继续下载
&lt;/span&gt;&lt;span class=&quot;py&quot;&gt;save-session&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;/home/pi/.aria2/aria2.session&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# 每5分钟自动保存错误或未完成的下载，如果为 0, 只有 aria2 正常退出才回保存，默认 0
&lt;/span&gt;&lt;span class=&quot;py&quot;&gt;save-session-interval&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;300&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# 若要用于 PT 下载，需另外的配置，这里没写
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;

    &lt;p&gt;什么你配置得还不过瘾，请移步《&lt;a href=&quot;http://aria2.sourceforge.net/manual/en/html/aria2c.html#options&quot;&gt;官方配置文档&lt;/a&gt;》，
看完记得过来指正我这个配置的不当之处，我表示我只看了一部分&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;运行 aria2, 测试配置是否有错误&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;aria2c --conf-path=/home/pi/.aria2/aria2.conf
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;为 aria2 添加自启动服务&lt;/p&gt;

    &lt;ol&gt;
      &lt;li&gt;
        &lt;p&gt;新建 &lt;code class=&quot;highlighter-rouge&quot;&gt;sudo vim /etc/init.d/aria2&lt;/code&gt; 文件，输入以下内容&lt;/p&gt;

        &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;c&quot;&gt;#!/bin/sh&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;### BEGIN INIT INFO&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# Provides:          aria2&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# Required-Start:    $remote_fs $network&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# Required-Stop:     $remote_fs $network&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# Default-Start:     2 3 4 5&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# Default-Stop:      0 1 6&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# Short-Description: Aria2 Downloader&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;### END INIT INFO&lt;/span&gt;

&lt;span class=&quot;nv&quot;&gt;USER&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;pi
&lt;span class=&quot;nv&quot;&gt;CONF&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/home/pi/.aria2/aria2.conf

&lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$1&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in
&lt;/span&gt;start&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Start aria2c&quot;&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;umask &lt;/span&gt;0002
    su - &lt;span class=&quot;nv&quot;&gt;$USER&lt;/span&gt; -c &lt;span class=&quot;s2&quot;&gt;&quot;aria2c --conf-path=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$CONF&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; -D&quot;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;;;&lt;/span&gt;
stop&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Stopping aria2c, please wait...&quot;&lt;/span&gt;
    killall -w aria2c
    &lt;span class=&quot;p&quot;&gt;;;&lt;/span&gt;
restart&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Stopping aria2c, please wait...&quot;&lt;/span&gt;
    killall -w aria2c
    &lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Start aria2c&quot;&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;umask &lt;/span&gt;0002
    su - &lt;span class=&quot;nv&quot;&gt;$USER&lt;/span&gt; -c &lt;span class=&quot;s2&quot;&gt;&quot;aria2c --conf-path=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$CONF&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; -D&quot;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$0&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; {start|stop|restart|status}&quot;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;esac&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;exit&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
        &lt;/div&gt;

        &lt;p&gt;本来我新建的是 /etc/init.d/aria2c 文件，但是其中的 killall -w aria2c, 这用的是字符串匹配，
不光 kill 了 aria2c 还把脚本本身给 kill 了，所以我把脚本文件名改成了 aria2&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;赋予可执行权限&lt;/p&gt;

        &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo chmod 755 /etc/init.d/aria2
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
        &lt;/div&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;测试服务是否可以启动&lt;/p&gt;

        &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo service aria2 start
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
        &lt;/div&gt;

        &lt;p&gt;如果出现 “Start aria2c”, 而没有其它错误的话，表示服务可以正常启动&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;使 aria2 服务自动运行，其中当然也包括了开机运行&lt;/p&gt;

        &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo update-rc.d aria2 defaults
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
        &lt;/div&gt;
      &lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;web-前端的配置-yaaw-和-webui-aria2&quot;&gt;web 前端的配置 yaaw 和 webui-aria2&lt;/h3&gt;

&lt;p&gt;yaaw 和 webui-aria2 都是不错的，yaaw 界面简洁，wubui-aria2 功能强大，可以根据自己的喜好来选择，或者两个同时使用也可以&lt;/p&gt;

&lt;p&gt;首先保证 aria2c 正常运行着，然后进行下面的动作&lt;/p&gt;

&lt;p&gt;YAAW&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;a href=&quot;http://binux.github.io/yaaw/&quot;&gt;YAAW&lt;/a&gt;, 这是 yaaw 的主页，打开它&lt;/li&gt;
  &lt;li&gt;打开左边的 &lt;a href=&quot;http://binux.github.io/yaaw/demo/&quot;&gt;Live Demo&lt;/a&gt; 链接&lt;/li&gt;
  &lt;li&gt;点击右上角的小扳手，在 JSON-RPC Path 中填入 “http://raspberrypi-ip:6800/jsonrpc”&lt;br /&gt;
如果设置了 rpc 密码，那么填入 “http://user:passwd@raspberrypi-ip:6800/jsonrpc”&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/posts/2013-12-24_115952.png&quot; alt=&quot;yaaw&quot; /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;webui-aria2&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/ziahamza/webui-aria2&quot;&gt;webui-aria2&lt;/a&gt;, 这是 webui-aria2 的主页，打开它&lt;/li&gt;
  &lt;li&gt;在其中找到这个链接 &lt;a href=&quot;http://ziahamza.github.com/webui-aria2/&quot;&gt;http://ziahamza.github.com/webui-aria2/&lt;/a&gt;, 打开&lt;/li&gt;
  &lt;li&gt;点击 “Settings” - “Connection Settings”, 一看你就明白了&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/posts/2013-12-24_120002.png&quot; alt=&quot;webui-aria2&quot; /&gt;&lt;/p&gt;

&lt;p&gt;以上两个工具都是用 HTML/CSS/Javascirpt 写的，你也可以下载下来，扔到网页服务器，本地服务器虚拟主机随你玩&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;常见问题&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;若无法连接到 web 前端，请手动访问你的 JSON-RPC 地址 http://raspberrypi-ip:6800/jsonrpc?jsoncallback=1, 
如果没有返回，请确认 aria2 是否启动以及连通性&lt;br /&gt;
如果是从外网访问的, 别忘记在路由器上做好 ddns 和端口映射&lt;/p&gt;

&lt;h3 id=&quot;迅雷离线下载&quot;&gt;迅雷离线下载&lt;/h3&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/binux/ThunderLixianExporter&quot;&gt;ThunderLixianExporter&lt;/a&gt;, 将迅雷离线地址导出成 aria2/wget 等下载命令的工具&lt;br /&gt;
&lt;a href=&quot;https://github.com/ohsc/ThunderLixianAssistant&quot;&gt;ThunderLixianAssistant&lt;/a&gt;, 
这个项目是上个项目在 chrome 上的一个封装&lt;br /&gt;
以上两个工具使用方法在主页中已经说的很详细了，就不多说了&lt;br /&gt;
导出功能没有一个个去试，实测导出 yaaw 可用&lt;/p&gt;

&lt;h3 id=&quot;aria2-出现问题的解决方法&quot;&gt;aria2 出现问题的解决方法&lt;/h3&gt;

&lt;p&gt;有读者反馈，aria2 出问题还蛮多的，我就写一点解决的方法&lt;/p&gt;

&lt;p&gt;若 yaaw 无法使用，首先看看 aria2 是否启动以及连通性，前面不远处有说明&lt;/p&gt;

&lt;p&gt;还有一些是 aria2 本身出现了问题，这里面出现问题的可能性就多了，
我只是说一下检测问题的方法，知道了问题之后，google 一下就能解决了&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;首先把 aria2 进程关闭，使用命令 &lt;code class=&quot;highlighter-rouge&quot;&gt;sudo killall -w aria2c&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;使用 &lt;code class=&quot;highlighter-rouge&quot;&gt;aria2c --conf-path=/home/pi/.aria2/aria2.conf&lt;/code&gt; 命令来运行 aria2&lt;/li&gt;
  &lt;li&gt;这样就能看到 aria2 的反馈，可能会出现一些 [ERROR] 提示，这样你就知道问题具体出现在哪里了&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;磁盘阵列-raid1-与异地备份&quot;&gt;磁盘阵列 RAID1 与异地备份&lt;/h2&gt;

&lt;p&gt;一个硬盘，不管它来自什么厂商，也不管它是机械的还是固态的，它出现故障只是时间早晚的问题&lt;br /&gt;
一个人，不管 TA 来自什么地方，也不管 TA 是男的还是女的，TA 总有误操作的时候&lt;br /&gt;
我就不信你们没有丢过一点数据！&lt;/p&gt;

&lt;p&gt;既然问题摆在面前那怎么办呢？&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;我觉得对于实时更新的重要数据至少本地 raid + 异地备份&lt;/li&gt;
  &lt;li&gt;对于需要永久保存的数据来说至少异地备份&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;最好还要加上版本控制功能&lt;br /&gt;
当然你还得注意硬盘的健康状况，真的是比人还要脆弱&lt;br /&gt;
btrfs 文件系统的一些特性非常不错，快照，克隆，字卷，校验等，
不知道现在稳定到什么程度了，听说上个月在最新的 Linux 稳定版内核 3.12 中被修改成了 stable, 
有时间去试一试&lt;/p&gt;

&lt;p&gt;这篇文章比较长，关于如何在树莓派上组建磁盘阵列 raid1, 我另外写了一篇文章
《&lt;a href=&quot;http://www.dreamxu.com/debian-create-software-raid-one-arrays/&quot;&gt;Debian 组建软 RAID 1 磁盘阵列&lt;/a&gt;》&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;下面就来说说怎么异地备份吧，使用 rsync 工具, 且通过 ssh 传输，比较安全&lt;br /&gt;
在本地主机上（将树莓派中的数据备份到这个机子）操作&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;首先创建公钥和私钥，一路回车就可以了。假设生成为 “~/.ssh/id_rsa” 和 “~/.ssh/id_rsa.pub”&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;ssh-keygen -t rsa
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;将私钥加入 ssh-agent&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;ssh-add ~/.ssh/id_rsa
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;将公钥复制到树莓派上&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;ssh-copy-id pi@192.168.1.2
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;执行下面的命令，作用是：保存所有文件属性与权限，删除 dst 中 src 没有的文件（传输结束以后再删除），
通过 ssh 将 192.168.1.2 机子中 “/home/pi/nas-data/nas-data/save/” 目录备份到本地主机 “/home/mwum/save/” 目录，
并且显示详细信息&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;rsync -av -delete-after -e ssh pi@192.168.1.2:/home/pi/nas-data/nas-data/save/ /home/mwum/save/
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;如果需要定时执行备份，方法如下&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;编辑当前用户的任务&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;crontab -e
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;例如加入一行，表示每天凌晨2点自动备份&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;0 2 * * * rsync -av -delete-after -e ssh pi@192.168.1.2:/home/pi/nas-data/nas-data/save/ /home/mwum/save/
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;

    &lt;p&gt;基本格式，共 6 列，如下&lt;br /&gt;
分钟(0-59) | 小时(0-23) | 日期(1-31) | 月份(1-12) 星期(0-6, 0 表示星期日) | 命令&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;如果是通过外网访问，也是一样的，把 ip 改一下就可以了&lt;br /&gt;
若没有固定的公网 ip, 请使用 ddns; 若使用了路由器，请设置端口映射&lt;/p&gt;

&lt;p&gt;不知不觉写那么多了，就告一段落吧，为啥是今天呢，是一部动画完结的日子&lt;/p&gt;
</description>
        <pubDate>Tue, 24 Dec 2013 00:00:00 +0800</pubDate>
        
        <link>http://www.dreamxu.com/raspberrypi-nas/</link>
        <guid isPermaLink="true">http://www.dreamxu.com/raspberrypi-nas/</guid>
        
        <category>技术</category>
        
        <category>树莓派</category>
        
        <category>Nas</category>
        
        <category>Samba</category>
        
        <category>vsftpd</category>
        
        <category>aria2</category>
        
        <category>rsync</category>
        
        <category>crontab</category>
        
      </item>
    
      <item>
        <title>Debian 组建软 RAID 1 磁盘阵列</title>
        <description>&lt;p&gt;现状：共有2块硬盘当做数据盘，一块 500G(sda), 另一块 2T(sdb)&lt;br /&gt;
要实现的：sda 和 sdb 其中的 500G 组成 raid1, sdb 剩下的当做普通数据盘，
并且当 raid 出现问题的时候，发送邮件通知你&lt;/p&gt;

&lt;p&gt;使用 &lt;code class=&quot;highlighter-rouge&quot;&gt;sudo fdisk /dev/sdx&lt;/code&gt; 命令进行分区，按照提示操作就可以了&lt;br /&gt;
分区之后情况如下&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;Disk /dev/sda: 500.1 GB, 500107862016 bytes
45 heads, 63 sectors/track, 344540 cylinders, total 976773168 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x3184df24

   Device Boot      Start         End      Blocks   Id  System
/dev/sda1            2048   976773167   488385560   83  Linux

Disk /dev/sdb: 2000.4 GB, 2000365289472 bytes
255 heads, 63 sectors/track, 243197 cylinders, total 3906963456 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0xe0894113

   Device Boot      Start         End      Blocks   Id  System
/dev/sdb1            2048   976773167   488385560   83  Linux
/dev/sdb2       976773168  3906963455  1465095144   83  Linux
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;下面开始将 sda1 和 sdb1 组建成 raid1&lt;/p&gt;

&lt;h2 id=&quot;创建与配置&quot;&gt;创建与配置&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;将 sda1 和 sdb1 的分区类型改为 Linux raid autodetect, 以 sda1 为例&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;$ sudo fdisk /dev/sda

Command (m for help): t
Selected partition 1
Hex code (type L to list codes): fd
Changed system type of partition 1 to fd (Linux raid autodetect)

Command (m for help): w
The partition table has been altered!
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;

    &lt;p&gt;修改好之后分区情况如下&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;Disk /dev/sda: 500.1 GB, 500107862016 bytes
45 heads, 63 sectors/track, 344540 cylinders, total 976773168 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x3184df24

   Device Boot      Start         End      Blocks   Id  System
/dev/sda1            2048   976773167   488385560   fd  Linux raid autodetect

Disk /dev/sdb: 2000.4 GB, 2000365289472 bytes
255 heads, 63 sectors/track, 243197 cylinders, total 3906963456 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0xe0894113

   Device Boot      Start         End      Blocks   Id  System
/dev/sdb1            2048   976773167   488385560   fd  Linux raid autodetect
/dev/sdb2       976773168  3906963455  1465095144   83  Linux
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;安装 mdadm&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo apt-get install mdadm
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;创建磁盘阵列，raid 设备名称 md0, 指定 raid 级别 1, raid 磁盘数 2 且分别为 /dev/sda1 和 /dev/sdb1&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo mdadm --create --verbose /dev/md0 --level=1 --raid-devices=2 /dev/sda1 /dev/sdb1
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;

    &lt;p&gt;出现 “mdadm: array /dev/md0 started.”, 就算成功了&lt;/p&gt;

    &lt;p&gt;看似创建好了，实际上还没有，还在后台进行同步，同步完成之后才算彻底完工，但是现在就可以正常使用了&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;可用 &lt;code class=&quot;highlighter-rouge&quot;&gt;cat /proc/mdstat&lt;/code&gt; 命令查看磁盘阵列状态，正在同步中，不过好漫长啊（这机子 IO 性能比较弱），不过对于 24 小时开机的设备来说也算不了什么&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;Personalities : [raid1]
md0 : active raid1 sdb1[1] sda1[0]
      488254336 blocks super 1.2 [2/2] [UU]
      [&amp;gt;....................]  resync =  0.1% (942528/488254336) finish=469.6min speed=17292K/sec

unused devices: &amp;lt;none&amp;gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;

    &lt;p&gt;可用 &lt;code class=&quot;highlighter-rouge&quot;&gt;sudo mdadm --detail /dev/md0&lt;/code&gt; 命令查看磁盘阵列 md0 的详细信息&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;保存配置文件，不保存配置文件也可以，但是可能会出问题&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo mdadm --detail --scan | sudo tee -a /etc/mdadm/mdadm.conf
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;就像平常使用 sda1 那样使用 md0, 对 md0 进行格式化&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo mkfs.ext4 /dev/md0
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;如果要开机自动挂载磁盘阵列，编辑 &lt;code class=&quot;highlighter-rouge&quot;&gt;sudo vim /etc/fstab&lt;/code&gt;, 例如加入如下内容&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;/dev/md0    /media/data     ext4    defaults    0   0
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;监控&quot;&gt;监控&lt;/h2&gt;

&lt;p&gt;磁盘阵列出现问题的时候，发送邮件通知你&lt;br /&gt;
好心发给你可别忽略了，要不然你会付出代价的&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;安装 ssmtp&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo apt-get install ssmtp
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;配置 ssmtp, &lt;code class=&quot;highlighter-rouge&quot;&gt;sudo vim /etc/ssmtp/ssmtp.conf&lt;/code&gt;, 以 gmail 邮箱为例&lt;/p&gt;

    &lt;div class=&quot;language-ini highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;c&quot;&gt;#
# Config file for sSMTP sendmail
#
# The person who gets all mail for userids &amp;lt; 1000
# Make this empty to disable rewriting.
&lt;/span&gt;&lt;span class=&quot;py&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;postmaster&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# The place where the mail goes. The actual machine name is required no-
# MX records are consulted. Commonly mailhosts are named mail.domain.com
&lt;/span&gt;&lt;span class=&quot;py&quot;&gt;mailhub&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;smtp.gmail.com:587&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Where will the mail seem to come from?
#rewriteDomain=
&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# The full hostname
&lt;/span&gt;&lt;span class=&quot;py&quot;&gt;hostname&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;YourHostname&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Are users allowed to set their own From: address?
# YES - Allow the user to specify their own From: address
# NO - Use the system generated From: address
&lt;/span&gt;&lt;span class=&quot;py&quot;&gt;FromLineOverride&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;YES&lt;/span&gt;
&lt;span class=&quot;py&quot;&gt;UseSTARTTLS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;YES&lt;/span&gt;
&lt;span class=&quot;py&quot;&gt;UseTLS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;YES&lt;/span&gt;
&lt;span class=&quot;py&quot;&gt;AuthUser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;YourUsername@gmail.com&lt;/span&gt;
&lt;span class=&quot;py&quot;&gt;AuthPass&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;YourPassword&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;因为密码是明文存储的，安全起见修改配置文件的权限&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo chmod 660 /etc/ssmtp/ssmtp.conf
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;测试 ssmtp 是否配置正确，若 “mwum@dreamxu.com”(填写你自己的邮箱) 收到邮件，就算成功了&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;echo &quot;ssmtp-test&quot; | sudo ssmtp mwum@dreamxu.com
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;编辑 mdadm 配置文件，&lt;code class=&quot;highlighter-rouge&quot;&gt;sudo vim /etc/mdadm/mdadm.conf&lt;/code&gt;, 加入以下内容，若原来存在如下配置，替换就行&lt;/p&gt;

    &lt;div class=&quot;language-ini highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;c&quot;&gt;# 填写你自己的邮箱
&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;MAILADDR&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;mwum@dreamxu.com&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;MAILFROM&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;YourUsername@gmail.com&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;测试 mdadm 配置是否正确，若能收到测试邮件，那就成功了&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo mdadm --monitor /dev/md0 --test
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;

    &lt;p&gt;到这，你就可以安心睡觉了&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;彻底删除&quot;&gt;彻底删除&lt;/h2&gt;

&lt;p&gt;删除需谨慎，都是满满的数据&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;首先停止正在运行的 raid 设备，如果挂载了，那么先卸载了&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo mdadm --stop /dev/md0
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;清除磁盘中的 raid 信息，也就是清除 super block 中的信息。执行之后数据也就没有了，请谨慎操作&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo mdadm --zero-superblock /dev/sda1
sudo mdadm --zero-superblock /dev/sdb1
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;清除添加到 /etc/mdadm/mdadm.conf 中的信息&lt;br /&gt;
如果设置了 fstab, 那么删除其中关于 raid 的信息&lt;br /&gt;
重新分区格式化来使用磁盘&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;故障处理&quot;&gt;故障处理&lt;/h2&gt;

&lt;p&gt;对一些情况进行处理&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;如果其中的一块磁盘损坏了，比如说 sda1&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;$ cat /proc/mdstat

Personalities : [raid1]
md0 : active raid1 sdb1[1] sda1[0](F)
      488254336 blocks super 1.2 [2/1] [_U]

unused devices: &amp;lt;none&amp;gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;

    &lt;ol&gt;
      &lt;li&gt;
        &lt;p&gt;从磁盘阵列 md0 中移除损坏的设备 sda1&lt;/p&gt;

        &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo mdadm /dev/md0 --remove /dev/sda1
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
        &lt;/div&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;更换新磁盘，对其进行分区并标记分区类型为 Linux raid autodetect, 例如为 sda1, 也可能是其它的&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;添加 sda1 到磁盘阵列 md0 中，系统会自动重建数据的&lt;/p&gt;

        &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo mdadm /dev/md0 --add /dev/sda1
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
        &lt;/div&gt;
      &lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;想更换一个新磁盘，比如说把 sdb1 给替换掉&lt;/p&gt;

    &lt;ol&gt;
      &lt;li&gt;
        &lt;p&gt;标记 sdb1 损坏&lt;/p&gt;

        &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo mdadm /dev/md0 --fail /dev/sdb1
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
        &lt;/div&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;接下去的步骤和上一种情况一样，就不赘述了&lt;/p&gt;
      &lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;如果不幸操作系统崩溃了或者主机坏了怎么办？不急，咱有的是办法&lt;/p&gt;

    &lt;ol&gt;
      &lt;li&gt;
        &lt;p&gt;重装系统之后或者将两个磁盘接到其它的电脑上，在这个系统上装好 mdadm&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;使用 &lt;code class=&quot;highlighter-rouge&quot;&gt;sudo fdisk -l&lt;/code&gt; 命令查看磁盘信息，原来的磁盘在新的系统上分别为 sdd1, sde1&lt;/p&gt;

        &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;Disk /dev/sdd: 500.1 GB, 500107862016 bytes
45 heads, 63 sectors/track, 344540 cylinders, total 976773168 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x3184df24

   Device Boot      Start         End      Blocks   Id  System
/dev/sdd1            2048   976773167   488385560   fd  Linux raid autodetect

Disk /dev/md127: 500.0 GB, 499972440064 bytes
2 heads, 4 sectors/track, 122063584 cylinders, total 976508672 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x00000000

Disk /dev/md127 doesn&#39;t contain a valid partition table

Disk /dev/sde: 2000.4 GB, 2000365289472 bytes
255 heads, 63 sectors/track, 243197 cylinders, total 3906963456 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0xe0894113

   Device Boot      Start         End      Blocks   Id  System
/dev/sde1            2048   976773167   488385560   fd  Linux raid autodetect
/dev/sde2       976773168  3906963455  1465095144   83  Linux
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
        &lt;/div&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;测试的时候，我将两个磁盘插到新的电脑上，它自动重组成磁盘阵列 md127 了，但是是只读的&lt;br /&gt;
先停止其运行&lt;/p&gt;

        &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo mdadm --stop /dev/md127
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
        &lt;/div&gt;

        &lt;p&gt;然后执行这个命令，如果没有自动重组，那么直接执行这个命令即可&lt;/p&gt;

        &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo mdadm --assemble /dev/md0 /dev/sdd1 /dev/sde1
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
        &lt;/div&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;保存配置文件，配置 fstab，上面都有就不讲了&lt;/p&gt;
      &lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;如何使用其中的一块盘来读取数据？&lt;/p&gt;

    &lt;ol&gt;
      &lt;li&gt;
        &lt;p&gt;强行用其中的一个磁盘来组成磁盘阵列 raid1, 例如使用磁盘 sde1&lt;/p&gt;

        &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo mdadm --create --verbose /dev/md0 --level=1 --force --raid-devices=1 /dev/sde1
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
        &lt;/div&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;挂载 md0 并读取数据即可&lt;/p&gt;

        &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo mount /dev/md0 /mnt
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
        &lt;/div&gt;
      &lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;
&lt;p&gt;参考&lt;br /&gt;
&lt;a href=&quot;https://raid.wiki.kernel.org/index.php/RAID_setup&quot;&gt;https://raid.wiki.kernel.org/index.php/RAID_setup&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://en.wikipedia.org/wiki/Mdadm&quot;&gt;http://en.wikipedia.org/wiki/Mdadm&lt;/a&gt;&lt;br /&gt;
&lt;code class=&quot;highlighter-rouge&quot;&gt;man mdadm&lt;/code&gt;&lt;/p&gt;
</description>
        <pubDate>Wed, 11 Dec 2013 00:00:00 +0800</pubDate>
        
        <link>http://www.dreamxu.com/debian-create-software-raid-one-arrays/</link>
        <guid isPermaLink="true">http://www.dreamxu.com/debian-create-software-raid-one-arrays/</guid>
        
        <category>记录</category>
        
        <category>Debian</category>
        
        <category>RAID</category>
        
        <category>mdadm</category>
        
      </item>
    
      <item>
        <title>转载 - IT 民工避免猝死攻略 v1.0</title>
        <description>&lt;p&gt;&lt;img src=&quot;/assets/images/posts/2013-11-04_212931.jpg&quot; alt=&quot;IT民工避免猝死攻略&quot; /&gt;\
[核心提示] 大多数 IT 民工的职业病主要是来自长期保持固定坐姿，以及不健康的工作方式导致。
我根据自己的实践经历，给大家分享一些“如何更健康地工作”的信息。&lt;/p&gt;

&lt;p&gt;大概在两个月前，我把 Blog 的说明改成了一句话：&lt;strong&gt;远离颈椎病，买个支架吧&lt;/strong&gt;。&lt;/p&gt;

&lt;p&gt;现在，我终于有时间可以好好写写这个话题：IT 民工在超长时间面对电脑、设备的大背景下，&lt;strong&gt;如何避免出现工作性的身体隐患？&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;IT 民工的常见疾病、健康问题包括：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;颈椎病&lt;/li&gt;
  &lt;li&gt;腰背痛/腰椎间盘突出&lt;/li&gt;
  &lt;li&gt;体脂肪率超标&lt;/li&gt;
  &lt;li&gt;上肢功能障碍&lt;/li&gt;
  &lt;li&gt;鼠标手/手腕部重复性压力伤害&lt;/li&gt;
  &lt;li&gt;惯性失眠及生物钟紊乱&lt;/li&gt;
  &lt;li&gt;疲劳工作导致猝死&lt;/li&gt;
  &lt;li&gt;信息焦虑症&lt;/li&gt;
  &lt;li&gt;干眼症等视疲劳综合征&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;以上绝不是危言耸听，我不断从身边的朋友、同事听到关于腰酸背痛的抱怨，我自己受到不同程度鼠标手以及轻微肥胖的困扰。
大多数 IT 民工的职业病主要是来自长期保持固定坐姿，以及不健康的工作方式导致。
我根据自己的实践经历，给大家分享一些“如何更健康地工作”的信息。&lt;/p&gt;

&lt;h2 id=&quot;一小时起身走一走，给身体放放假&quot;&gt;一小时起身走一走，给身体放放假&lt;/h2&gt;

&lt;p&gt;以前读书的时候，学校的课程表基本都是上课四十五分钟，然后下课休息十分钟。
而我从没有遇过小孩子因为读书，然后导致颈椎病、腰间盘突出的，
至于写字带来的铅笔手更是闻所未闻了，事实上小孩子的身体骨架比大人的更脆弱。&lt;/p&gt;

&lt;p&gt;给我的借鉴就是，忙中有闲，远离疾病。
工作五十分钟，起来喝口水、抽根烟，到窗边望望远处，跟同事聊聊天，顺便还能增进人际关系。
实现的方式，可以设置工作时间的每五十分钟提醒。
此外，水杯的容量不要超过 300ml，这样在正常的喝水速度你差不多每个小时都能意识到要添水了，变相实现中间休息。&lt;/p&gt;

&lt;h2 id=&quot;保持屏幕与视线平齐，避免颈椎病&quot;&gt;保持屏幕与视线平齐，避免颈椎病&lt;/h2&gt;

&lt;p&gt;我有看到很多朋友带笔记本到公司工作，然后低着头敲打键盘辛苦工作，心里都不由地一阵菊花一紧。
这种低头干活，是存心要让颈椎病找上自己的节奏，颈椎病的主要致病原因就是颈椎长期保持一个固定的非放松的角度。
如下图：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/posts/2013-11-04_214329.jpg&quot; alt=&quot;保持屏幕与视线平齐&quot; /&gt;&lt;/p&gt;

&lt;p&gt;更正确的选择，是让眼睛与工作屏幕保持平齐，即便是不能保持平齐，也是与放松位置的角度越小越好。
要实现这个目标有两种方法，降低人的高度（即调节座椅），提升工作屏幕的的高度。&lt;/p&gt;

&lt;p&gt;前者取决于公司配备的工作椅是否靠谱，但并不是越低越好，后面会提到。
在提升工作屏幕高度的部分，有两种方法，
第一是使用台式机或外接显示器，他们通常拥有更高的默认高度与更大的高度调节范围；
第二种方法面向信仰人机一体、不愿意使用垃圾台式机、垃圾繁琐外接显示器的 IT 民工，就是笔记本支架。&lt;/p&gt;

&lt;p&gt;在国内，最早笔记本支架是以散热底座的方式出现，下面通常会配备一个或以上的风扇来帮助电脑在夏季散热，但他在调节体位方面能起到更好的作用。
一个不合格的支架很难达到好的功用，如何去评判一个笔记本支架的好坏？&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;高度是否可调，以及调节的范围是否充足，以适应不同身高、不同座椅高度的搭配。&lt;/li&gt;
  &lt;li&gt;支架强度是否足够，对于笔记本在任何高度是否有稳固固定。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/posts/2013-11-04_214804.jpg&quot; alt=&quot;三种笔记本支架&quot; /&gt;&lt;/p&gt;

&lt;p&gt;我自己购买过超过 10 款笔记本支架，挑选了三款经常能看到的，其中不乏大牌且售价高昂的产品。&lt;br /&gt;
一号是各大电商、淘宝每年热卖的笔记本支架，但由于支架高度太低，基本起不到任何的保护颈椎作用，只能当风扇用了。&lt;/p&gt;

&lt;p&gt;二号的做工很赞，价格也很骚包，但硬伤是无法调节高度。
设计师的想法是，我知道大多数人的工作高度，然后我来帮你决定一个适合的高度，
重点是要保持产品简洁，匹配 MacBook 的 B 格，但事实证明，这就是胡扯。&lt;/p&gt;

&lt;p&gt;三号在淘宝的销量不少，我之前也买了两个，计划公司、家里各一个，但是现在都出掉了。
核心的原因是，物理机构实在是太简单，然后 Macbook 放上去实在太没有安全感了，简洁到简陋的程度了，除了便宜别无长处。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/posts/2013-11-04_215031.jpg&quot; alt=&quot;相同高度&quot; /&gt;&lt;/p&gt;

&lt;p&gt;最后给大家推荐两款我跟朋友使用过，能有效保护颈椎的笔记本支架。
第一款是&lt;a href=&quot;http://www.acttochina.com/product_info.asp?nid=108&quot;&gt;安尚 ACCTO 的 NBS-03&lt;/a&gt;，主流电商都有售，售价不超过￥50，这是我目前在使用的，使用大支架设计，稳固有保障，高度可调。&lt;/p&gt;

&lt;p&gt;唯一的缺陷是由于后部调节高度的设计，导致像 MacBook 这种屏幕仰角不够的笔记本电脑，无法达到正常正常视角下的足够高度（大多数人够用了），
这句话的意思是如果高度上去了，那么可能屏幕角度就不能平视了，否则在重心允许的情况下可以实现非常夸张的高度提升，如上图说明。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/posts/2013-11-04_215635.jpg&quot; alt=&quot;HiRise支架&quot; /&gt;&lt;/p&gt;

&lt;p&gt;第二款是 &lt;a href=&quot;http://twelvesouth.com/products/hirise_macbook/&quot;&gt;Twelve South 出品的 HiRise 支架&lt;/a&gt;，金属支架、整体高度可调（居然还是液压的）。
啥，你说缺点？官方售价 $69.99，国内海淘售价没有低于￥500的，绝对的高帅富专用。
如果像我这样的，公司一个家里一个，天，破产。&lt;/p&gt;

&lt;p&gt;关于护颈椎其它一些小技巧，也包括之前提到的一小时走一走，
以及不定时前后左右活动一下脖子，也就是颈椎，让他可以在长时间的固定工作之余可以放松下。&lt;/p&gt;

&lt;h2 id=&quot;一把好腰靠，保护你的腰椎&quot;&gt;一把好腰靠，保护你的腰椎&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/posts/2013-11-04_215643.jpg&quot; alt=&quot;三种对腰椎毫无帮助的椅子&quot; /&gt;&lt;/p&gt;

&lt;p&gt;去过不少在北京跟外地的互联网公司，他们给员工配备的工作椅多数是以上三种中的一种，区别主要体现在：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;软的还是硬的&lt;/li&gt;
  &lt;li&gt;是否可调节高度&lt;/li&gt;
  &lt;li&gt;有无扶手&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;但其实这三种都是属于一个水准的，他们所具备的附加值跟保护你的腰椎毫无帮助，并不是所有的有网面、有头靠的椅子都能被称作人体工学椅。
一把合格的人体工学椅，最基本的要求就是有合格、可调节的腰靠，他能够最大限度帮助你在长期保持坐姿的时候，避免腰部损伤。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/posts/2013-11-04_215655.jpg&quot; alt=&quot;正确的坐姿、拿笔姿势&quot; /&gt;&lt;/p&gt;

&lt;p&gt;我们先来复习一下小学必修的正确坐姿：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;双肩平正放松，立腰、挺胸、上体自然挺直。
  双膝自然并拢，双腿正放或侧放。
  至少坐满椅子的2/3，脊背轻靠椅背。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/posts/2013-11-04_215704.jpg&quot; alt=&quot;腰靠&quot; /&gt;&lt;/p&gt;

&lt;p&gt;而面对每天长时间的端坐，想要保持挺胸抬头良好的坐姿，避免腰椎间盘突出。
腰靠就是关键了，腰靠是为了弥补椅子本身的腰部支撑不足，
因为每个人的尺寸习惯差异导致椅子不能做东啊最好匹配，
这就是为什么万元以上的人体工学那么贵的原因，人家基本全都能调节，腰部、头部支撑都是小事情，想怎么支撑就怎么支撑。&lt;/p&gt;

&lt;p&gt;如上图，腰靠就是这货，
有车的朋友应该不陌生，淘宝一搜索一大堆，价格多都在 100 以内，
这货本身也没有太多技术含量，依靠松紧带固定在椅子上。
选购腰靠需要考虑的部分：椅子的深度、自己的坐姿、对支撑感受的需求。&lt;/p&gt;

&lt;p&gt;很多公司都声称员工是自己的最重要资产，
如果有预算的话就给员工配备高品质的人体工学椅如 Herman Miller（&lt;a href=&quot;http://itbbs.pconline.com.cn/diy/14559314.html&quot;&gt;人体工学电脑椅选购建议&lt;/a&gt;），
还有大屏幕显示器，预算不足的话就给员工配备一个笔记本支架，
一台说得过去的可调高度、仰度、有头靠的椅子，再加一把不贵但可靠的腰靠。&lt;/p&gt;

&lt;h2 id=&quot;站立办公，可行但不可持久&quot;&gt;站立办公，可行但不可持久&lt;/h2&gt;

&lt;p&gt;站立办公的确对避免腰椎伤害有立竿见影效果，但会采用这种方式的多半已经是受到腰痛困扰，
并且对于已有办公桌需要进行一定程度的改造，对于预防腰椎工作疾病并没有比较好的效果。
而在我身边，我几乎没有发现能长期坚持站立办公的，当然也有少量高帅富已经不用每天办公，
用手机处理邮件即可，但这已经不是我们讨论的范畴。&lt;/p&gt;

&lt;p&gt;建议是，有条件的公司可以设立站立办公区，然后让坐着跟站着的同学每半个小时轮换，
培养站立办公的习惯。对于不具备条件的公司，咱还是老老实实腰靠，然后多起来走一走，人没有累死的，只有懒死的。&lt;/p&gt;

&lt;h2 id=&quot;一些其它关于健康的建议&quot;&gt;一些其它关于健康的建议&lt;/h2&gt;

&lt;p&gt;人类之所以能不断进步，是因为从来不放弃对更美好生活的渴望与追求，
我们在获得新技术带来便利的同时，也不得不承受这些技术对我们的生活、身体带来的改变。&lt;/p&gt;

&lt;p&gt;每天保持 1 万步的步行（计步器很好用），上班提前两站地铁、四站公交可以达成这个目标。
每周两次超过半小时有氧运动，例如跑步、羽毛球、游泳等等，最好有小伙伴一起，比较容易坚持下去。&lt;/p&gt;

&lt;p&gt;尽量早完成工作、早点休息，晚睡很多时候是种强迫症，对身体有害无益，
俺老家有句话叫过了十二点，一小时流失一滴血，其实就是那么个理儿。&lt;/p&gt;

&lt;p&gt;在工作之外，多尝试一些不一样的东西，蹦极、滑雪、滑翔，跟朋友吃饭饭、聊天天。
工作是为了更好地生活，生活好才能工作好。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;原文地址：&lt;br /&gt;
&lt;a href=&quot;http://www.geekpark.net/read/view/191188&quot;&gt;http://www.geekpark.net/read/view/191188&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://www.xjp.cc/2013-log/10/5629.html&quot;&gt;http://www.xjp.cc/2013-log/10/5629.html&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;有话说：&lt;/p&gt;

&lt;p&gt;不管拥有多好的设备，多动动还是需要的，就算给大脑休息了。&lt;br /&gt;
文章写得很好很实在，使用笔记本的人要记得买个支架。&lt;/p&gt;

&lt;p&gt;后来我又尝试了站立式工作，感觉很好。&lt;br /&gt;
站立的时候比坐着的时候动的要多，这也是站立的一个优势吧。&lt;br /&gt;
从我个人来说，站着和坐着相比，站着不会给我造成身体的不适。&lt;/p&gt;
</description>
        <pubDate>Mon, 04 Nov 2013 00:00:00 +0800</pubDate>
        
        <link>http://www.dreamxu.com/it-workers-to-avoid-death-raiders/</link>
        <guid isPermaLink="true">http://www.dreamxu.com/it-workers-to-avoid-death-raiders/</guid>
        
        <category>记录</category>
        
        <category>健康</category>
        
      </item>
    
      <item>
        <title>Windows 软件分享</title>
        <description>&lt;h2 id=&quot;常用软件&quot;&gt;常用软件&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;虚拟机&lt;/strong&gt;&lt;br /&gt;
&lt;a href=&quot;http://pan.baidu.com/s/1pEd9C&quot;&gt;VMware Workstation 10.0.1-1379776&lt;/a&gt;
, 是一款功能强大的虚拟机软件，可在单一的桌面上同时运行不同的操作系统，和进行开发、测试 、部署新的应用程序的最佳解决方案。
这个版本开始原生中文支持，再也不用安装汉化文件了。&lt;br /&gt;
&lt;a href=&quot;https://www.virtualbox.org/&quot;&gt;VirtualBox&lt;/a&gt;
, 一个开源的免费的虚拟机，相比 vmware 来说体积要小很多。
对于中文支持比较好，安装后自动为中文。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;截图&lt;/strong&gt;&lt;br /&gt;
&lt;a href=&quot;http://pan.baidu.com/s/19WPFj&quot;&gt;FastStone Capture 7.6&lt;/a&gt;
,汉化特别、绿色注册版。 一款出色的截图软件，它集图像捕捉、浏览、编辑、视频录制等功能于一身。
飞扬时空汉化。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;磁盘管理，数据恢复&lt;/strong&gt;&lt;br /&gt;
&lt;a href=&quot;http://pan.baidu.com/share/link?shareid=507250&amp;amp;uk=3291975012&quot;&gt;DiskGenius 4.3.0&lt;/a&gt;
, 专业版破解版。
DiskGenius 是一款集磁盘分区管理与数据恢复功能于一身的工具软件。
DiskGenius 4.3.0 专业版破解版由 MyCrack 破解，运行即为注册版本。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;辅助卸载&lt;/strong&gt;&lt;br /&gt;
&lt;a href=&quot;http://www.geekuninstaller.com/&quot;&gt;GeekUninstaller&lt;/a&gt;
, 免费的专业卸载软件。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;视频播放&lt;/strong&gt;&lt;br /&gt;
&lt;a href=&quot;http://www.potplayer.org/&quot;&gt;PotPlayer&lt;/a&gt;
, 由于PotPlayer与KMPlayer同属一个开发者的产品，
所以PotPlayer拥有KMPlayer的硬件加速、支持高清视频播放、界面整洁、操作简单、使用轻松、皮肤丰富多彩等特点，
能够满足不同用户的使用需求。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;思维导图软件&lt;/strong&gt;&lt;br /&gt;
&lt;a href=&quot;http://www.xmind.net/&quot;&gt;XMind&lt;/a&gt;
, 是一款顶级商业品质的思维导图（mindmap）和头脑风暴（brainstorm）软件，
2008年“最佳Eclipse RCP商业应用”获奖产品，2010年度入选“PCWorld Best 100 of 2010”。
从2008年10月起，XMind 推出 开源版本，并荣获 sourceforge 社区 2009 最佳学术应用奖。&lt;/p&gt;

&lt;h2 id=&quot;专用软件&quot;&gt;专用软件&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;http://pan.baidu.com/share/link?shareid=507273&amp;amp;uk=3291975012&quot;&gt;Proteus_Pro_7.8_SP2&lt;/a&gt;
, 破解+汉化+教程。
Proteus软件是英国Labcenter electronics公司出版的EDA工具软件，是目前最好的仿真单片机及外围器件的工具。&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://pan.baidu.com/share/link?shareid=507295&amp;amp;uk=3291975012&quot;&gt;KEIL C51 V9.51a&lt;/a&gt;
, 原版+注册机+教程。
Keil C51是美国Keil Software公司出品的51系列兼容单片机C语言软件开发系统。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;注&lt;/strong&gt;：不定时添加，更新&lt;/p&gt;
</description>
        <pubDate>Mon, 05 Aug 2013 00:00:00 +0800</pubDate>
        
        <lastBuildDate>Sun, 03 Nov 2013 00:44:39 +0800</lastBuildDate>
        
        <link>http://www.dreamxu.com/share-windows-software/</link>
        <guid isPermaLink="true">http://www.dreamxu.com/share-windows-software/</guid>
        
        <category>分享</category>
        
        <category>Windows</category>
        
        <category>Software</category>
        
      </item>
    
      <item>
        <title>Windows 8 操作系统安装教程</title>
        <description>&lt;h2 id=&quot;准备系统镜像&quot;&gt;准备系统镜像&lt;/h2&gt;

&lt;p&gt;有些人可能对镜像不太了解，我用不专业的语言稍微解释一下。&lt;br /&gt;
抽象一点来说呢，就是把一系列的文件压缩成了一个文件，这个文件就称为镜像文件。&lt;br /&gt;
你也可以把它当成光盘的一个副本，可以把镜像文件刻成一张光盘，也可以把光盘做成一个镜像文件。&lt;br /&gt;
常用的镜像文件格式有 ISO, BIN 等。&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://msdn.ez58.net/&quot;&gt;http://msdn.ez58.net/&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://msdn.itellyou.cn/&quot;&gt;http://msdn.itellyou.cn/&lt;/a&gt;&lt;br /&gt;
上面那两个网站上的东西都是微软发给 MSDN 订阅用户的，都是官方原版哦，
你要是不信的话可以去验证 SHA-1 信息。&lt;br /&gt;
不得不说，东西真的是太全了，网友强大啊。&lt;/p&gt;

&lt;p&gt;在上面下载一个系统镜像，比如说&lt;a href=&quot;ed2k://|file|cn_windows_8_pro_vl_x64_dvd_917773.iso|3558014976|7956620A80428F37D4F2989CB5CF3B5A|/&quot;&gt;这个&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;Windows 8 Pro VL (x64) - DVD (Chinese-Simplified)
语言：中文(简体)
文件名：cn_windows_8_pro_vl_x64_dvd_917773.iso
发布日期(UTC)：2012-08-15 14:54:38  文件大小：3.31 GB
SHA1：9C4EC9FC4FB561F841E22256BC9DEA6D9D6611FF
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h2 id=&quot;关于分区&quot;&gt;关于分区&lt;/h2&gt;

&lt;p&gt;建议软件安装在系统盘，资料存放在其他盘，所以呢，推荐系统盘至少100G。&lt;br /&gt;
总听见周围的人说，软件要安装到非系统盘，实际上完全没必要。
软件安装在系统盘，方便管理（统一），方便备份。
而且软件安装在系统盘对系统的速度没有丝毫影响。&lt;/p&gt;

&lt;p&gt;如果不是特殊需要一般使用安装盘自带的分区工具就可以了。&lt;/p&gt;

&lt;p&gt;其他分区工具推荐：&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://pan.baidu.com/share/link?shareid=507250&amp;amp;uk=3291975012&quot;&gt;DiskGenius 4.3.0&lt;/a&gt;, 专业版破解版。
DiskGenius 是一款集磁盘分区管理与数据恢复功能于一身的工具软件。
DiskGenius 4.3.0 专业版破解版由 MyCrack 破解，运行即为注册版本。&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://pan.baidu.com/share/link?shareid=1464981392&amp;amp;uk=3291975012&quot;&gt;Acronis Disk Director 11 Home update2&lt;/a&gt;，是一个功能最齐全的磁盘管理产品的全新版本。
如果您希望最有效的使用磁盘并确保数据安全，它是最易于创建硬盘分区或调整大小、移动及合并分区，而且不会丢失数据的工具。&lt;/p&gt;

&lt;h2 id=&quot;系统安装方法&quot;&gt;系统安装方法&lt;/h2&gt;

&lt;p&gt;本文介绍四种安装方法，总有一种方法适合你&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;#usb-install&quot;&gt;U盘安装&lt;/a&gt;（推荐）&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#cd-install&quot;&gt;光盘安装&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#hard-disk-install&quot;&gt;硬盘安装&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#pe-install&quot;&gt;PE系统安装&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;usb-install&quot;&gt;U盘安装&lt;/h2&gt;

&lt;p&gt;需要软件 &lt;a href=&quot;http://pan.baidu.com/share/link?shareid=172613120&amp;amp;uk=3291975012&quot;&gt;UltraISO&lt;/a&gt;，它是一款功能强大而又方便实用的光盘映像文件制作/编辑/转换工具。&lt;/p&gt;

&lt;div class=&quot;fold&quot;&gt;
  &lt;p class=&quot;fold-show&quot;&gt;图文制作U盘启动盘&lt;/p&gt;
  &lt;p class=&quot;fold-hide&quot;&gt;图文制作U盘启动盘&lt;/p&gt;
&lt;/div&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;将U盘插入电脑&lt;br /&gt;
打开 UltraISO 软件（&lt;strong&gt;注意&lt;/strong&gt;：要以管理员身份运行），点击“文件”，选择“打开”，
在弹出的窗口中选择要制作的系统镜像文件&lt;br /&gt;
&lt;img src=&quot;/assets/images/posts/2013-07-30_141919.png&quot; alt=&quot;制作U盘启动盘1&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;点击“启动”，选择“写入硬盘映像”&lt;br /&gt;
&lt;img src=&quot;/assets/images/posts/2013-07-30_141938.png&quot; alt=&quot;制作U盘启动盘2&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;步骤2好了之后弹出如下界面&lt;br /&gt;
确认磁盘驱动器为你要制作的U盘，不然就悲剧了&lt;br /&gt;
写入方式选择 USB-HDD+ （一般选这个，不行的话你可以试试其它的）&lt;br /&gt;
点击便携启动，选择“写入新的硬盘主引导记录(MBR)”，选择“USB-HDD+”&lt;br /&gt;
&lt;img src=&quot;/assets/images/posts/2013-07-30_142004.png&quot; alt=&quot;制作U盘启动盘3&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;最后，点击“写入”，等待片刻，系统启动盘就制作完成了&lt;br /&gt;
&lt;img src=&quot;/assets/images/posts/2013-07-30_145703.png&quot; alt=&quot;制作U盘启动盘4&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;接下来，重启电脑设置从U盘启动，详细设置请见&lt;a href=&quot;#bios-setup&quot;&gt;BIOS设置启动&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;最后，重启电脑进入&lt;a href=&quot;#system-install&quot;&gt;系统安装&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;cd-install&quot;&gt;光盘安装&lt;/h2&gt;

&lt;p&gt;本来想使用 nero 来刻录的，不过看见那臃肿的身躯，我默默地转身离开了。&lt;br /&gt;
需要软件 &lt;a href=&quot;http://pan.baidu.com/share/link?shareid=172613120&amp;amp;uk=3291975012&quot;&gt;UltraISO&lt;/a&gt;，你会想怎么还是它。嗯，它确实不错。&lt;/p&gt;

&lt;div class=&quot;fold&quot;&gt;
  &lt;p class=&quot;fold-show&quot;&gt;图文制作光盘启动盘&lt;/p&gt;
  &lt;p class=&quot;fold-hide&quot;&gt;图文制作光盘启动盘&lt;/p&gt;
&lt;/div&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;将空白的光盘放入光驱中&lt;br /&gt;
打开 UltraISO 软件（注意：要以管理员身份运行），点击界面上的“刻录光盘映像”按钮&lt;br /&gt;
&lt;img src=&quot;/assets/images/posts/2013-07-30_151354.png&quot; alt=&quot;制作光盘启动盘1&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;进入到如下界面&lt;br /&gt;
刻录机：一般只有一个刻录机，默认就可以。如果有两台以上的刻录机，可以通过下拉菜单选择&lt;br /&gt;
刻录校验：用于刻录完毕之后检查你的光盘刻录是否成功&lt;br /&gt;
写入速度：CD推荐24x或者一下，DVD最好用8x&lt;br /&gt;
写入方式：一般采用默认&lt;br /&gt;
映像文件：点击右边的浏览按钮，选择要刻录的镜像文件&lt;br /&gt;
查看没有什么错误之后，点击“刻录”按钮&lt;br /&gt;
&lt;img src=&quot;/assets/images/posts/2013-07-30_151747.png&quot; alt=&quot;制作光盘启动盘2&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;刻录成功&lt;br /&gt;
&lt;img src=&quot;/assets/images/posts/2013-07-30_153622.png&quot; alt=&quot;制作光盘启动盘3&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;接下来，重启电脑设置从光盘启动，详细设置请见&lt;a href=&quot;#bios-setup&quot;&gt;BIOS设置启动&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;最后，重启电脑进入&lt;a href=&quot;#system-install&quot;&gt;系统安装&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;hard-disk-install&quot;&gt;硬盘安装&lt;/h2&gt;

&lt;p&gt;需要软件 &lt;a href=&quot;http://pan.baidu.com/share/link?shareid=3313744434&amp;amp;uk=3291975012&quot;&gt;nt6 hdd installer v3.1.4&lt;/a&gt;
, 帮助没有光驱或者U盘的用户安装 NT6.x 系统。&lt;/p&gt;

&lt;div class=&quot;fold&quot;&gt;
  &lt;p class=&quot;fold-show&quot;&gt;官方的图文安装说明&lt;/p&gt;
  &lt;p class=&quot;fold-hide&quot;&gt;官方的图文安装说明&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/posts/2013-07-27_232300.jpg&quot; alt=&quot;硬盘安装的官方的图文安装说明&quot; /&gt;&lt;/p&gt;

&lt;p&gt;最后，重启电脑进入&lt;a href=&quot;#system-install&quot;&gt;系统安装&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;pe-install&quot;&gt;PE系统安装&lt;/h2&gt;

&lt;p&gt;网上pe系统很多，有的是个人爱好制作，你自己也可以做，不难的。差别都不是很大，自己用着爽就好了。&lt;br /&gt;
常用的pe系统有
&lt;a href=&quot;http://u.diannaodian.com/&quot;&gt;电脑店PE&lt;/a&gt;、
&lt;a href=&quot;http://www.tongyongpe.com/&quot;&gt;通用PE工具箱&lt;/a&gt;、
&lt;a href=&quot;http://www.laomaotao.net/&quot;&gt;老毛桃PE&lt;/a&gt;、
&lt;a href=&quot;http://www.dabaicai.com/&quot;&gt;大白菜PE&lt;/a&gt;、
&lt;a href=&quot;http://www.pccppc.com/&quot;&gt;小马PE&lt;/a&gt;、
&lt;a href=&quot;http://www.myfeng.cn/&quot;&gt;晨枫PE&lt;/a&gt;、
&lt;a href=&quot;http://www.winpe.cc/&quot;&gt;天意PE&lt;/a&gt;等。&lt;/p&gt;

&lt;p&gt;现在的PE工具很厉害，有的支持直接将ISO镜像添加到启动菜单中。&lt;br /&gt;
这里介绍一种通用的方法（非GHO）。&lt;/p&gt;

&lt;p&gt;首先得进入PE系统，如何制作可以查看具体的PE系统的官方教程，然后设置从U盘启动（PE系统安装在哪就从哪启动），
详细设置请见&lt;a href=&quot;#bios-setup&quot;&gt;BIOS设置启动&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;fold&quot;&gt;
  &lt;p class=&quot;fold-show&quot;&gt;使用PE系统安装WIN8&lt;/p&gt;
  &lt;p class=&quot;fold-hide&quot;&gt;使用PE系统安装WIN8&lt;/p&gt;
&lt;/div&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;演示用的是“通用pe工具箱V6.0版”PE系统。进入PE系统，打开虚拟光驱软件&lt;br /&gt;
&lt;img src=&quot;/assets/images/posts/2013-07-30_003636.jpg&quot; alt=&quot;PE系统安装WIN8_1&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;使用虚拟光驱加载系统镜像&lt;br /&gt;
&lt;img src=&quot;/assets/images/posts/2013-07-30_005130.gif&quot; alt=&quot;PE系统安装WIN8_2&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;使用“windows安装器”&lt;br /&gt;
&lt;img src=&quot;/assets/images/posts/2013-07-30_005517.gif&quot; alt=&quot;PE系统安装WIN8_3&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;一些要注意的地方&lt;br /&gt;
&lt;img src=&quot;/assets/images/posts/2013-07-30_005712.jpg&quot; alt=&quot;PE系统安装WIN8_4&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;一路下一步，加上漫长地等待，终于看到了这个界面&lt;br /&gt;
&lt;img src=&quot;/assets/images/posts/2013-07-30_011120.jpg&quot; alt=&quot;PE系统安装WIN8_5&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;重启几次之后进入&lt;a href=&quot;#system-install&quot;&gt;系统安装&lt;/a&gt;，
某些地方不一样，不过我相信聪明的你肯定没有问题的&lt;/p&gt;

&lt;h2 id=&quot;bios-setup&quot;&gt;BIOS设置启动&lt;/h2&gt;

&lt;p&gt;有两种方法，如下&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;开机的时候按 F12 （不同的主板不一样，有的是 F8, F11, ESC 等），选择从相应设备启动&lt;/li&gt;
  &lt;li&gt;开机的时候按 F2 （有的主板是 DEL, TAB 等）进入 BIOS，修改启动顺序之后，按 F10 保存&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;如果不行的话，可以查看下面的教程 (U盘启动为例，光盘类似可能还简单一点)&lt;/p&gt;

&lt;div class=&quot;fold&quot;&gt;
  &lt;p class=&quot;fold-show&quot;&gt;BIOS设置图解教程&lt;/p&gt;
  &lt;p class=&quot;fold-hide&quot;&gt;BIOS设置图解教程&lt;/p&gt;
&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;用户可以根据不同的电脑型号，选择相应的热键，直接启动一键U盘装系统工具设置
（&lt;strong&gt;重要提示&lt;/strong&gt;：在选择启动热键前，需先插入U盘方可）&lt;br /&gt;
&lt;img src=&quot;/assets/images/posts/2013-07-28_184951.png&quot; alt=&quot;BIOS热键&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;设置U盘启动，不同的BIOS设置U盘启动方法均不同，以下为常见的三种方法：&lt;/p&gt;

    &lt;ol&gt;
      &lt;li&gt;&lt;a href=&quot;#bios-setup-one&quot;&gt;Phoenix – AwardBIOS（2010年之后的电脑）&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#bios-setup-two&quot;&gt;旧的Award BIOS（2009年电脑主板）&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#bios-setup-three&quot;&gt;2002年电脑主板的一款BIOS&lt;/a&gt;&lt;/li&gt;
    &lt;/ol&gt;

    &lt;h3 id=&quot;bios-setup-one&quot;&gt;Phoenix – AwardBIOS（2010年之后的电脑设置方法）&lt;/h3&gt;

    &lt;ol&gt;
      &lt;li&gt;
        &lt;p&gt;开机时按住Del键进入到该电脑的BIOS设置界面，选择高级BIOS设置Advanced BIOS Features&lt;br /&gt;
&lt;img src=&quot;/assets/images/posts/2013-07-28_210818.jpg&quot; alt=&quot;bios-setup-one_1&quot; /&gt;&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;在进入高级BIOS设置（Advanced BIOS Features）界面后，首先要选择硬盘启动优先级：Hard Disk Boot Priority&lt;br /&gt;
&lt;img src=&quot;/assets/images/posts/2013-07-28_211401.jpg&quot; alt=&quot;bios-setup-one_2&quot; /&gt;&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;在进入到硬盘启动优先级（Hard Disk Boot Priority）界面后，
需使用小键盘上的加减符号（+、-）来选择与移动设备，要将U盘选择在最上面。
然后，按住ESC键退出，这时会回到步骤2的设置界面&lt;br /&gt;
&lt;img src=&quot;/assets/images/posts/2013-07-29_221943.jpg&quot; alt=&quot;bios-setup-one_3&quot; /&gt;&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;完成上一步后，再选择第一启动设备（First Boot Device）：
该版本的BIOS这里没有U盘的“USB-HDD”、“USB-ZIP”同类的选项，选择移动设备“Removable”也不能正常启动。
但是，选择“Hard Disk”就可以启动电脑&lt;br /&gt;
&lt;img src=&quot;/assets/images/posts/2013-07-29_222025.jpg&quot; alt=&quot;bios-setup-one_4&quot; /&gt;&lt;/p&gt;
      &lt;/li&gt;
    &lt;/ol&gt;

    &lt;h3 id=&quot;bios-setup-two&quot;&gt;旧的Award BIOS（2009年电脑主板设置方法）&lt;/h3&gt;

    &lt;ol&gt;
      &lt;li&gt;
        &lt;p&gt;开机按住Del键进入到该电脑的BIOS设置界面，然后选择高级BIOS设置：Advanced BIOS Features&lt;br /&gt;
&lt;img src=&quot;/assets/images/posts/2013-07-29_222356.jpg&quot; alt=&quot;bios-setup-two_1&quot; /&gt;&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;在高级BIOS设置（Advanced BIOS Features）的界面，首先要选择硬盘启动优先级：Hard Disk Boot Priority&lt;br /&gt;
&lt;img src=&quot;/assets/images/posts/2013-07-29_222407.jpg&quot; alt=&quot;bios-setup-two_2&quot; /&gt;&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;进入到硬盘启动优先级（Hard Disk Boot Priority）界面后。
需要使用小键盘上的加减符号（+、-）来选择与移动设备，要将U盘选择在最上面。
完成前面的步骤后按住ESC键退出，便会回到步骤2的设置界面&lt;br /&gt;
&lt;img src=&quot;/assets/images/posts/2013-07-29_222420.jpg&quot; alt=&quot;bios-setup-two_3&quot; /&gt;&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;在第一启动设备（First Boot Device）的界面里，有U盘的USB-ZIP、USB-HDD之类的相关选项，
我们可以选择“Hard Disk”，也可以选择“USB-HDD”之类的选项，来启动该电脑&lt;br /&gt;
&lt;img src=&quot;/assets/images/posts/2013-07-29_222429.jpg&quot; alt=&quot;bios-setup-two_4&quot; /&gt;&lt;/p&gt;
      &lt;/li&gt;
    &lt;/ol&gt;

    &lt;h3 id=&quot;bios-setup-three&quot;&gt;2002年电脑主板的一款BIOS&lt;/h3&gt;

    &lt;ol&gt;
      &lt;li&gt;
        &lt;p&gt;选择Boot菜单界面设置中的U盘启动项&lt;br /&gt;
&lt;img src=&quot;/assets/images/posts/2013-07-29_223142.jpg&quot; alt=&quot;bios-setup-three_1&quot; /&gt;&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;启动优先级设备选择（Boot Device Priority）在第一启动设备（1st Boot Device）里选择U盘，
如果在步骤1中的硬盘驱动器“Hard Disk Drives”里面没有将U盘作为第一启动设备，
那么，在这里就不会存在和显示U盘，如下图所示。
但是，我们可以选择移动设备“Removable Dev.”来作为第一启动设备&lt;br /&gt;
&lt;img src=&quot;/assets/images/posts/2013-07-29_223150.jpg&quot; alt=&quot;bios-setup-three_2&quot; /&gt;&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;进入硬盘驱动器“Hard Disk Drives”界面，需要选择U盘作为第一启动设备“1st Drive”。
如果之前在“Hard Disk Drives”里已经选择U盘为第一启动设备，如下图所示，
那么在这个界面里就会显示有U盘，我们就可以选择U盘作为第一启动设备，如步骤4&lt;br /&gt;
&lt;img src=&quot;/assets/images/posts/2013-07-29_223157.jpg&quot; alt=&quot;bios-setup-three_3&quot; /&gt;&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;当我们之前就在步骤3的硬盘驱动器“Hard Disk Drives”中选择U盘作为第一启动设备“1st Drive”后，
要启动优先级设备选择（Boot Device Priority），这时才会显示有U盘，
然后我们就可以优先选择U盘作为第一启动设备（1st Boot Device）&lt;br /&gt;
&lt;img src=&quot;/assets/images/posts/2013-07-29_223204.jpg&quot; alt=&quot;bios-setup-three_4&quot; /&gt;&lt;/p&gt;
      &lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;以上教程转自&lt;a href=&quot;http://www.tongyongpe.com/bios.html&quot;&gt;BIOS设置图解教程&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;system-install&quot;&gt;系统安装&lt;/h2&gt;

&lt;div class=&quot;fold&quot;&gt;
  &lt;p class=&quot;fold-show&quot;&gt;详细的图文安装过程&lt;/p&gt;
  &lt;p class=&quot;fold-hide&quot;&gt;详细的图文安装过程&lt;/p&gt;
&lt;/div&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;一开始就进入这个界面，这个没啥说的直接下一步&lt;br /&gt;
&lt;img src=&quot;/assets/images/posts/2013-07-28_001744.png&quot; alt=&quot;WIN8系统安装1&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;点击“现在安装”&lt;br /&gt;
&lt;img src=&quot;/assets/images/posts/2013-07-28_001941.png&quot; alt=&quot;WIN8系统安装2&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;继续下一步&lt;br /&gt;
&lt;img src=&quot;/assets/images/posts/2013-07-28_002038.png&quot; alt=&quot;WIN8系统安装3&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;这里选择自定义，上面那个没有特殊需要一般不选&lt;br /&gt;
&lt;img src=&quot;/assets/images/posts/2013-07-28_002116.png&quot; alt=&quot;WIN8系统安装4&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;点击“驱动器选项(高级)(A)”可以进行分区等操作，注意不要误删资料分区&lt;br /&gt;
&lt;img src=&quot;/assets/images/posts/2013-07-28_002350.png&quot; alt=&quot;WIN8系统安装5&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;然后看到这个界面，耐心等待一会&lt;br /&gt;
&lt;img src=&quot;/assets/images/posts/2013-07-28_002500.png&quot; alt=&quot;WIN8系统安装6&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;电脑重启几次之后，进入这里，一路下一步吧&lt;br /&gt;
&lt;img src=&quot;/assets/images/posts/2013-07-28_003226.png&quot; alt=&quot;WIN8系统安装7&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;到达这里，点击“不使用 Microsoft 账户登陆”，可以不用输入电子邮件地址，就像安装 win7 时设置账户那样&lt;br /&gt;
&lt;img src=&quot;/assets/images/posts/2013-07-28_003337.png&quot; alt=&quot;WIN8系统安装8&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;好了，进行 win8 之旅吧，祝大家玩得开心&lt;br /&gt;
&lt;img src=&quot;/assets/images/posts/2013-07-28_003653.png&quot; alt=&quot;WIN8系统安装9_1&quot; /&gt;
&lt;img src=&quot;/assets/images/posts/2013-07-28_003726.png&quot; alt=&quot;WIN8系统安装9_2&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;系统激活&quot;&gt;系统激活&lt;/h2&gt;

&lt;p&gt;网上不定期的会出现一些 win8 的密钥，大家都懂的微软打什么主意。
只要你肯等，密钥肯定会出现的。&lt;/p&gt;

&lt;p&gt;还可以用软件激活，推荐一款软件 &lt;a href=&quot;http://pan.baidu.com/share/link?shareid=3841365881&amp;amp;uk=3291975012&quot;&gt;HEU_KMS_Activator_CH_v6.3&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;恭喜&quot;&gt;恭喜&lt;/h2&gt;

&lt;p&gt;你又多了一个去女生家里的理由。&lt;/p&gt;
</description>
        <pubDate>Fri, 26 Jul 2013 00:00:00 +0800</pubDate>
        
        <lastBuildDate>Thu, 08 Aug 2013 23:01:18 +0800</lastBuildDate>
        
        <link>http://www.dreamxu.com/windows-system-install/</link>
        <guid isPermaLink="true">http://www.dreamxu.com/windows-system-install/</guid>
        
        <category>技术</category>
        
        <category>Windows</category>
        
        <category>Install</category>
        
      </item>
    
      <item>
        <title>制作 Pro Git 电子书</title>
        <description>&lt;p&gt;Pro Git 是一本很好的学习 git 的开源书籍，制作成电子书就更加方便学习了&lt;br /&gt;
书的作者是 Scott Chacon，他把书托管在 GitHub 上，见这里 &lt;a href=&quot;https://github.com/progit/progit.git&quot;&gt;progit&lt;/a&gt;&lt;br /&gt;
然后就有了 3000 多次提交，被翻译成 30 多种语言，听说中文翻译得也很好&lt;/p&gt;

&lt;h2 id=&quot;获取书籍&quot;&gt;获取书籍&lt;/h2&gt;

&lt;p&gt;从项目仓库中克隆一份到本地&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;git clone https://github.com/progit/progit.git
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h2 id=&quot;生成-pdf&quot;&gt;生成 PDF&lt;/h2&gt;

&lt;p&gt;环境 Ubuntu 13.04 x64&lt;/p&gt;

&lt;p&gt;首先需要安装 ruby&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo apt-get install ruby
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;然后安装 pandoc，这个工具能将 markdown 格式转换成 latex 格式&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo apt-get install pandoc
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;接下来安装 xetex&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo apt-get install texlive-xetex
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;到这里若制作 pdf 的话会报错&lt;br /&gt;
! LaTeX Error: File `url.sty’ not found.&lt;br /&gt;
可安装 latex-extra 来解决这个问题&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo apt-get install texlive-latex-extra
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;xetex 还是比较好用的，字体能直接使用系统的&lt;br /&gt;
或许你会修改一下配置文件 latex/config.yml, 
在 zh 那一栏中修改一下字体 font, bold, mono, 修改缩进 indent&lt;br /&gt;
查看系统支持哪些字体可用命令 &lt;code class=&quot;highlighter-rouge&quot;&gt;fc-list :lang=zh&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;准备工作完成之后就来生成生 pdf 吧&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;./makepdfs zh
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h2 id=&quot;生成-ebook&quot;&gt;生成 EBOOK&lt;/h2&gt;

&lt;p&gt;相对来说就比较简单了&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo apt-get install ruby rubygems calibre ruby-dev
sudo gem install rdiscount
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;生成 mobi 格式&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;FORMAT=mobi ruby makeebooks zh
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;生成 epub 格式&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;FORMAT=epub ruby makeebooks zh
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h2 id=&quot;福利-制作好的-pdf-epub-mobi-下载&quot;&gt;“福利” 制作好的 PDF + EPUB + MOBI 下载&lt;/h2&gt;

&lt;p&gt;PDF+EPUB+MOBI: &lt;a href=&quot;https://www.dropbox.com/sh/gjed8306imbwoep/rwiaMXxG2p&quot;&gt;Pro Git&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;兄弟们狂点吧&lt;/p&gt;
</description>
        <pubDate>Tue, 16 Jul 2013 00:00:00 +0800</pubDate>
        
        <lastBuildDate>Thu, 20 Mar 2014 16:49:23 +0800</lastBuildDate>
        
        <link>http://www.dreamxu.com/make-progit/</link>
        <guid isPermaLink="true">http://www.dreamxu.com/make-progit/</guid>
        
        <category>记录</category>
        
        <category>Pro Git</category>
        
        <category>Book</category>
        
      </item>
    
      <item>
        <title>安装 Ubuntu 后要做的一些事</title>
        <description>&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;安装编译环境&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo apt-get install build-essential
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;安装 vim&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;开机自动挂载分区&lt;br /&gt;
修改 /etc/fstab 文件，例如添加&lt;br /&gt;
UUID=588650B08650907C /media/DATA ntfs defaults,dmask=002,fmask=113,uid=1000,gid=1000 0 0&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;安装 Ubuntu Tweak&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo add-apt-repository ppa:tualatrix/ppa
sudo apt-get update
sudo apt-get install ubuntu-tweak
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;修改默认中文字体&lt;br /&gt;
字体可以在 windows 系统下找到一些，C:/Windows/Fonts 目录下&lt;br /&gt;
可在 /etc/fonts/conf.d/69-language-selector-zh-cn.conf 文件中修改默认字体&lt;br /&gt;
用命令 &lt;code class=&quot;highlighter-rouge&quot;&gt;fc-list :lang=zh&lt;/code&gt; 查看系统当前可用的中文字体，用 Ubuntu Tweak 修改字体平滑度&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;修改桌面背景图片，grub 选项、顺序、背景等，等一系列系统设置&lt;br /&gt;
使用 Ubuntu Tweak 和 Grub Customizer&lt;br /&gt;
Grub Customizer 安装方法如下&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo add-apt-repository ppa:danielrichter2007/grub-customizer
sudo apt-get update
sudo apt-get install grub-customizer
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;

    &lt;p&gt;或者直接修改配置文件 &lt;a href=&quot;https://help.ubuntu.com/community/Grub2#Configuring_GRUB_2&quot;&gt;https://help.ubuntu.com/community/Grub2#Configuring_GRUB_2&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;安装 truecrypt 加密软件
&lt;a href=&quot;http://www.truecrypt.org&quot;&gt;http://www.truecrypt.org&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;安装 VirtualBox 虚拟机
&lt;a href=&quot;https://www.virtualbox.org&quot;&gt;https://www.virtualbox.org&lt;/a&gt;&lt;br /&gt;
Oracle VM VirtualBox Extension Pack 装上才能使用 USB 等&lt;br /&gt;
将用户添加到 vboxusers 组，才能访问 USB 设备 &lt;code class=&quot;highlighter-rouge&quot;&gt;sudo adduser username vboxusers&lt;/code&gt;&lt;br /&gt;
最后需要注销一下&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;安装搜狗输入法&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo add-apt-repository ppa:fcitx-team/nightly
sudo apt-get update
sudo apt-get install fcitx fcitx-sogoupinyin
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;安装思维导图软件 XMind
&lt;a href=&quot;http://www.xmind.net&quot;&gt;http://www.xmind.net&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;安装下载工具 uget + aria2&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo add-apt-repository ppa:plushuang-tw/uget-stable
sudo add-apt-repository ppa:t-tujikawa/ppa
sudo apt-get update
sudo apt-get install uget aria2
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;

    &lt;p&gt;配置 uget
-   编辑-&amp;gt;设置-&amp;gt;插件-&amp;gt;勾选’启用 aria2 插件’，确保 Arguments 中有 –enable-rpc=true 参数
-   打开 uget 在左下的分类中的 Home 右键点击属性，将每台服务器连接数改为16最优（网友如是说）
-   chrome 可安装 download assistant 插件，现在停止开发了，不过网上资源还是很多的&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;安装视频播放器 VLC&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo apt-get install vlc
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;安装截图软件 Shutter&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo apt-get install shutter
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;修改程序关联列表&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo vim /usr/share/applications/defaults.list
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;代理软件 proxychains&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo apt-get install proxychains
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;IRC 客户端 pidgin，不光支持 IRC，还支持很多协议&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo apt-get install pidgin
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ul&gt;
</description>
        <pubDate>Sun, 14 Jul 2013 00:00:00 +0800</pubDate>
        
        <lastBuildDate>Sat, 03 Aug 2013 14:54:56 +0800</lastBuildDate>
        
        <link>http://www.dreamxu.com/install-ubuntu-after/</link>
        <guid isPermaLink="true">http://www.dreamxu.com/install-ubuntu-after/</guid>
        
        <category>记录</category>
        
        <category>Ubuntu</category>
        
        <category>Install</category>
        
      </item>
    
      <item>
        <title>Ubuntu 安装 Sublime Text</title>
        <description>&lt;h2 id=&quot;添加源方式安装&quot;&gt;添加源方式安装&lt;/h2&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo add-apt-repository ppa:webupd8team/sublime-text-2
sudo apt-get update
sudo apt-get install sublime-text
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;想要 Sublime Text 2 打开默认文本，可以修改关联列表&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo vim /usr/share/applications/defaults.list
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;将所有的 gedit.desktop 替换成 sublime-text-2.desktop&lt;/p&gt;

&lt;h2 id=&quot;解决中文输入法问题&quot;&gt;解决中文输入法问题&lt;/h2&gt;

&lt;p&gt;我用的是 fcitx-sogoupinyin 输入法，无法输入中文，按如下办法可行&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;保存下述代码为 sublime-imfix.c 文件&lt;/p&gt;

    &lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;cm&quot;&gt;/*
sublime-imfix.c
Use LD_PRELOAD to interpose some function to fix sublime input method support for linux.
By Cjacker Huang &amp;lt;jianzhong.huang at i-soft.com.cn&amp;gt;

gcc -shared -o libsublime-imfix.so sublime_imfix.c  `pkg-config --libs --cflags gtk+-2.0` -fPIC
LD_PRELOAD=./libsublime-imfix.so sublime_text
*/&lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;#include &amp;lt;gtk/gtk.h&amp;gt;
#include &amp;lt;gdk/gdkx.h&amp;gt;
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;GdkSegment&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;GdkRegionBox&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_GdkRegion&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;kt&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;kt&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;numRects&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;GdkRegionBox&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rects&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;GdkRegionBox&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;extents&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;GtkIMContext&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;local_context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;
&lt;span class=&quot;nf&quot;&gt;gdk_region_get_clipbox&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;GdkRegion&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;region&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;GdkRectangle&lt;/span&gt;    &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rectangle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;g_return_if_fail&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;region&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;g_return_if_fail&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rectangle&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

  &lt;span class=&quot;n&quot;&gt;rectangle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;region&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;extents&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;rectangle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;region&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;extents&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;rectangle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;width&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;region&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;extents&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;region&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;extents&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;rectangle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;height&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;region&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;extents&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;region&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;extents&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;GdkRectangle&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;rect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rectangle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;rect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rectangle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;rect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;width&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;rect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;height&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rectangle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;//The caret width is 2;
&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;//Maybe sometimes we will make a mistake, but for most of the time, it should be the caret.
&lt;/span&gt;  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rectangle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;width&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;GTK_IS_IM_CONTEXT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;local_context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;gtk_im_context_set_cursor_location&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;local_context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rectangle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;//this is needed, for example, if you input something in file dialog and return back the edit area
//context will lost, so here we set it again.
&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;GdkFilterReturn&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;event_filter&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;GdkXEvent&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;xevent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;GdkEvent&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gpointer&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;im_context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;XEvent&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;xev&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;XEvent&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;xevent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;xev&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;KeyRelease&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;GTK_IS_IM_CONTEXT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;im_context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;GdkWindow&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;win&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;g_object_get_data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;G_OBJECT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;im_context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;window&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
       &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;GDK_IS_WINDOW&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;win&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
         &lt;span class=&quot;n&quot;&gt;gtk_im_context_set_client_window&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;im_context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;win&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;GDK_FILTER_CONTINUE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;gtk_im_context_set_client_window&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;GtkIMContext&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;GdkWindow&lt;/span&gt;    &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;window&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;GtkIMContextClass&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;klass&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;g_return_if_fail&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;GTK_IS_IM_CONTEXT&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;klass&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;GTK_IM_CONTEXT_GET_CLASS&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;klass&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;set_client_window&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;klass&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;set_client_window&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;window&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;GDK_IS_WINDOW&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;window&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;g_object_set_data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;G_OBJECT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;window&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;window&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;width&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gdk_window_get_width&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;window&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;height&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gdk_window_get_height&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;window&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;width&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;height&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;gtk_im_context_focus_in&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;local_context&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;gdk_window_add_filter&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;window&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;event_filter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;安装 C/C++ 的编译环境和 gtk libgtk2.0-dev&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo apt-get install build-essential
sudo apt-get install libgtk2.0-dev
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;编译共享内库&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;gcc -shared -o libsublime-imfix.so sublime-imfix.c  `pkg-config --libs --cflags gtk+-2.0` -fPIC
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;启动 Sublime Text 2&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;LD_PRELOAD=./libsublime-imfix.so sublime-text
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;但是这样的话，我们每次都要在终端里面使用命令启动 sublime text 2，这样很不方便，
接下来我们还要通过修改 sublime-text-2.desktop 达到点击图标启动&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo mv libsublime-imfix.so /usr/lib
sudo vim /usr/share/applications/sublime-text-2.desktop
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;将&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;Exec=/usr/bin/subl %F
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;修改为&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;Exec=bash -c &#39;LD_PRELOAD=/usr/lib/libsublime-imfix.so /usr/bin/subl %F&#39;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;将&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;Exec=/usr/bin/subl --command new_file
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;修改为&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;Exec=bash -c &#39;LD_PRELOAD=/usr/lib/libsublime-imfix.so /usr/bin/subl&#39; --command new_file
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;好了，接下来你在 dash 中点击打开 sublime-text-2 吧，开始你的代码之旅吧&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;参考：
&lt;a href=&quot;http://my.oschina.net/wugaoxing/blog/121281&quot;&gt;http://my.oschina.net/wugaoxing/blog/121281&lt;/a&gt;&lt;/p&gt;
</description>
        <pubDate>Tue, 25 Jun 2013 00:00:00 +0800</pubDate>
        
        <lastBuildDate>Sun, 21 Jul 2013 00:00:00 +0800</lastBuildDate>
        
        <link>http://www.dreamxu.com/ubuntu-install-sublime-text/</link>
        <guid isPermaLink="true">http://www.dreamxu.com/ubuntu-install-sublime-text/</guid>
        
        <category>记录</category>
        
        <category>Ubuntu</category>
        
        <category>Install</category>
        
        <category>Sublime Text</category>
        
      </item>
    
      <item>
        <title>Ubuntu 搭建 LAMP(Linux+Apache+MySQL+Php) 环境</title>
        <description>&lt;p&gt;LAMP 是指一组通常一起使用来运行动态网站或者服务器的自由软件名称首字母缩写：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Linux, 操作系统&lt;/li&gt;
  &lt;li&gt;Apache, 网页服务器&lt;/li&gt;
  &lt;li&gt;MySQL, 数据库管理系统（或者数据库服务器）&lt;/li&gt;
  &lt;li&gt;PHP 和有时 Perl 或 Python, 脚本语言&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;——wikipedia&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;下面是安装步骤（顺序不固定）&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;安装 Apache&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo apt-get install apache2
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;

    &lt;p&gt;测试：在浏览器中输入 http://localhost, 若出现 It works!, 请继续下一步&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;安装 MySQL&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo apt-get install mysql-server
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;

    &lt;p&gt;安装的过程中会提示你输入密码，不要忘记了&lt;br /&gt;
测试：输入命令 mysql -uroot -p, 然后输入安装的时候设置的密码，
若出现欢迎界面（Welcome to the MySQL monitor.），请继续下一步&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;安装 Php 及一些必要模块&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo apt-get install php5 libapache2-mod-php5 php5-mysql
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;

    &lt;p&gt;测试：在 apache 的 www 文件夹下（默认在 /var）新建文件 phpinfo.php
内容为 &amp;lt;?php phpinfo(); ?&amp;gt;,
在浏览器中输入 http://localhost/phpinfo.php, 若出现 php 信息, 请继续下一步&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;
</description>
        <pubDate>Tue, 18 Jun 2013 00:00:00 +0800</pubDate>
        
        <link>http://www.dreamxu.com/ubuntu-install-lamp/</link>
        <guid isPermaLink="true">http://www.dreamxu.com/ubuntu-install-lamp/</guid>
        
        <category>记录</category>
        
        <category>Ubuntu</category>
        
        <category>Install</category>
        
        <category>LAMP</category>
        
      </item>
    
      <item>
        <title>Windows &amp;amp; Ubuntu 配置 Qt5.0 开发环境</title>
        <description>&lt;h2 id=&quot;windows&quot;&gt;Windows&lt;/h2&gt;

&lt;p&gt;有很多种方式，看自己喜好了&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;MinGW 工具链 + Qt Creator IDE
    &lt;ol&gt;
      &lt;li&gt;安装 &lt;a href=&quot;http://qt-project.org/downloads&quot;&gt;Qt 5.0.2 for Windows 32-bit (MinGW 4.7, 650 MB)&lt;/a&gt;
（集成了 &lt;a href=&quot;http://sourceforge.net/projects/mingw/files/&quot;&gt;MinGW 4.7&lt;/a&gt; 和 &lt;a href=&quot;http://qt-project.org/downloads&quot;&gt;Qt Creator&lt;/a&gt;，很方便，安装的时候记得勾选上）&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;MS 工具链 + Qt Creator IDE
    &lt;ol&gt;
      &lt;li&gt;安装 &lt;a href=&quot;http://www.microsoft.com/visualstudio/chs/products/visual-studio-overview&quot;&gt;vs2012&lt;/a&gt;（Express 版就可以了，注册一下就能免费使用了）&lt;/li&gt;
      &lt;li&gt;安装 &lt;a href=&quot;http://qt-project.org/downloads&quot;&gt;Qt 5.0.2 for Windows 64-bit (VS 2012, 500 MB)&lt;/a&gt;
（集成了 &lt;a href=&quot;http://qt-project.org/downloads&quot;&gt;Qt Creator&lt;/a&gt;，安装的时候记得勾选）&lt;/li&gt;
      &lt;li&gt;安装 &lt;a href=&quot;http://msdn.microsoft.com/zh-CN/windows/hardware/gg463009/&quot;&gt;控制台调试器 (CDB)&lt;/a&gt;（Qt Creator 中要使用的调试器）&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;MS 工具链 + VS IDE
    &lt;ol&gt;
      &lt;li&gt;安装 &lt;a href=&quot;http://www.microsoft.com/visualstudio/chs/products/visual-studio-overview&quot;&gt;vs2012&lt;/a&gt; （非 Express 版）&lt;/li&gt;
      &lt;li&gt;安装 &lt;a href=&quot;http://qt-project.org/downloads&quot;&gt;Qt 5.0.2 for Windows 64-bit (VS 2012, 500 MB)&lt;/a&gt;（使用编译好的就是方便）&lt;/li&gt;
      &lt;li&gt;安装 &lt;a href=&quot;http://qt-project.org/downloads&quot;&gt;Visual Studio Add-in 1.2.1 for Qt5&lt;/a&gt;（与VS的集成插件）&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;ubuntu&quot;&gt;ubuntu&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;安装 C/C++ 编译环境&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo apt-get install build-essential
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;http://qt-project.org/downloads&quot;&gt;安装 Qt 5.0.2 for Linux 64-bit (394 MB)&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;设置环境变量&lt;br /&gt;
假设 Qt 安装在 /usr/local&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo vim /etc/profile (所有用户) 或者 vim ~/.bashrc (当前用户)
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;

    &lt;p&gt;在末尾加入如下内容&lt;/p&gt;

    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;QTDIR&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/usr/local/Qt5.0.2
&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;PATH&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$QTDIR&lt;/span&gt;/5.0.2/gcc_64/bin:&lt;span class=&quot;nv&quot;&gt;$PATH&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;PATH&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$QTDIR&lt;/span&gt;/Tools/QtCreator/bin:&lt;span class=&quot;nv&quot;&gt;$PATH&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;

    &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;source /etc/profile&lt;/code&gt; 使之生效&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;构建程序的时候会如下出现错误&lt;br /&gt;
/usr/bin/ld: cannot find -lGL&lt;br /&gt;
collect2: ld returned 1 exit status&lt;br /&gt;
这是因为 Qt5.0 默认将 OpenGL 加入了工程，但是在机器上没有安装 OpenGL&lt;br /&gt;
解决办法就是安装 OpenGL Library&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo apt-get install libgl1-mesa-dev
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;hr /&gt;

&lt;p&gt;参考：&lt;br /&gt;
&lt;a href=&quot;http://qt-project.org/doc/qt-5.0/qtdoc/platform-details.html&quot;&gt;QtDoc&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://blog.sina.com.cn/s/blog_c289bdac0101600z.html&quot;&gt;Ubuntu Qt5.0 安装后运行失败提示 can’t find -Igl&lt;/a&gt;&lt;/p&gt;
</description>
        <pubDate>Wed, 05 Jun 2013 00:00:00 +0800</pubDate>
        
        <link>http://www.dreamxu.com/windows-ubuntu-install-qt5/</link>
        <guid isPermaLink="true">http://www.dreamxu.com/windows-ubuntu-install-qt5/</guid>
        
        <category>记录</category>
        
        <category>Windows</category>
        
        <category>Ubuntu</category>
        
        <category>Install</category>
        
        <category>Qt</category>
        
      </item>
    
      <item>
        <title>汉化 Eclipse</title>
        <description>&lt;h2 id=&quot;下载&quot;&gt;下载&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;http://www.eclipse.org/downloads/&quot;&gt;http://www.eclipse.org/downloads/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;配置好 java 开发环境（见博文《&lt;a href=&quot;/windows-linux-install-java/&quot;&gt;配置 JAVA 环境&lt;/a&gt;》），eclipse 就可以用了。&lt;/p&gt;

&lt;h2 id=&quot;汉化&quot;&gt;汉化&lt;/h2&gt;

&lt;p&gt;在 &lt;a href=&quot;http://www.eclipse.org/babel/downloads.php&quot;&gt;http://www.eclipse.org/babel/downloads.php&lt;/a&gt; 找到 Babel Language Pack Zips and Update Sites 然后根据自己的版本找到对应的站点。
比如说的我版本是 Version: Juno Service Release 2“，则对应的站点就是 http://download.eclipse.org/technology/babel/update-site/R0.10.1/juno&lt;br /&gt;
&lt;strong&gt;注意&lt;/strong&gt;: 有的 eclipse 显示的版本号可能不是代号，类似 4.2.*。
Eclipse 4.2 的代号就是 juno，具体版本对应的代号自己可以去查。&lt;/p&gt;

&lt;p&gt;接下来打开 Eclipse。
依次点击 Help – Install New Software，把刚才的站点地址复制到 Work with 中，点击右边的 Add，在 Name 中填入 eclipse-babel 点击 OK ，
最后在下面出现的列表中将 Babel Language Packs in Chinese (Simplified) 打钩，最后一路 Next 就可以了。&lt;/p&gt;
</description>
        <pubDate>Tue, 23 Apr 2013 00:00:00 +0800</pubDate>
        
        <link>http://www.dreamxu.com/chinese-eclipse/</link>
        <guid isPermaLink="true">http://www.dreamxu.com/chinese-eclipse/</guid>
        
        <category>记录</category>
        
        <category>Chinese</category>
        
        <category>Eclipse</category>
        
      </item>
    
      <item>
        <title>Windows &amp;amp; Linux 配置 JAVA 环境</title>
        <description>&lt;h2 id=&quot;下载-jdk&quot;&gt;下载 JDK&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;http://www.oracle.com/technetwork/java/javase/downloads/index.html&quot;&gt;http://www.oracle.com/technetwork/java/javase/downloads/index.html&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;介绍几个环境变量&quot;&gt;介绍几个环境变量&lt;/h2&gt;

&lt;p&gt;首先，先来介绍一下需要的三个环境变量&lt;/p&gt;

&lt;p&gt;JAVA_HOME —— JAVA 的安装目录。
需要 JAVA 环境的软件可能会用到，比如 tomcat, eclipse 等。
配置 PATH, CLASSPATH 变量的时候会用到，增加了方便性，复用性&lt;/p&gt;

&lt;p&gt;Path —— 可执行文件搜索路径。
当执行一个可执行文件的时候，如果在当前目录下找不到，系统会依次到 Path 指定的目录下去寻找，直到找到第一个，若找不到则报错。
JAVA 的编译命令（javac），执行命令（java），提取注释工具（javadoc）等，都在 %JAVA_HOME%\bin 目录下&lt;/p&gt;

&lt;p&gt;CLASSPATH —— 类搜索路径。
用于搜索 JAVA 程序编译或者运行时用到的类。
自己写的一些类可能放在当前目录下，所以在环境变量中加上 .; 表示当前目录。
还有一些常用的类库 rt.jar（JAVA基础类库。默认加载的，可以不加到 CLASSPATH 中）, dt.jar（关于运行环境的类库）, tools.jar（工具类库）。
jar 就是把一些 java 文件打包起来了，为了方便&lt;/p&gt;

&lt;h2 id=&quot;windows&quot;&gt;Windows&lt;/h2&gt;

&lt;p&gt;右键我的电脑，打开属性，然后点击高级系统设置，就能看见环境变量&lt;br /&gt;
假定 JDK 安装在 &lt;code class=&quot;highlighter-rouge&quot;&gt;C:\Program Files\Java\jdk1.7.0_17&lt;/code&gt;&lt;br /&gt;
修改系统变量，步骤如下:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;新建变量 JAVA_HOME，变量值为 &lt;code class=&quot;highlighter-rouge&quot;&gt;C:\Program Files\Java\jdk1.7.0_17&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;找到 Path 变量，在变量值中添加 &lt;code class=&quot;highlighter-rouge&quot;&gt;;%JAVA_HOME%\bin&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;新建变量 CLASSPATH，变量值为 &lt;code class=&quot;highlighter-rouge&quot;&gt;.;%JAVA_HOME%\lib\dt.jar;%JAVA_HOME%\lib\tools.jar&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;点击确定，设置完毕。
在cmd中输入 java -version ，如果出现 java version “1.7.0_17″…，环境变量就设置成功了。&lt;/p&gt;

&lt;h2 id=&quot;linux&quot;&gt;Linux&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;方法一&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;首先下载好 jdk 的包，假设下载的是 jdk-7u17-linux-x64.tar.gz&lt;br /&gt;
然后是解压到指定目录&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo tar xvf jdk-7u17-linux-x64.tar.gz -C /usr/lib
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;修改环境变量&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo vim /etc/profile
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;打开 profile 文件，在末尾添加以下内容&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;JAVA_HOME&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/usr/lib/jdk1.7.0_17
&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;PATH&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$JAVA_HOME&lt;/span&gt;/bin:&lt;span class=&quot;nv&quot;&gt;$PATH&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;CLASSPATH&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;.:&lt;span class=&quot;nv&quot;&gt;$JAVA_HOME&lt;/span&gt;/lib/dt.jar:&lt;span class=&quot;nv&quot;&gt;$JAVA_HOME&lt;/span&gt;/lib/tools.jar
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;方法二（ubuntu）&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;ubuntu 系统中，本身有 OpenJDK 可以使用，
但你如果更喜欢 Oracle JDK，可以通过添加 PPA 的方式，安装和更新都比较方便&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sudo add-apt-repository ppa:webupd8team/java
sudo apt-get update
sudo apt-get install oracle-java7-installer
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;输入命令 java -version ，如果出现 java version …，那么就恭喜你了&lt;/p&gt;
</description>
        <pubDate>Wed, 03 Apr 2013 00:00:00 +0800</pubDate>
        
        <link>http://www.dreamxu.com/windows-linux-install-java/</link>
        <guid isPermaLink="true">http://www.dreamxu.com/windows-linux-install-java/</guid>
        
        <category>记录</category>
        
        <category>Windows</category>
        
        <category>Linux</category>
        
        <category>Install</category>
        
        <category>Java</category>
        
      </item>
    
      <item>
        <title>一滴水</title>
        <description>&lt;p&gt;上善若水。水善利万物而不争，处众人之所恶，故几于道。 居善地，心善渊，与善仁，言善信，政善治，事善能，动善时。夫唯不争，故无尤。&lt;br /&gt;
——《道德经》&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;一个爱玩的孩子&quot;&gt;一个爱玩的孩子&lt;/h2&gt;

&lt;p&gt;很早之前就像开通一个博客了，写点思考后的东西，分享些好玩的东西。
今天如愿以偿了。第一篇博文，就随便聊聊吧。&lt;/p&gt;

&lt;p&gt;人生匆匆二十载，转眼已是大二的孩子了。有时想起。
泥巴做的城堡，沙子围成的护城河。
骨感的自行车，满地的零件。
记忆的割草机（用小电动马达自己做的），磨损了的齿轮。
纸质的翼手龙，精致的艺术品。
木质的滑翔机，满是胶水的手。
一叠叠的点卡，一个个挥洒热血的夜晚。
自制的小书籍，奇妙的思考。
傻笑着自己真是个爱玩的孩子。&lt;/p&gt;

&lt;p&gt;现在又多了个玩法，玩技术，各种有意思的都想去玩玩，玩无止境，玩得开心。&lt;/p&gt;

&lt;h2 id=&quot;一个平凡的生命&quot;&gt;一个平凡的生命&lt;/h2&gt;

&lt;p&gt;并不刻意，执着什么。自闲地去追寻灵感或者心中的那个梦。&lt;/p&gt;

&lt;p&gt;尊重每一个生命，尊重彼此。每一个人都是特殊的，都是第一无二的个体，都有独一无二的思想。
但是，在宇宙中，我们都是那么微不足道。在茫茫人海中，每个人又是那么平凡。
这是特殊与平凡的统一。&lt;/p&gt;

&lt;p&gt;生命很神奇，我选择&lt;strong&gt;相信生命&lt;/strong&gt;的力量，也就选择了&lt;strong&gt;相信奇迹&lt;/strong&gt;。
生命之初，他们肯定想不到，他们的后代已经活跃在了整个星球，并且还将继续往远方走去。
即使我觉得事情百分之百不可能成功，我也会去试一试。
当你陷入绝境时，也是灵感到来之时。&lt;/p&gt;

&lt;p&gt;一个平凡的人，是&lt;strong&gt;自由&lt;/strong&gt;的，是&lt;strong&gt;快乐&lt;/strong&gt;的。
我是一个坚定，踏实的平凡人。&lt;/p&gt;

&lt;h2 id=&quot;神游蓝田水&quot;&gt;神游蓝田水&lt;/h2&gt;

&lt;p&gt;当我累了，我可以躺在那么一个地方。那里很静，紫色的天空中，镶嵌着星星蓝光，右边天空有个蓝色光环，多像盘古的眼睛啊。
哦，原来它不只是光，还是时空隧道，现在到远古，远古到现在，融合到了一起。
一切都是那么和谐，不多不少。
环顾四周，只看见有一个圈，渐渐地便模糊了，不知这是天还是地。&lt;/p&gt;

&lt;p&gt;气蒸幻梦泊，神游蓝田水。三个幻梦泊之间似乎有什么，是一个人。
他静静地躺在那里，思想神游四方，心飞向宇宙深处，忘却了一切烦恼，心在游。
庄子所追求的真正的逍遥游，是不依靠外物的，只有心才能驾驭这无比沉重的身躯，化而成为灵，去往那未知的远方……&lt;/p&gt;

&lt;h2 id=&quot;为什么要写博客&quot;&gt;为什么要写博客&lt;/h2&gt;

&lt;p&gt;写给以后的自己，给自己一个检索的工具。
大脑固然好用，但是随着时间地过去，大脑会自动略去点什么（多么智能啊），有时是自己想忘记一些东西。
天大脑一时检索不到的时候，一个外界的提示真是雪中送炭啊。&lt;/p&gt;

&lt;p&gt;自由的分享，没有时空的限制。
赶上互联网的好时代，当然得好好利用一下了。
好东西，好想法，可不能藏着，你不知道哪天你会忘了你的灵感。
你不知道，你的想法在地球上跑了一圈，回来的时候已经成为神了。&lt;/p&gt;

&lt;p&gt;很容易实现一对多的交流，交到更多的朋友。
当你想要了解一个人的时候，可以和他说说话，和他一起玩。
如果你想和很多人交朋友的话，你必须重复上述过程。
把自己呈现在这里，若你感受到了我的真诚，那么我就不用重复上述的步骤，节约了很多时间，就可以和更多的人一起探讨，做更多的事情了。&lt;/p&gt;

&lt;p&gt;书写是为了更好的思考。
为了写出来的东西清晰有条理，你的思考必须要更加清晰有条理，清晰的思考无疑会带来不一样的收获。
当你把自己认为知道的东西讲出来的时候，你会发现，当初自己的理解竟然是那么肤浅，然后你继续思考，离事物的本质就会越来越近。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;价值不是体现在你有多牛逼，而是体现在你给世界带来了多少好的变化。&lt;/strong&gt;
经过思考之后写出来的东西，总存在着价值。
不管多么浅显的想法总有人需要，不管多么高深的见解总有人不屑。
我写我的，你看你的，我们是和睦的一家人。&lt;/p&gt;

&lt;h2 id=&quot;一个静静的博客&quot;&gt;一个静静的博客&lt;/h2&gt;

&lt;p&gt;第一次看到 Twenty Twelve 主题的时候，就认定它了，简约而不简陋。
而且是自适应的，在移动设备上也表现良好。
在此之上做了很多修改，努力营造一个静静的气氛。
不知道各位注意到导航栏下面右边的小箭头了吗，小箭头所在的那一行是可以用鼠标点击的，可以将侧边栏隐藏。
如果你觉得侧边栏影响了你的阅读，你可以隐藏它。&lt;/p&gt;

&lt;p&gt;努力做到页面上没有让你分心的东西，感到世界的安静，心灵的安静。
当你在阅读的时候，能够感觉到，和文章身后的那个人，有着直接的交流。
我静静地写下，只是为了静静地呈现。&lt;/p&gt;

&lt;h2 id=&quot;一篇没有结尾的文章&quot;&gt;一篇没有结尾的文章&lt;/h2&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;后记一-2013-07-19&quot;&gt;后记一 (2013-07-19)&lt;/h2&gt;

&lt;p&gt;我还记得当时学校正好停电，上面的那篇文章写了大约1天多的时间。&lt;br /&gt;
然后把它作为博客的第一篇，当时用 &lt;a href=&quot;https://cn.wordpress.org&quot;&gt;wordpress&lt;/a&gt; 构建的博客系统，后来写得文章也很少。&lt;br /&gt;
原因是很多了，最主要呢是自己太懒了。&lt;/p&gt;

&lt;p&gt;这次花了大概3天的时间，自己一点一点写出了这个博客，用的是 &lt;a href=&quot;http://jekyllrb.com&quot;&gt;jekyll&lt;/a&gt;。
比起 wordpress 我更加喜欢 jekyll ，更加有写作的欲望了。
用 &lt;a href=&quot;http://zh.wikipedia.org/wiki/Markdown&quot;&gt;markdown&lt;/a&gt; 来写博客，多么优美！用 &lt;a href=&quot;http://git-scm.com&quot;&gt;git&lt;/a&gt; 来管理博客，多么完美！用 &lt;a href=&quot;https://github.com&quot;&gt;github&lt;/a&gt; 来托管博客，多么简单！&lt;/p&gt;

&lt;p&gt;这次的主题完全是自己一点点 css, html 扣出来的。
主题当然还是安静、简洁的感觉了。外观改了4个版本，真心不容易啊。
最终决定这样了，只留下必要的分割线，无界胜有界。&lt;/p&gt;

&lt;p&gt;我要勤劳，我要勤劳，我要勤劳……（流星划过 —&amp;gt;）&lt;/p&gt;

&lt;h2 id=&quot;后记二-2016-07-10&quot;&gt;后记二 (2016-07-10)&lt;/h2&gt;

&lt;p&gt;会有人看到这里吗 ◔‸◔？ 我猜是不会。&lt;/p&gt;

&lt;p&gt;距离正式写博客已经三年多了，然而并没有写出什么有用的东西。
记录性的东西比较多，自己探索思考的东西比较少，还要多多努力啊。&lt;/p&gt;

&lt;p&gt;这次整体更新了一下博客（包括功能和样式），变得更加好看了，可能吧。
不过功能肯定是增强了，分类功能我觉得基本已经做到完美了。
通过「&lt;a href=&quot;/tags/&quot;&gt;标签&lt;/a&gt;」已经能够组成任意的网状关系了，而且这次用 JS 实现了完美的前端界面：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;可以任意组合所有的标签来实时显示文章。&lt;/li&gt;
  &lt;li&gt;有记忆功能，你所选的标签实时反应在 URL 上，只要你收藏了 URL 你就可以随时访问想要的标签组合。&lt;/li&gt;
  &lt;li&gt;因为数据都是在本地的，所以访问速度极快，瞬间呈现。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;还有一个重要的功能是搜索，不过可以使用 Google + Site 关键字来搜索，倒也不用我费什么事了。&lt;/p&gt;

&lt;p&gt;今天就聊到这里吧，各位我们下次再聊。（其实是懒得打字了）&lt;/p&gt;
</description>
        <pubDate>Sat, 23 Mar 2013 00:00:00 +0800</pubDate>
        
        <lastBuildDate>Sun, 10 Jul 2016 01:43:40 +0800</lastBuildDate>
        
        <link>http://www.dreamxu.com/drop-of-water/</link>
        <guid isPermaLink="true">http://www.dreamxu.com/drop-of-water/</guid>
        
        <category>随笔</category>
        
        <category>一滴水</category>
        
        <category>奇迹</category>
        
        <category>自由</category>
        
      </item>
    
      <item>
        <title>彻底空寂的心</title>
        <description>&lt;p&gt;从出生到现在，我们总是与外界进行各种交换。
生命在于“运动”，这是生命的规律。但我总是在追求着什么……&lt;/p&gt;

&lt;p&gt;有时候我想进入一种境界，彻底空寂。
在此我体验到了一个量子化的自我，可以瞬间到达“宇宙”的任何地方，思维如同“星云生物”般敏捷，但那时我的心是空寂的。&lt;/p&gt;

&lt;p&gt;空寂的心所体会到的神识，是在“梦”之外的世界无法触及的。
“死亡”之内，亦未尝不可。&lt;/p&gt;
</description>
        <pubDate>Thu, 29 Mar 2012 00:00:00 +0800</pubDate>
        
        <link>http://www.dreamxu.com/empty-heart/</link>
        <guid isPermaLink="true">http://www.dreamxu.com/empty-heart/</guid>
        
        <category>随笔</category>
        
        <category>空寂</category>
        
      </item>
    
  </channel>
</rss>
