<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <title>安装及配置 Mac 上的 Rime 输入法——鼠鬚管 (Squirrel) | 明无梦</title>
  <meta name="description" content="  奉送原甫侍讀出守永興  嘉祐五年  歐陽修  酌君以荊州魚枕之蕉  贈君以宣城鼠鬚之管  酒如長虹飲滄海  筆若駿馬馳平坂  受君尚少力方豪  嗟我久衰歡漸鮮  文章驚世知名早  意氣論交相得晩  魚枕蕉  一舉十分當覆盞  鼠鬚管  爲物雖微情不淺  新詩醉墨時一揮  別後寄我無辭遠">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://www.dreamxu.com/install-config-squirrel/">
  <link rel="alternate" type="application/rss+xml" title="明无梦" href="http://www.dreamxu.com/feed.xml">
  <link rel="icon" href="/favicon.ico" type="image/x-icon">
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">明无梦</a>

    <nav class="site-nav">
      <a class="menu-icon" id="js-nav-menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <a class="menu-icon-activate" id="js-nav-menu-icon-activate">
        <svg viewBox="0 0 36 15">
          <path fill="#424242" d="m36,1.484c0,0.82 -0.665,1.484 -1.484,1.484l-33.032,0c-0.819,0.001 -1.484,-0.664 -1.484,-1.484l0,0c0,-0.819 0.665,-1.484 1.484,-1.484l33.032,0c0.82,0 1.484,0.665 1.484,1.484l0,0z"/>
          <path fill="#424242" d="m36,7.516c0,0.819 -0.665,1.484 -1.484,1.484l-33.032,0c-0.819,0 -1.484,-0.665 -1.484,-1.484l0,0c0,-0.82 0.665,-1.484 1.484,-1.484l33.032,0c0.82,-0.001 1.484,0.664 1.484,1.484l0,0z"/>
          <path fill="#424242" d="m36,13.516c0,0.819 -0.665,1.484 -1.484,1.484l-33.032,0c-0.819,0 -1.484,-0.665 -1.484,-1.484l0,0c0,-0.82 0.665,-1.484 1.484,-1.484l33.032,0c0.82,-0.001 1.484,0.664 1.484,1.484l0,0z"/>
        </svg>
      </a>

      <div class="trigger" id="js-nav-menu-trigger">
        <a class="page-link" href="/archive">归档</a>
        <a class="page-link" href="/tags">标签</a>
        <a class="page-link" href="/books">书籍</a>
        <a class="page-link" href="/tweet/2018">微语</a>
        <a class="page-link" href="/about">关于</a>
        <a class="page-link" href="/rss.xml">订阅</a>
      </div>
    </nav>

  </div>

</header>


    <div class="content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title"><a href="/install-config-squirrel/">安装及配置 Mac 上的 Rime 输入法——鼠鬚管 (Squirrel)</a></h1>
    <ul class="post-meta">
      <li class="published-date">2014-06-09</li>
      
        <li class="updated-date"> | 更新: 2015-06-03</li>
      

      
        <li> | 标签: </li>
        
          <li class="post-tag"><a href="/tags/?names=记录#tag-list-display">记录</a></li>
        
          <li class="post-tag"><a href="/tags/?names=Rime#tag-list-display">Rime</a></li>
        
          <li class="post-tag"><a href="/tags/?names=Squirrel#tag-list-display">Squirrel</a></li>
        
          <li class="post-tag"><a href="/tags/?names=小鹤双拼#tag-list-display">小鹤双拼</a></li>
        
          <li class="post-tag"><a href="/tags/?names=鼠须管#tag-list-display">鼠须管</a></li>
        
          <li class="post-tag"><a href="/tags/?names=小狼毫#tag-list-display">小狼毫</a></li>
        
          <li class="post-tag"><a href="/tags/?names=输入法#tag-list-display">输入法</a></li>
        
          <li class="post-tag"><a href="/tags/?names=Mac#tag-list-display">Mac</a></li>
        
          <li class="post-tag"><a href="/tags/?names=Install#tag-list-display">Install</a></li>
        
      
    </ul>
  </header>

  <div class="post-content" itemprop="articleBody">
    <blockquote>
  <p>奉送原甫侍讀出守永興  <br />
嘉祐五年  <br />
歐陽修</p>

  <p>酌君以荊州魚枕之蕉  <br />
贈君以宣城鼠鬚之管  <br />
酒如長虹飲滄海  <br />
筆若駿馬馳平坂  <br />
受君尚少力方豪  <br />
嗟我久衰歡漸鮮  <br />
文章驚世知名早  <br />
意氣論交相得晩  <br />
魚枕蕉  <br />
一舉十分當覆盞  <br />
鼠鬚管  <br />
爲物雖微情不淺  <br />
新詩醉墨時一揮  <br />
別後寄我無辭遠</p>
</blockquote>

<p>这首诗应该就是「鼠须管」的出处吧</p>

<p>奉上一张用「小鹤双拼·语句流」输入的效果，中英混输 + Emoji 表情哦</p>

<p><img src="/assets/images/posts/2014-06-12_230341.gif" alt="Rime输入法演示" /></p>

<h2 id="安装">安装</h2>

<p>就一条理由就可以使我弃用使用 N 多年的其它输入法</p>
<ol>
  <li><a href="https://github.com/lotem/squirrel">https://github.com/lotem/squirrel</a></li>
</ol>

<p>Rime 官网：<a href="http://rime.im/">http://rime.im/</a></p>

<p>可以去官网下载或者使用 Homebrew Cask 来安装（截至到今天版本非最新）</p>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>brew cask install squirrel
</pre></td></tr></tbody></table>
</div>
</div>

<p>刚安装好，拼音输入是繁体的，按组合键 <code class="highlighter-rouge">Ctrl+`</code> 呼出输入法方案选单（如下），切换为「汉字」就可以输入简体了</p>

<p><img src="/assets/images/posts/2014-06-09_212556.png" alt="输入法方案选单" /></p>

<h2 id="配置">配置</h2>

<table>
  <tbody>
    <tr>
      <td>自行查看《[Rime 定製指南</td>
      <td>GitHub][]》</td>
    </tr>
  </tbody>
</table>

<p>以下是我对官网说明书的一些摘录，加上我的一些修改，只限于对拼音输入的理解  <br />
如果你用的是小鹤双拼，可以直接看下文《<a href="#详细配置「小鹤双拼·语句流」">详细配置「小鹤双拼·语句流」</a>》，介绍的是「小鹤双拼·语句流」的配置。<br />
语句流和普通的输入方式在配置上只有一条配置语句的不同，如果不喜欢语句流这种方式，改成普通的也非常简单，下文有介绍。<br />
BTW, 现在我自己都不使用「语句流」这种方式了</p>

<h3 id="数据文件位置">数据文件位置</h3>

<p>共享资料夹：”/Library/Input Methods/Squirrel.app/Contents/SharedSupport/”  <br />
用户资料夹：”~/Library/Rime/”</p>

<h3 id="用户资料夹内的文件说明如下">用户资料夹内的文件说明如下</h3>

<ul>
  <li>〔全局设定〕 default.yaml</li>
  <li>〔发行版设定〕 weasel.yaml</li>
  <li>〔预设输入方案副本〕 &lt;方案标识&gt;.schema.yaml</li>
  <li><strong>※〔安装信息〕 installation.yaml</strong></li>
  <li><strong>※〔用户状态信息〕 user.yaml</strong></li>
</ul>

<p>编译输入方案所产生的二进制文件：</p>

<ul>
  <li>〔Rime 棱镜〕 &lt;方案标识&gt;.prism.bin</li>
  <li>〔Rime 固态词典〕 &lt;词典名&gt;.table.bin</li>
  <li>〔Rime 反查词典〕 &lt;词典名&gt;.reverse.bin</li>
</ul>

<p>记录用户写作习惯的文件：</p>

<ul>
  <li><strong>※〔用户词典〕 &lt;词典名&gt;.userdb.kct</strong></li>
  <li><strong>※〔用户词典快照〕 &lt;词典名&gt;.userdb.txt、&lt;词典名&gt;.userdb.kct.snapshot 见于同步文件夾</strong></li>
</ul>

<p>以及用户自己设定的：</p>

<ul>
  <li><strong>※〔用户对全局设定的定制信息〕 default.custom.yaml</strong></li>
  <li><strong>※〔用户对预设输入方案的定制信息〕 &lt;方案标识&gt;.custom.yaml</strong></li>
  <li><strong>※〔用户自制输入方案〕及配套的词典源文件</strong></li>
</ul>

<p><strong>注：以上标有「※ 号」和「粗体」的文件，包含用户资料，您在清理文件时要注意备份！</strong></p>

<h3 id="自定义配置">自定义配置</h3>

<h4 id="对全局的定制">对全局的定制</h4>

<p>新建文件 <code class="highlighter-rouge">touch ~/Library/Rime/default.custom.yaml</code>, 内容如下</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10</pre></td><td class="code"><pre><span class="c1"># default.custom.yaml, 全局生效</span>
<span class="c1"># 添加小鹤双拼到方案选单</span>
<span class="s">patch</span><span class="pi">:</span>
  <span class="s">schema_list</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">schema</span><span class="pi">:</span> <span class="s">double_pinyin_flypy</span>   <span class="c1"># 新增小鹤双拼</span>
    <span class="pi">-</span> <span class="s">schema</span><span class="pi">:</span> <span class="s">luna_pinyin</span>
    <span class="pi">-</span> <span class="s">schema</span><span class="pi">:</span> <span class="s">cangjie5</span>
    <span class="pi">-</span> <span class="s">schema</span><span class="pi">:</span> <span class="s">luna_pinyin_fluency</span>
    <span class="pi">-</span> <span class="s">schema</span><span class="pi">:</span> <span class="s">luna_pinyin_simp</span>
    <span class="pi">-</span> <span class="s">schema</span><span class="pi">:</span> <span class="s">luna_pinyin_tw</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h4 id="对输入方案的定制">对输入方案的定制</h4>

<p>比如定制小鹤双拼  <br />
新建文件 <code class="highlighter-rouge">touch ~/Library/Rime/double_pinyin_flypy.custom.yaml</code></p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3</pre></td><td class="code"><pre><span class="c1"># double_pinyin_flypy.custom.yaml, 只对小鹤双拼生效</span>
<span class="s">patch</span><span class="pi">:</span>
  <span class="s">translator/preedit_format</span><span class="pi">:</span> <span class="pi">{}</span>     <span class="c1"># 输入双拼码的时候不转化为全拼码</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>配置好之后需要「重新部署」：切换到「鼠须管」输入法，点击右上角的的输入法图标，点击「重新部署」  <br />
之后就可以用小鹤双拼了</p>

<h3 id="外观设定">外观设定</h3>

<div class="language-yaml highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31</pre></td><td class="code"><pre><span class="c1"># 适用于【鼠须管】0.9.13+</span>
<span class="c1"># 位置：~/Library/Rime/squirrel.custom.yaml</span>
<span class="c1"># 用法：想要哪项生效，就删去该行行首的 "#" 字符，但注意保留用于缩进的空格</span>

<span class="s">patch</span><span class="pi">:</span>
<span class="c1">#  us_keyboard_layout: true                 # 键盘选项：应用美式键盘布局</span>
<span class="c1"># 状态通知，适当，也可设为全开（always）全关（never）</span>
<span class="c1">#  show_notifications_when: appropriate</span>
<span class="c1">#</span>
<span class="c1">#  style/color_scheme: luna                 # 选择配色方案</span>
<span class="c1">#  style/horizontal: true                   # 候选窗横向显示</span>
<span class="c1">#  style/inline_preedit: false              # 关闭内嵌编码，这样就可以显示首行的拼音</span>
<span class="c1">#  style/corner_radius: 10                  # 窗口圆角半径</span>
<span class="c1">#  style/border_height: 0                   # 窗口边界高度，大于圆角半径才有效果</span>
<span class="c1">#  style/border_width: 0                    # 窗口边界宽度，大于圆角半径才有效果</span>
<span class="c1">#  style/line_spacing: 1                    # 候选词的行间距</span>
<span class="c1">#  style/spacing: 5                         # 在非内嵌编码模式下，预编辑和候选词之间的间距</span>
<span class="c1">#  style/font_face: "Hiragino Sans GB W3"   # 字体名称</span>
<span class="c1">#  style/font_point: 21                     # 字号</span>

<span class="c1"># 注：预设的配色方案及代码（指定为 style/color_scheme ）</span>
<span class="c1">#   碧水 - aqua</span>
<span class="c1">#   青天 - azure</span>
<span class="c1">#   明月 - luna</span>
<span class="c1">#   墨池 - ink</span>
<span class="c1">#   孤寺 - lost_temple</span>
<span class="c1">#   暗堂 - dark_temple</span>
<span class="c1">#   星际我争霸 - starcraft</span>
<span class="c1">#   谷歌 - google</span>
<span class="c1">#   晒经石 - solarized_rock</span>
<span class="c1">#   简约白 - clean_white</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="一些快捷键">一些快捷键</h3>

<h4 id="输入的时候删除一个音节">输入的时候删除一个音节</h4>

<p><code class="highlighter-rouge">⌃ + BackSpace</code> 或 <code class="highlighter-rouge">⇧ + BackSpace</code></p>

<h4 id="从用户词典中删除误上屏的错词">从用户词典中删除误上屏的错词</h4>

<p><code class="highlighter-rouge">Shift + Fn + Delete</code></p>

<h4 id="emacs-风格的编辑键">Emacs 风格的编辑键</h4>

<ul>
  <li>↑：<code class="highlighter-rouge">⌃ + p</code></li>
  <li>↓：<code class="highlighter-rouge">⌃ + n</code></li>
  <li>←：<code class="highlighter-rouge">⌃ + b</code></li>
  <li>→：<code class="highlighter-rouge">⌃ + f</code></li>
  <li>上页：<code class="highlighter-rouge">⌥ + v</code></li>
  <li>下页：<code class="highlighter-rouge">⌃ + v</code></li>
  <li>句首：<code class="highlighter-rouge">⌃ + a</code></li>
  <li>句末：<code class="highlighter-rouge">⌃ + e</code></li>
  <li>回退：<code class="highlighter-rouge">⌃ + h</code></li>
  <li>刪除：<code class="highlighter-rouge">⌃ + d</code></li>
  <li>清空：<code class="highlighter-rouge">⌃ + g</code></li>
</ul>

<p>有时候快捷键可能会用不了，那是因为其它应用首先获取了快捷键，这样输入法就不会影响你对其它软件的控制</p>

<h3 id="定制标点符号">定制标点符号</h3>

<p>可以参考 default.yaml 和相应输入法方案的配置（比如 double_pinyin_flypy.schema.yaml）</p>

<p>比如在 default.yaml 中看到</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3</pre></td><td class="code"><pre><span class="s">punctuator</span><span class="pi">:</span>
  <span class="s">half_shape</span><span class="pi">:</span>
    <span class="s2">"</span><span class="s">/"</span><span class="pi">:</span> <span class="pi">[</span><span class="s2">"</span><span class="s">、"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">/"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">／"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">÷"</span><span class="pi">]</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>意思是当你输入 “/” 的时候，会出现上面列表中的候选  <br />
若你想让 “/键” 直接输出 “、”，可以做如下修改</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6</pre></td><td class="code"><pre><span class="c1"># double_pinyin_flypy.custom.yaml</span>
<span class="s">patch</span><span class="pi">:</span>
  <span class="s">punctuator/full_shape</span><span class="pi">:</span>
    <span class="s2">"</span><span class="s">/"</span><span class="pi">:</span> <span class="s2">"</span><span class="s">、"</span>
  <span class="s">punctuator/half_shape</span><span class="pi">:</span>
    <span class="s2">"</span><span class="s">/"</span><span class="pi">:</span> <span class="s2">"</span><span class="s">、"</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>如果你的用的输入方案导入了 symbols.yaml, 你就可以参考 symbols.yaml 文件来修改了，<br />
里面还有各种特殊符号</p>

<h4 id="活用标点创建自定义词组">活用标点创建自定义词组</h4>

<p>这还有个用法，你可以将一个键或多个键专门用于输入自定义的词组比如</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4</pre></td><td class="code"><pre><span class="c1"># double_pinyin_flypy.custom.yaml</span>
<span class="s">patch</span><span class="pi">:</span>
  <span class="s">punctuator/half_shape</span><span class="pi">:</span>
    <span class="s2">"</span><span class="s">+"</span><span class="pi">:</span> <span class="s2">"</span><span class="s">+_+"</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>当你输入 “+” 的时候就会变成 “+_+” 了</p>

<h3 id="在特定程序里关闭中文输入">在特定程序里关闭中文输入</h3>

<p>在一些程序里很少需要输入中文，于是让鼠须管在这些程序里默认不开启中文输入</p>

<p>要自定义 Mac 应用程序的初始转换状态，<br />
首先查看应用的 Info.plist 文件得到该应用的 Bundle Identifier, <br />
通常是形如 com.apple.Xcode 的字符串</p>

<p>例如，要在 Xcode 里面默认关闭中文输入，又要在 Alfred 2 里面恢复开启中文输入，可如此设定：</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5</pre></td><td class="code"><pre><span class="c1"># squirrel.custom.yaml</span>
<span class="s">patch</span><span class="pi">:</span>
  <span class="s">app_options/com.apple.Xcode</span><span class="pi">:</span>
    <span class="s">ascii_mode</span><span class="pi">:</span> <span class="s">true</span>
  <span class="s">app_options/com.runningwithcrayons.Alfred-2</span><span class="pi">:</span> <span class="pi">{}</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>修改之前先查看以下 squirrel.yaml 文件，默认设置了一些常用的软件</p>

<h3 id="更改切换中西文的快捷键">更改切换中西文的快捷键</h3>

<div class="language-yaml highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</pre></td><td class="code"><pre><span class="c1"># default.custom.yaml</span>
<span class="c1">#</span>
<span class="c1"># 可用的按键有 Caps_Lock, Shift_L, Shift_R, Control_L, control_R</span>
<span class="c1"># Mac 系统上的鼠须管不能区分左、右，因此只有对 Shift_L, Control_L 的设定起作用</span>
<span class="c1">#</span>
<span class="c1"># 已输入编码时按切换键，可以进一步设定输入法中西文切换的形式</span>
<span class="c1"># 可选的临时切换策略有三：</span>
<span class="c1"># inline_ascii 在输入法的临时西文编辑区内输入字母、数字、符号、空格等，回车上屏后自动复位到中文</span>
<span class="c1"># commit_text 已输入的候选文字上屏并切换至西文输入模式</span>
<span class="c1"># commit_code 已输入的编码字符上屏并切换至西文输入模式</span>
<span class="c1"># 设为 noop, 屏蔽该切换键</span>
<span class="c1">#</span>
<span class="c1"># 如果要把Caps Lock 设为只改变字母的大小写而不做中西文切换，可将 Caps_Lock 对应的切换方式设为 noop</span>
<span class="c1"># 如果要以Caps Lock 切换到西文模式，默认输出小写字母，请置 ascii_composer/good_old_caps_lock: false</span>
<span class="c1"># 如果要以Caps Lock 切换到西文模式，默认输出大写字母，请置 ascii_composer/good_old_caps_lock: true</span>

<span class="s">patch</span><span class="pi">:</span>
  <span class="s">ascii_composer/good_old_caps_lock</span><span class="pi">:</span> <span class="s">true</span>
  <span class="s">ascii_composer/switch_key</span><span class="pi">:</span>
    <span class="s">Caps_Lock</span><span class="pi">:</span> <span class="s">noop</span>
    <span class="s">Shift_L</span><span class="pi">:</span> <span class="s">commit_code</span>
    <span class="s">Shift_R</span><span class="pi">:</span> <span class="s">noop</span>
    <span class="s">Control_L</span><span class="pi">:</span> <span class="s">noop</span>
    <span class="s">Control_R</span><span class="pi">:</span> <span class="s">noop</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="以方括号--和--来换页">以方括号 “[” 和 “]” 来换页</h3>

<div class="language-yaml highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9</pre></td><td class="code"><pre><span class="c1"># default.custom.yaml</span>
<span class="s">patch</span><span class="pi">:</span>
  <span class="s">key_binder/bindings</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">when</span><span class="pi">:</span> <span class="s">paging</span>
      <span class="s">accept</span><span class="pi">:</span> <span class="s">bracketleft</span>
      <span class="s">send</span><span class="pi">:</span> <span class="s">Page_Up</span>
    <span class="pi">-</span> <span class="s">when</span><span class="pi">:</span> <span class="s">has_menu</span>
      <span class="s">accept</span><span class="pi">:</span> <span class="s">bracketright</span>
      <span class="s">send</span><span class="pi">:</span> <span class="s">Page_Down</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="定制每页候选数">定制每页候选数</h3>

<div class="language-yaml highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3</pre></td><td class="code"><pre><span class="c1"># default.custom.yaml</span>
<span class="s">patch</span><span class="pi">:</span>
  <span class="s">menu/page_size</span><span class="pi">:</span> <span class="s">5</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>来张 15 个候选的靓照</p>

<p><img src="/assets/images/posts/2014-06-12_221853.png" alt="输入法15个候选词" /></p>

<h3 id="关闭用户词典和字频调整">关闭用户词典和字频调整</h3>

<div class="language-yaml highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3</pre></td><td class="code"><pre><span class="c1"># double_pinyin_flypy.custom.yaml</span>
<span class="s">patch</span><span class="pi">:</span>
  <span class="s">translator/enable_user_dict</span><span class="pi">:</span> <span class="s">false</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="关于调试">关于调试</h3>

<p>使用过程中难免会出现莫名其妙的问题，这个时候我们可以通过如下方法来查找错误  <br />
官方文档关于调试的章节 <a href="https://github.com/rime/home/wiki/RimeWithSchemata#關於調試">https://github.com/rime/home/wiki/RimeWithSchemata#關於調試</a></p>

<h2 id="词库管理及用户资料的同步">词库管理及用户资料的同步</h2>

<h3 id="用户词库的导入导出">用户词库的导入导出</h3>

<p>目前鼠须管没有图形工具，使用命令行工具也是一样的</p>

<p>先做一些准备工作</p>

<ol>
  <li>
    <p>新建文件 <code class="highlighter-rouge">touch ~/Library/Rime/rime_dict_manager</code>, 输入如下内容</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8</pre></td><td class="code"><pre><span class="c">#!/bin/bash</span>
<span class="c">#</span>
<span class="c"># put this script in ~/Library/Rime, list existing user dictionaries:</span>
<span class="c"># ./rime_dict_manager --list</span>
<span class="c"># see other supported options:</span>
<span class="c"># ./rime_dict_manager</span>

<span class="nv">DYLD_LIBRARY_PATH</span><span class="o">=</span><span class="s2">"/Library/Input Methods/Squirrel.app/Contents/Frameworks"</span> <span class="s2">"/Library/Input Methods/Squirrel.app/Contents/MacOS/rime_dict_manager"</span> <span class="nv">$@</span>
</pre></td></tr></tbody></table>
</div>
    </div>
  </li>
  <li>
    <p>然后添加可执行权限</p>

    <div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>chmod +x ~/Library/Rime/rime_dict_manager
</pre></td></tr></tbody></table>
</div>
    </div>
  </li>
  <li>
    <p>进入用户资料夹 (~/Library/Rime/), 执行相关操作</p>
  </li>
</ol>

<h4 id="导入导出">导入导出</h4>

<ol>
  <li>
    <p>查看用户词典列表</p>

    <div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>./rime_dict_manager -l
</pre></td></tr></tbody></table>
</div>
    </div>
  </li>
  <li>
    <p>先关闭输入法，释放以独占方式打开的词典文件</p>

    <div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>killall Squirrel
</pre></td></tr></tbody></table>
</div>
    </div>
  </li>
  <li>
    <p>将词库导入</p>

    <div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>./rime_dict_manager -i dict_name import.txt
</pre></td></tr></tbody></table>
</div>
    </div>
  </li>
  <li>
    <p>将词库导出</p>

    <div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>./rime_dict_manager -e dict_name export.txt
</pre></td></tr></tbody></table>
</div>
    </div>
  </li>
</ol>

<h4 id="导入扩充词库">导入扩充词库</h4>

<p>应该导入到系统词库，方法：固态词典引用多份码表文件  <br />
详细解释请看《<a href="http://tieba.baidu.com/p/2757690418">〔新手推荐敎程〕关于导入词库及「深蓝词库转换」的正确操作方法 | rime 吧</a>》</p>

<table>
  <tbody>
    <tr>
      <td>感谢词库制作者，下载词库点击《[朙月拼音擴充詞庫</td>
      <td>Rime 翰林院](https://bintray.com/rime-aca/dictionaries/luna_pinyin.dict)》</td>
    </tr>
  </tbody>
</table>

<p>导入方法（以「小鹤双拼·语句流」输入方案，extend_dictionaries20131121.rar 词库文件为例）：</p>

<ol>
  <li>
    <p>修改定制文件</p>

    <div class="language-yaml highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3</pre></td><td class="code"><pre><span class="c1"># double_pinyin_flypy_fluency.custom.yaml</span>
<span class="s">patch</span><span class="pi">:</span>
  <span class="s">translator/dictionary</span><span class="pi">:</span> <span class="s">luna_pinyin.extended</span>
</pre></td></tr></tbody></table>
</div>
    </div>
  </li>
  <li>
    <p>将  <br />
luna_pinyin.hanyu.dict.yaml  <br />
luna_pinyin.extended.dict.yaml  <br />
luna_pinyin.poetry.dict.yaml  <br />
这三个词库文件移动到用户资料夹 “~/Library/Rime/”</p>
  </li>
  <li>
    <p>重新部署</p>
  </li>
  <li>
    <p><strong>注意</strong>，在「朙月拼音擴充詞庫」的这个版本中 extend_dictionaries20140909.zip,<br />
他们增加了 luna_pinyin.cn_en 这个词库，<br />
但是同时他们在 luna_pinyin.extended.dict.yaml 这个文件写明了双拼不支持 luna_pinyin.cn_en 这个词库，<br />
如果你使用的是双拼，记得在 luna_pinyin.extended.dict.yaml 文件中将 luna_pinyin.cn_en 这个去掉</p>

    <p>说的更明白一点就是，将 luna_pinyin.extended.dict.yaml 文件中的：</p>

    <div class="language-yaml highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5</pre></td><td class="code"><pre><span class="s">import_tables</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">luna_pinyin</span>
  <span class="pi">-</span> <span class="s">luna_pinyin.hanyu</span>
  <span class="pi">-</span> <span class="s">luna_pinyin.poetry</span>
  <span class="pi">-</span> <span class="s">luna_pinyin.cn_en</span>
</pre></td></tr></tbody></table>
</div>
    </div>

    <p>改写成（去掉 luna_pinyin.cn_en）</p>

    <div class="language-yaml highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4</pre></td><td class="code"><pre><span class="s">import_tables</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">luna_pinyin</span>
  <span class="pi">-</span> <span class="s">luna_pinyin.hanyu</span>
  <span class="pi">-</span> <span class="s">luna_pinyin.poetry</span>
</pre></td></tr></tbody></table>
</div>
    </div>
  </li>
</ol>

<h3 id="同步用户资料">同步用户资料</h3>

<h4 id="使用-dropbox-同步">使用 Dropbox 同步</h4>

<p>编辑 installation.yaml 文件，添加一行：</p>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>sync_dir: '/Users/username/Dropbox/sync/Rime'
</pre></td></tr></tbody></table>
</div>
</div>

<h4 id="在不同电脑间进行同步">在不同电脑间进行同步</h4>

<p>同步机制可以理解为这样的：  <br />
比如两者的同步文件夹都为 Rime（通过 Dropbox 等同步工具同步），<br />
在这之下就会生成两个以 installation_id 命名的文件夹，分别存放了两者的配置，<br />
所以两者之间的配置是不会共享的，自己同步自己的。<br />
但是用户词典是相互同步的（显然需要这个功能）</p>

<p>举个同步的例子（我在 Mac 已经进行了相关的配置，也拥有了相当的词库，<br />
我又在一台 Windows 上安装了小狼毫输入法，想使用 Mac 下相同的配置和词库）：</p>

<ol>
  <li>
    <p>在 Windows 上安装小狼毫输入法</p>
  </li>
  <li>
    <p>使用 Dropbox 等工具将鼠须管的同步文件夹同步到这台 Windows 上（例如为 Y:\Rime）</p>
  </li>
  <li>
    <p>打开小狼毫的用户文件夹（开始菜单中可直接打开），修改 installation.yaml 文件，添加一行</p>

    <div class="language-yaml highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre><span class="s">sync_dir</span><span class="pi">:</span> <span class="s">Y:\Rime</span>
</pre></td></tr></tbody></table>
</div>
    </div>

    <p><strong>注意</strong>不要在路径两边加上双引号，不然无法同步</p>
  </li>
  <li>
    <p>在开始菜单中点击小狼毫的用户资料同步</p>
  </li>
  <li>
    <p>将鼠须管的配置文件复制到小狼毫的用户资料文件夹中，<br />
例如如下的「小鹤双拼·语句流」的方案，需要复制的配置文件有：</p>

    <ul>
      <li>double_pinyin_flypy_fluency.schema.yaml</li>
      <li>chinese_contain_english.schema.yaml</li>
      <li>chinese_contain_english.dict.yaml</li>
      <li>default.custom.yaml</li>
    </ul>
  </li>
  <li>
    <p>重新部署小狼毫</p>
  </li>
</ol>

<h2 id="详细配置小鹤双拼语句流">详细配置「小鹤双拼·语句流」</h2>

<p><strong>2014-06-09 更新：</strong></p>

<p>用了一段时间的语句流，和普通的方式比起来繁琐了一点，但是又没什么明显的优点，至少在 Rime 上是这样子的，<br />
我理想中还是觉得语句流要好，但是现在 Rime 还不够强大。</p>

<p>我理想中的语句流输入方式：你输入一系列按键，然后他会自动生成一段话，<br />
有时候你会输错，有时候里面夹杂着英文。<br />
如果这个输入法非常聪明，他就会正确理解你的意思，就好像你让秘书做事一样，<br />
不用告诉他第一步是什么，第二步是什么，他理解你的意思，并且完美地做好。</p>

<p>但是 Rime 做不到秘书这样的水平，你得告诉 Rime 这是中文，这是英文，而且也不能输错。</p>

<p>普通的输入方式：空格上屏，回车输入码直接上屏。<br />
相比语句流简单了一点。所以我现在自己也不用语句流了。</p>

<p>虽然当初我写的是语句流的配置，但是没什么关系，他们只有一行配置的不同。<br />
详情见<a href="#创建「小鹤双拼·语句流」输入方案">《创建「小鹤双拼·语句流」输入方案》</a> 配置文件中的第 40 行。</p>

<hr />

<p>首先简单介绍一下语句流</p>

<p>玩法是：空格断词，回车和标点上屏  <br />
令输入码直接上屏：输入的时候切换为西文编码，然后回车上屏</p>

<p>对用户来说优点很明显，整句输入真的很爽，中英文混输很方便  <br />
对输入法来说，它能知道你输入的更多信息，使你输入更爽快</p>

<p>效果图在最上面，<a href="#">点这里乘电梯</a></p>

<h3 id="创建小鹤双拼语句流输入方案">创建「小鹤双拼·语句流」输入方案</h3>

<p>在「小鹤双拼」的基础上进行修改</p>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>cp /Library/Input\ Methods/Squirrel.app/Contents/SharedSupport/double_pinyin_flypy.schema.yaml ~/Library/Rime/double_pinyin_flypy_fluency.schema.yaml
</pre></td></tr></tbody></table>
</div>
</div>

<p>不同的地方基本都有说明</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142</pre></td><td class="code"><pre><span class="c1"># double_pinyin_flypy_fluency.schema.yaml</span>
<span class="c1"># Rime schema</span>
<span class="c1"># encoding: utf-8</span>

<span class="s">schema</span><span class="pi">:</span>
  <span class="s">schema_id</span><span class="pi">:</span> <span class="s">double_pinyin_flypy_fluency</span>        <span class="c1"># 更改方案标识</span>
  <span class="s">name</span><span class="pi">:</span> <span class="s">小鶴雙拼·語句流</span>
  <span class="s">version</span><span class="pi">:</span> <span class="s2">"</span><span class="s">fluency_0.17"</span>
  <span class="s">author</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">double pinyin layout by 鶴</span>
    <span class="pi">-</span> <span class="s">Rime schema by 佛振 &lt;chen.sst@gmail.com&gt;</span>
  <span class="s">description</span><span class="pi">:</span> <span class="pi">|</span>
    <span class="no">「朙月拼音＋小鶴雙拼」語句流方案。</span>
    <span class="no">以空格分詞、標點或回車上屏。</span>
  <span class="s">dependencies</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">stroke</span>                        <span class="c1"># 带别名的 translator 所引用的字典部署时不会自动编译</span>
    <span class="pi">-</span> <span class="s">chinese_contain_english</span>       <span class="c1"># 只有 translator/dictionary: 指定的字典会被编译</span>
    <span class="pi">-</span> <span class="s">emoji</span>                         <span class="c1"># 因此需要设置输入方案的依赖关系，保证词典可用</span>

<span class="s">switches</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">name</span><span class="pi">:</span> <span class="s">ascii_mode</span>
    <span class="s">reset</span><span class="pi">:</span> <span class="s">0</span>
    <span class="s">states</span><span class="pi">:</span> <span class="pi">[</span> <span class="nv">中文</span><span class="pi">,</span> <span class="nv">西文</span> <span class="pi">]</span>
  <span class="pi">-</span> <span class="s">name</span><span class="pi">:</span> <span class="s">full_shape</span>
    <span class="s">states</span><span class="pi">:</span> <span class="pi">[</span> <span class="nv">半角</span><span class="pi">,</span> <span class="nv">全角</span> <span class="pi">]</span>
  <span class="pi">-</span> <span class="s">name</span><span class="pi">:</span> <span class="s">ascii_punct</span>
    <span class="s">states</span><span class="pi">:</span> <span class="pi">[</span> <span class="nv">，。</span><span class="pi">,</span> <span class="nv">，．</span> <span class="pi">]</span>
  <span class="pi">-</span> <span class="s">name</span><span class="pi">:</span> <span class="s">simplification</span>
    <span class="s">states</span><span class="pi">:</span> <span class="pi">[</span> <span class="nv">漢字</span><span class="pi">,</span> <span class="nv">汉字</span> <span class="pi">]</span>

<span class="s">engine</span><span class="pi">:</span>
  <span class="s">processors</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">ascii_composer</span>
    <span class="pi">-</span> <span class="s">recognizer</span>
    <span class="pi">-</span> <span class="s">key_binder</span>
    <span class="pi">-</span> <span class="s">speller</span>
    <span class="pi">-</span> <span class="s">punctuator</span>
    <span class="pi">-</span> <span class="s">selector</span>
    <span class="pi">-</span> <span class="s">navigator</span>
    <span class="pi">-</span> <span class="s">fluency_editor</span>        <span class="c1"># 语句流必需，编辑器，处理空格、回车上屏、回退键等</span>
                            <span class="c1"># 如果你不喜欢语句流，可将其改为 express_editor</span>
  <span class="s">segmentors</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">ascii_segmentor</span>
    <span class="pi">-</span> <span class="s">matcher</span>
    <span class="pi">-</span> <span class="s">abc_segmentor</span>
    <span class="pi">-</span> <span class="s">punct_segmentor</span>
    <span class="pi">-</span> <span class="s">fallback_segmentor</span>
  <span class="s">translators</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">punct_translator</span>
    <span class="pi">-</span> <span class="s">reverse_lookup_translator</span>
    <span class="pi">-</span> <span class="s">script_translator</span>
    <span class="pi">-</span> <span class="s">table_translator@chinese_contain_english</span>      <span class="c1"># 添加码表式副翻译器</span>
    <span class="pi">-</span> <span class="s">table_translator@custom_phrase</span>                <span class="c1"># 同上</span>
    <span class="pi">-</span> <span class="s">table_translator@emoji</span>                        <span class="c1"># 同上</span>
  <span class="s">filters</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">simplifier</span>
    <span class="pi">-</span> <span class="s">uniquifier</span>

<span class="s">speller</span><span class="pi">:</span>
  <span class="s">alphabet</span><span class="pi">:</span> <span class="s">zyxwvutsrqponmlkjihgfedcba</span>
  <span class="s">delimiter</span><span class="pi">:</span> <span class="s2">"</span><span class="nv"> </span><span class="s">'"</span>
  <span class="s">algebra</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">erase/^xx$/</span>
    <span class="pi">-</span> <span class="s">derive/^([jqxy])u$/$1v/</span>
    <span class="pi">-</span> <span class="s">derive/^([aoe])([ioun])$/$1$1$2/</span>
    <span class="pi">-</span> <span class="s">xform/^([aoe])(ng)?$/$1$1$2/</span>
    <span class="pi">-</span> <span class="s">xform/iu$/Q/</span>
    <span class="pi">-</span> <span class="s">xform/(.)ei$/$1W/</span>
    <span class="pi">-</span> <span class="s">xform/uan$/R/</span>
    <span class="pi">-</span> <span class="s">xform/[uv]e$/T/</span>
    <span class="pi">-</span> <span class="s">xform/un$/Y/</span>
    <span class="pi">-</span> <span class="s">xform/^sh/U/</span>
    <span class="pi">-</span> <span class="s">xform/^ch/I/</span>
    <span class="pi">-</span> <span class="s">xform/^zh/V/</span>
    <span class="pi">-</span> <span class="s">xform/uo$/O/</span>
    <span class="pi">-</span> <span class="s">xform/ie$/P/</span>
    <span class="pi">-</span> <span class="s">xform/i?ong$/S/</span>
    <span class="pi">-</span> <span class="s">xform/ing$|uai$/K/</span>
    <span class="pi">-</span> <span class="s">xform/(.)ai$/$1D/</span>
    <span class="pi">-</span> <span class="s">xform/(.)en$/$1F/</span>
    <span class="pi">-</span> <span class="s">xform/(.)eng$/$1G/</span>
    <span class="pi">-</span> <span class="s">xform/[iu]ang$/L/</span>
    <span class="pi">-</span> <span class="s">xform/(.)ang$/$1H/</span>
    <span class="pi">-</span> <span class="s">xform/ian$/M/</span>
    <span class="pi">-</span> <span class="s">xform/(.)an$/$1J/</span>
    <span class="pi">-</span> <span class="s">xform/(.)ou$/$1Z/</span>
    <span class="pi">-</span> <span class="s">xform/[iu]a$/X/</span>
    <span class="pi">-</span> <span class="s">xform/iao$/N/</span>
    <span class="pi">-</span> <span class="s">xform/(.)ao$/$1C/</span>
    <span class="pi">-</span> <span class="s">xform/ui$/V/</span>
    <span class="pi">-</span> <span class="s">xform/in$/B/</span>
    <span class="pi">-</span> <span class="s">xlit/QWRTYUIOPSDFGHJKLZXCVBNM/qwrtyuiopsdfghjklzxcvbnm/</span>
    <span class="c1">#- abbrev/^(.).+$/$1/</span>

<span class="s">translator</span><span class="pi">:</span>
  <span class="s">dictionary</span><span class="pi">:</span> <span class="s">luna_pinyin</span>
  <span class="s">prism</span><span class="pi">:</span> <span class="s">double_pinyin_flypy_fluency</span>    <span class="c1"># 由拼写运算规则产生的拼写映射表的名称</span>
  <span class="c1"># 去掉了 preedit_format:, 作用是输入双拼码的时候不转化为全拼码</span>

<span class="c1"># 中英文混输的时候，可补全英文，并在英文两边加上半角空格</span>
<span class="c1"># 例如：我爱 Rime 输入法</span>
<span class="s">chinese_contain_english</span><span class="pi">:</span>
  <span class="s">dictionary</span><span class="pi">:</span> <span class="s">chinese_contain_english</span>

<span class="c1"># 用户自定义词典，可直接编辑文件 "~/Library/Rime/custom_phrase.txt"</span>
<span class="c1"># db_class: stabledb 指定词典格式为文本码表格式（文字&lt;TAB&gt;编码&lt;TAB&gt;权重（可选））</span>
<span class="s">custom_phrase</span><span class="pi">:</span>
  <span class="s">dictionary</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>
  <span class="s">user_dict</span><span class="pi">:</span> <span class="s">custom_phrase</span>
  <span class="s">db_class</span><span class="pi">:</span> <span class="s">stabledb</span>
  <span class="s">enable_completion</span><span class="pi">:</span> <span class="s">false</span>
  <span class="s">enable_sentence</span><span class="pi">:</span> <span class="s">false</span>
  <span class="s">initial_quality</span><span class="pi">:</span> <span class="s">1</span>

<span class="c1"># 可直接输入 Emoji 表情编码来输入表情</span>
<span class="s">emoji</span><span class="pi">:</span>
  <span class="s">dictionary</span><span class="pi">:</span> <span class="s">emoji</span>

<span class="s">reverse_lookup</span><span class="pi">:</span>
  <span class="s">dictionary</span><span class="pi">:</span> <span class="s">stroke</span>
  <span class="s">enable_completion</span><span class="pi">:</span> <span class="s">true</span>
  <span class="s">prefix</span><span class="pi">:</span> <span class="s2">"</span><span class="s">`"</span>
  <span class="s">suffix</span><span class="pi">:</span> <span class="s2">"</span><span class="s">'"</span>
  <span class="s">tips</span><span class="pi">:</span> <span class="s">〔筆畫〕</span>
  <span class="s">preedit_format</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">xlit/hspnz/一丨丿丶乙/</span>
  <span class="s">comment_format</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">xform/([nl])v/$1ü/</span>

<span class="s">punctuator</span><span class="pi">:</span>
  <span class="s">import_preset</span><span class="pi">:</span> <span class="s">symbols</span>        <span class="c1"># 导入 symbols.yaml, 用于输入特殊符号</span>

<span class="s">key_binder</span><span class="pi">:</span>
  <span class="s">import_preset</span><span class="pi">:</span> <span class="s">default</span>

<span class="s">recognizer</span><span class="pi">:</span>
  <span class="s">import_preset</span><span class="pi">:</span> <span class="s">default</span>
  <span class="s">patterns</span><span class="pi">:</span>
    <span class="s">number</span><span class="pi">:</span> <span class="s2">"</span><span class="s">^[-+]?[0-9][.:0-9]*[%]?$"</span>
    <span class="c1"># 配合特殊符号的输入</span>
    <span class="s">punct</span><span class="pi">:</span> <span class="s2">"</span><span class="s">^/[0-9]*[a-z]*$"</span>
    <span class="s">reverse_lookup</span><span class="pi">:</span> <span class="s2">"</span><span class="s">`[a-z]*'?$"</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h4 id="创建-chinese_contain_english-输入方案">创建 chinese_contain_english 输入方案</h4>

<p>因「小鹤双拼·语句流」输入方案依赖 “chinese_contain_english” 输入方案，<br />
如果不创建的话 chinese_contain_english 词典无法被编译  <br />
创建简单版本即可 <code class="highlighter-rouge">touch ~/Library/Rime/chinese_contain_english.schema.yaml</code>, 内容如下：</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre></td><td class="code"><pre><span class="c1"># chinese_contain_english.schema.yaml</span>
<span class="c1"># Rime schema</span>
<span class="c1"># encoding: utf-8</span>

<span class="s">schema</span><span class="pi">:</span>
  <span class="s">schema_id</span><span class="pi">:</span> <span class="s">chinese_contain_english</span>
  <span class="s">name</span><span class="pi">:</span> <span class="s">英文</span>
  <span class="s">version</span><span class="pi">:</span> <span class="s2">"</span><span class="s">0.1"</span>
  <span class="s">description</span><span class="pi">:</span>
    <span class="s">为了配合「小鹤双拼·语句流」输入方案</span>

<span class="s">engine</span><span class="pi">:</span>
  <span class="s">processors</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">speller</span>               <span class="c1"># 把字母追加到编码串</span>
    <span class="pi">-</span> <span class="s">selector</span>              <span class="c1"># 选字、换页</span>
    <span class="pi">-</span> <span class="s">navigator</span>             <span class="c1"># 移动插入点</span>
    <span class="pi">-</span> <span class="s">express_editor</span>        <span class="c1"># 空格确认当前输入、其他字符直接上屏</span>
  <span class="s">segmentors</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">abc_segmentor</span>         <span class="c1"># 标记输入码的类型</span>
  <span class="s">translators</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">echo_translator</span>       <span class="c1"># 没有候选项时，创建一个与编码串一个模样的候选项</span>
    <span class="pi">-</span> <span class="s">table_translator</span>      <span class="c1"># 码表式转换</span>

<span class="s">translator</span><span class="pi">:</span>
  <span class="s">dictionary</span><span class="pi">:</span> <span class="s">chinese_contain_english</span>       <span class="c1"># 设定 table_translator 使用的词典名</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h4 id="创建-chinese_contain_english-词典">创建 chinese_contain_english 词典</h4>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>touch ~/Library/Rime/chinese_contain_english.dict.yaml
</pre></td></tr></tbody></table>
</div>
</div>

<p>内容如下：</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19</pre></td><td class="code"><pre><span class="c1"># chinese_contain_english.dict.yaml</span>
<span class="c1"># Rime dictionary</span>
<span class="c1"># encoding: utf-8</span>
<span class="c1">#</span>
<span class="c1"># 中英文混输的时候有用</span>

<span class="nn">---</span>
<span class="s">name</span><span class="pi">:</span> <span class="s">chinese_contain_english</span>
<span class="s">version</span><span class="pi">:</span> <span class="s2">"</span><span class="s">0.1"</span>
<span class="s">sort</span><span class="pi">:</span> <span class="s">by_weight</span>
<span class="s">use_preset_vocabulary</span><span class="pi">:</span> <span class="s">false</span>
<span class="nn">...</span>

 <span class="s">Rime </span><span class="err">	</span><span class="s">rime</span>
 <span class="s">Android </span><span class="err">	</span><span class="s">android</span>
 <span class="s">Apple </span><span class="err">	</span><span class="s">apple</span>
 <span class="s">Mac </span><span class="err">	</span><span class="s">mac</span>
 <span class="s">Windows </span><span class="err">	</span><span class="s">windows</span>
<span class="c1"># ... 自己扩展</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>需要<strong>注意</strong>的是：<code class="highlighter-rouge"> Rime 	rime</code> 之间要有 tab，其它的类似，词典格式是如此  <br />
完整的文件内容请看：<a href="https://gist.github.com/lifenod/931e306e2ae8bd32b169">https://gist.github.com/lifenod/931e306e2ae8bd32b169</a></p>

<h3 id="添加小鹤双拼语句流输入方案以及对全局的定制">添加「小鹤双拼·语句流」输入方案以及对全局的定制</h3>

<p>首先创建对全局的用户定制文件</p>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>touch ~/Library/Rime/default.custom.yaml
</pre></td></tr></tbody></table>
</div>
</div>

<p>然后编辑该文件</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28</pre></td><td class="code"><pre><span class="c1"># default.custom.yaml</span>
<span class="c1"># Rime default settings</span>
<span class="c1"># encoding: utf-8</span>

<span class="s">patch</span><span class="pi">:</span>
  <span class="s">schema_list</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">schema</span><span class="pi">:</span> <span class="s">double_pinyin_flypy_fluency</span>   <span class="c1"># 新增「小鶴雙拼·語句流」</span>
    <span class="pi">-</span> <span class="s">schema</span><span class="pi">:</span> <span class="s">luna_pinyin</span>
    <span class="pi">-</span> <span class="s">schema</span><span class="pi">:</span> <span class="s">cangjie5</span>
    <span class="pi">-</span> <span class="s">schema</span><span class="pi">:</span> <span class="s">luna_pinyin_fluency</span>
    <span class="pi">-</span> <span class="s">schema</span><span class="pi">:</span> <span class="s">luna_pinyin_simp</span>
    <span class="pi">-</span> <span class="s">schema</span><span class="pi">:</span> <span class="s">luna_pinyin_tw</span>

  <span class="s">key_binder/bindings</span><span class="pi">:</span>                      <span class="c1"># 以方括号换页</span>
    <span class="pi">-</span> <span class="s">when</span><span class="pi">:</span> <span class="s">paging</span>
      <span class="s">accept</span><span class="pi">:</span> <span class="s">bracketleft</span>
      <span class="s">send</span><span class="pi">:</span> <span class="s">Page_Up</span>
    <span class="pi">-</span> <span class="s">when</span><span class="pi">:</span> <span class="s">has_menu</span>
      <span class="s">accept</span><span class="pi">:</span> <span class="s">bracketright</span>
      <span class="s">send</span><span class="pi">:</span> <span class="s">Page_Down</span>

  <span class="s">ascii_composer/good_old_caps_lock</span><span class="pi">:</span> <span class="s">true</span>   <span class="c1"># 中西文切换快捷键</span>
  <span class="s">ascii_composer/switch_key</span><span class="pi">:</span>
    <span class="s">Caps_Lock</span><span class="pi">:</span> <span class="s">noop</span>
    <span class="s">Shift_L</span><span class="pi">:</span> <span class="s">inline_ascii</span>
    <span class="s">Shift_R</span><span class="pi">:</span> <span class="s">noop</span>
    <span class="s">Control_L</span><span class="pi">:</span> <span class="s">noop</span>
    <span class="s">Control_R</span><span class="pi">:</span> <span class="s">noop</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="外观设定-1">外观设定</h3>

<p>见上文《<a href="#外观设定">外观设定</a>》</p>

<h3 id="导入扩充词库-1">导入扩充词库</h3>

<p>见上文《<a href="#导入扩充词库">导入扩充词库</a>》</p>

<h3 id="同步用户资料-1">同步用户资料</h3>

<p>见上文《<a href="#同步用户资料">同步用户资料</a>》</p>

<h2 id="ios-上的双拼输入法">iOS 上的双拼输入法</h2>

<p>在 iOS 9 系统下，我使用的是「SPi 双拼输入法 for iPhone」，一款不需要「完全访问」的输入法，<br />
界面近乎原生，简单快速，双拼功能也足够使用</p>

<p>官网：<a href="http://spiim.com/">http://spiim.com/</a>  <br />
GitHub 主页：<a href="https://github.com/guoc/spi">https://github.com/guoc/spi</a>, 这款输入法是开源的</p>

<hr />
<p>参考：  <br />
<a href="https://github.com/rime/home/wiki/MoodCollection">Rime 心情集 | GitHub</a>  <br />
<a href="https://github.com/rime/home/wiki/UserGuide">說明書 | GitHub</a>  <br />
<a href="https://github.com/rime/home/wiki/CustomizationGuide">Rime 定製指南 | GitHub</a>  <br />
<a href="https://github.com/rime/home/wiki/RimeWithSchemata">Rime 輸入方案設計書 | GitHub</a>  <br />
<a href="https://github.com/LEOYoon-Tsaw/Rime_collections/blob/master/Rime_description.md">雪齋的文檔 | GitHub</a>  <br />
<a href="http://tieba.baidu.com/p/2283095493">预备发布一个新版本【小狼毫】0.9.21 | rime 吧</a>  <br />
<a href="http://tieba.baidu.com/p/2757690418">〔新手推荐敎程〕关于导入词库及「深蓝词库转换」的正确操作方法 | rime 吧</a></p>

  </div>

  <div class="quiet-link">
    
    <span>上一篇：</span><a href="/mac-terminal/">Mac 下配置终端环境 iTerm2 + Zsh + Oh My Zsh + tmux</a><br />
    
    
    <span>下一篇：</span><a href="/proxychains-ng/">Mac 下安装及配置 ProxyChains-NG 实现终端下代理</a>
    
  </div>

</article>



<hr>

<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'mwum'; // required: replace example with your forum shortname
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>




      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">
    <div class="footer-content">
      <p>
        <span class="no-palm">本站采用 <a rel="license" href="//creativecommons.org/licenses/by-sa/4.0/">知识共享署名-相同方式共享 4.0 国际许可协议</a> 进行许可<br></span>
        <span>&copy;2013-2018 <a href="http://www.dreamxu.com">明无梦</a></span>
        <span class="no-palm">| </span>
        <span>Powered by <a href="//jekyllrb.com/">jekyll</a></span>
        <span class="no-palm">| </span>
        <span>Hosted by <a href="//github.com/">github</a></span>
        <span class="no-palm">| </span>
        <span>Designed by <a href="http://www.dreamxu.com">明无梦</a></span>
        <span class="no-laptop"><a rel="license" href="//creativecommons.org/licenses/by-sa/4.0/">知识共享署名-相同方式共享 4.0 国际许可协议</a></span>
      </p>
    </div>

  </div>

</footer>


    <script type="text/javascript" src="/js/main.js"></script>





    

<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-39279084-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>




  </body>

</html>
