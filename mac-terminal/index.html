<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <title>Mac 下配置终端环境 iTerm2 + Zsh + Oh My Zsh + tmux | 明无梦</title>
  <meta name="description" content="iTerm2">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://www.dreamxu.com/mac-terminal/">
  <link rel="alternate" type="application/rss+xml" title="明无梦" href="http://www.dreamxu.com/feed.xml">
  <link rel="icon" href="/favicon.ico" type="image/x-icon">
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">明无梦</a>

    <nav class="site-nav">
      <a class="menu-icon" id="js-nav-menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <a class="menu-icon-activate" id="js-nav-menu-icon-activate">
        <svg viewBox="0 0 36 15">
          <path fill="#424242" d="m36,1.484c0,0.82 -0.665,1.484 -1.484,1.484l-33.032,0c-0.819,0.001 -1.484,-0.664 -1.484,-1.484l0,0c0,-0.819 0.665,-1.484 1.484,-1.484l33.032,0c0.82,0 1.484,0.665 1.484,1.484l0,0z"/>
          <path fill="#424242" d="m36,7.516c0,0.819 -0.665,1.484 -1.484,1.484l-33.032,0c-0.819,0 -1.484,-0.665 -1.484,-1.484l0,0c0,-0.82 0.665,-1.484 1.484,-1.484l33.032,0c0.82,-0.001 1.484,0.664 1.484,1.484l0,0z"/>
          <path fill="#424242" d="m36,13.516c0,0.819 -0.665,1.484 -1.484,1.484l-33.032,0c-0.819,0 -1.484,-0.665 -1.484,-1.484l0,0c0,-0.82 0.665,-1.484 1.484,-1.484l33.032,0c0.82,-0.001 1.484,0.664 1.484,1.484l0,0z"/>
        </svg>
      </a>

      <div class="trigger" id="js-nav-menu-trigger">
        <a class="page-link" href="/archive">归档</a>
        <a class="page-link" href="/tags">标签</a>
        <a class="page-link" href="/books">书籍</a>
        <a class="page-link" href="/tweet/2018">微语</a>
        <a class="page-link" href="/about">关于</a>
        <a class="page-link" href="/rss.xml">订阅</a>
      </div>
    </nav>

  </div>

</header>


    <div class="content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title"><a href="/mac-terminal/">Mac 下配置终端环境 iTerm2 + Zsh + Oh My Zsh + tmux</a></h1>
    <ul class="post-meta">
      <li class="published-date">2014-05-11</li>
      
        <li class="updated-date"> | 更新: 2014-10-26</li>
      

      
        <li> | 标签: </li>
        
          <li class="post-tag"><a href="/tags/?names=记录#tag-list-display">记录</a></li>
        
          <li class="post-tag"><a href="/tags/?names=iTerm2#tag-list-display">iTerm2</a></li>
        
          <li class="post-tag"><a href="/tags/?names=Zsh#tag-list-display">Zsh</a></li>
        
          <li class="post-tag"><a href="/tags/?names=Oh My Zsh#tag-list-display">Oh My Zsh</a></li>
        
          <li class="post-tag"><a href="/tags/?names=tmux#tag-list-display">tmux</a></li>
        
      
    </ul>
  </header>

  <div class="post-content" itemprop="articleBody">
    <h2 id="iterm2">iTerm2</h2>

<blockquote>
  <p>iTerm 2 is a terminal emulator for Mac OS X that does amazing things.</p>
</blockquote>

<p>iTerm2 是一个终端模拟器，官方网站：<a href="http://www.iterm2.com/">http://www.iterm2.com/</a></p>

<h3 id="更改配色方案为-solarized">更改配色方案为 Solarized</h3>

<p><strong>注意</strong>：iTerm2 3.0.12（应该比这更早）已经内置 Solarized 的配色方案了，直接在 iTerm2 - Preferences - Profiles - Colors 里面配置就好了</p>

<p>Solarized 的主页：<a href="http://ethanschoonover.com/solarized">http://ethanschoonover.com/solarized</a></p>

<p>直接去主页下载或者使用 Git</p>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>git clone git://github.com/altercation/solarized.git
</pre></td></tr></tbody></table>
</div>
</div>

<p>然后打开 solarized/iterm2-colors-solarized/ 双击里面的文件</p>

<h4 id="遇到的问题">遇到的问题</h4>

<p>终端灰蒙蒙的，就像下面这样</p>

<p><img src="/assets/images/posts/2014-05-11_230829.png" alt="terminal-gray" /></p>

<p>下面我们来回到彩色世界：  <br />
依次打开 iTerm2 - Preferences - Profiles - Text - Text Rendering，将 Draw bold text in bright colors 前面的勾去掉  <br />
彩色的世界就回来了</p>

<p><img src="/assets/images/posts/2014-05-11_230856.png" alt="terminal-color" /></p>

<h3 id="有意思的配置">有意思的配置</h3>

<ul>
  <li>
    <p>快捷键呼出  <br />
Preferences - Keys - Hotkey - Hotkey toggles a dedicated window with profile  <br />
把它设置成 Hotkey Window，按快捷键之后 Hotkey Window 会从屏幕上面折叠下来</p>
  </li>
  <li>
    <p>菜单栏中的 Window 还有一些有趣的东西，比如保存读取窗口快照</p>
  </li>
  <li>
    <p>Preferences - Profiles - Terminal - Terminal Emulation - Report Terminal Type  <br />
将其中的 xterm 改成 xterm-256color，比如在 Vim 显示一些配色方案会好很多</p>
  </li>
  <li>
    <p>复用上个会话的目录  <br />
Preferences - Profiles - Working Directory - Reuse previous session’s directory</p>
  </li>
</ul>

<h3 id="快捷键">快捷键</h3>

<ul>
  <li><code class="highlighter-rouge">⌘ + Click</code>：可以打开文件，文件夹和链接</li>
  <li><code class="highlighter-rouge">⌘ + n</code>：新建窗口</li>
  <li><code class="highlighter-rouge">⌘ + t</code>：新建标签页</li>
  <li><code class="highlighter-rouge">⌘ + w</code>：关闭当前页</li>
  <li><code class="highlighter-rouge">⌘ + 数字</code> &amp; <code class="highlighter-rouge">⌘ + 方向键</code>：切换标签页</li>
  <li><code class="highlighter-rouge">⌥⌘ + 数字</code>：切换窗口</li>
  <li><code class="highlighter-rouge">⌘ + enter</code>：切换全屏</li>
  <li><code class="highlighter-rouge">⌘ + d</code>：左右分屏</li>
  <li><code class="highlighter-rouge">⇧⌘ + d</code>：上下分屏</li>
  <li><code class="highlighter-rouge">⌘ + ;</code>：自动补全历史记录</li>
  <li><code class="highlighter-rouge">⇧⌘ + h</code>：自动补全剪贴板历史</li>
  <li><code class="highlighter-rouge">⌥⌘ + e</code>：查找所有来定位某个标签页</li>
  <li><code class="highlighter-rouge">⌘ + r</code> &amp; <code class="highlighter-rouge">⌃ + l</code>：清屏</li>
  <li><code class="highlighter-rouge">⌘ + /</code>：显示光标位置</li>
  <li><code class="highlighter-rouge">⌥⌘ + b</code>：历史回放</li>
  <li><code class="highlighter-rouge">⌘ + f</code>：查找，然后用 <code class="highlighter-rouge">tab</code> 和 <code class="highlighter-rouge">⇧ + tab</code> 可以向右和向左补全，补全之后的内容会被自动复制，<br />
还可以用 <code class="highlighter-rouge">⌥ + enter</code> 将查找结果输入终端</li>
  <li>选中即复制，鼠标中键粘贴</li>
</ul>

<p>很多快捷键都是通用的，和 Emace 等都是一样的</p>

<ul>
  <li><code class="highlighter-rouge">⌃ + u</code>：清空当前行</li>
  <li><code class="highlighter-rouge">⌃ + a</code>：移动到行首</li>
  <li><code class="highlighter-rouge">⌃ + e</code>：移动到行尾</li>
  <li><code class="highlighter-rouge">⌃ + f</code>：向前移动</li>
  <li><code class="highlighter-rouge">⌃ + b</code>：向后移动</li>
  <li><code class="highlighter-rouge">⌃ + p</code>：上一条命令</li>
  <li><code class="highlighter-rouge">⌃ + n</code>：下一条命令</li>
  <li><code class="highlighter-rouge">⌃ + r</code>：搜索历史命令</li>
  <li><code class="highlighter-rouge">⌃ + y</code>：召回最近用命令删除的文字</li>
  <li><code class="highlighter-rouge">⌃ + h</code>：删除光标之前的字符</li>
  <li><code class="highlighter-rouge">⌃ + d</code>：删除光标所指的字符</li>
  <li><code class="highlighter-rouge">⌃ + w</code>：删除光标之前的单词</li>
  <li><code class="highlighter-rouge">⌃ + k</code>：删除从光标到行尾的内容</li>
  <li><code class="highlighter-rouge">⌃ + t</code>：交换光标和之前的字符</li>
</ul>

<p>还有鼠标和触摸板控制  <br />
Preferences - Pointer</p>

<h2 id="zsh">Zsh</h2>

<p>Mac 系统自带了 Zsh, 一般不是最新版，如果需要最新版可通过 Homebrew 来安装</p>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>brew install zsh
</pre></td></tr></tbody></table>
</div>
</div>

<p>可通过 <code class="highlighter-rouge">zsh --version</code> 命令查看 Zsh 的版本  <br />
使用 <code class="highlighter-rouge">echo $ZSH_VERSION</code> 命令查看当前使用的 Zsh 版本</p>

<p>修改默认 Shell</p>

<ol>
  <li>
    <p>在 /etc/shells 文件中加入如下一行</p>

    <div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>/usr/local/bin/zsh
</pre></td></tr></tbody></table>
</div>
    </div>
  </li>
  <li>
    <p>然后运行命令</p>

    <div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>chsh -s /usr/local/bin/zsh
</pre></td></tr></tbody></table>
</div>
    </div>
  </li>
</ol>

<h2 id="oh-my-zsh">Oh My Zsh</h2>

<p>Oh My Zsh 用来管理 Zsh 配置的，自带了好用的基本配置，基本都是 Zsh 的标配了，你不用再一步步重新配置 Zsh ，节约你的宝贵时间</p>

<p>项目主页：<a href="https://github.com/robbyrussell/oh-my-zsh">https://github.com/robbyrussell/oh-my-zsh</a></p>

<p>安装方法见主页，很简单就不说了，下面说说一些常用的好用的功能：  <br />
配置文件在 <code class="highlighter-rouge">~/.zshrc</code></p>

<ul>
  <li>
    <p>连续按 tab, 能直接选择文件及文件夹，还可以使用 <code class="highlighter-rouge">⌃ + n/p/f/b</code> 来选择</p>
  </li>
  <li>
    <p>直接输入文件名打开文件，可指定不同的后缀名用不同的程序打开  <br />
在配置文件中写入 <code class="highlighter-rouge">alias -s md=mvim</code>, 表明在命令行中输入 md 后缀的文件名，会用 mvim 打开  <br />
又例如：<code class="highlighter-rouge">alias -s gz="tar -xzvf"</code>, 自动解压后缀为 gz 的压缩包  <br />
一些常用的压缩方式如下：</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5</pre></td><td class="code"><pre><span class="nb">alias</span> -s <span class="nv">tar</span><span class="o">=</span><span class="s2">"tar -xvf"</span>
<span class="nb">alias</span> -s <span class="nv">gz</span><span class="o">=</span><span class="s2">"tar -xzvf"</span>
<span class="nb">alias</span> -s <span class="nv">tgz</span><span class="o">=</span><span class="s2">"tar -xzvf"</span>
<span class="nb">alias</span> -s <span class="nv">bz2</span><span class="o">=</span><span class="s2">"tar -xjvf"</span>
<span class="nb">alias</span> -s <span class="nv">zip</span><span class="o">=</span><span class="s2">"unzip"</span>
</pre></td></tr></tbody></table>
</div>
    </div>
  </li>
  <li>
    <p><code class="highlighter-rouge">kill &lt;tab&gt;</code> 会自动列出进程，或者 <code class="highlighter-rouge">kill nginx</code></p>
  </li>
  <li>
    <p>支持递归，例如 <code class="highlighter-rouge">ls **/*</code> 列出当前目录下所有文件及目录，并递归目录</p>
  </li>
  <li>
    <p>使 <code class="highlighter-rouge">man</code> 结果高亮显示，在配置文件中写入如下内容：</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8</pre></td><td class="code"><pre><span class="c"># man page highlight</span>
<span class="nb">export </span><span class="nv">LESS_TERMCAP_mb</span><span class="o">=</span><span class="nv">$'</span><span class="se">\E</span><span class="o">[</span>01;31m<span class="s1">'       # begin blinking
export LESS_TERMCAP_md=$'</span><span class="se">\E</span><span class="o">[</span>01;38;5;74m<span class="s1">'  # begin bold
export LESS_TERMCAP_me=$'</span><span class="se">\E</span><span class="o">[</span>0m<span class="s1">'           # end mode
export LESS_TERMCAP_se=$'</span><span class="se">\E</span><span class="o">[</span>0m<span class="s1">'           # end standout-mode
export LESS_TERMCAP_so=$'</span><span class="se">\E</span><span class="o">[</span>38;5;246m<span class="s1">'    # begin standout-mode - info box
export LESS_TERMCAP_ue=$'</span><span class="se">\E</span><span class="o">[</span>0m<span class="s1">'           # end underline
export LESS_TERMCAP_us=$'</span><span class="se">\E</span><span class="o">[</span>04;38;5;146m<span class="s1">' # begin underline
</span></pre></td></tr></tbody></table>
</div>
    </div>
  </li>
</ul>

<p>Oh My Zsh 本身自带了很多插件，不过基本都没有启用，插件目录 <code class="highlighter-rouge">~/.oh-my-zsh/plugins</code>  <br />
例如启用插件 git, autojump osx, 需要在配置文件中加入如下内容</p>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>plugins=(git autojump osx)
</pre></td></tr></tbody></table>
</div>
</div>

<ul>
  <li>
    <p>osx 插件</p>

    <ul>
      <li><code class="highlighter-rouge">man-preview</code> 通过 preview 程序查看一个命令的手册</li>
      <li><code class="highlighter-rouge">quick-look</code> 快速预览文件</li>
      <li><code class="highlighter-rouge">pfd</code> 返回当前 Finder 打开的文件夹的路径</li>
      <li><code class="highlighter-rouge">cdf</code> 切换到当前 Finder 所在的目录</li>
    </ul>
  </li>
  <li>
    <p>autojump 插件</p>

    <p>需要先安装 autojump</p>

    <div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>brew install autojump
</pre></td></tr></tbody></table>
</div>
    </div>

    <p>使用方法：</p>

    <div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>j 目录名或目录名的一部分
</pre></td></tr></tbody></table>
</div>
    </div>

    <p>跳转到最多访问的目录</p>
  </li>
  <li>
    <p>zsh-autosuggestions 插件：<a href="https://github.com/zsh-users/zsh-autosuggestions">https://github.com/zsh-users/zsh-autosuggestions</a></p>

    <p>Fish 类的自动建议插件</p>

    <p>自动建议的字体颜色可能和你终端的颜色相近，你可以将其改成其它的，比如设置为 blue</p>

    <div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>export ZSH_AUTOSUGGEST_HIGHLIGHT_STYLE='fg=blue'
</pre></td></tr></tbody></table>
</div>
    </div>
  </li>
</ul>

<h2 id="tmux">tmux</h2>

<p>官网：<a href="http://tmux.github.io/">http://tmux.github.io/</a></p>

<p>一个终端复用软件，可将终端方案化</p>

<p>安装</p>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>brew install tmux
</pre></td></tr></tbody></table>
</div>
</div>

<p>配置</p>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>mvim ~/.tmux.conf
</pre></td></tr></tbody></table>
</div>
</div>

<p>并不喜欢反人类的全键盘式操作，而且也没有特别吸引我的点，所以基本不使用</p>

<p>经常连接服务器的人用起来应该挺好用的  <br />
比如，在一个窗口中分隔成多个终端同时运行不同的命令  <br />
使用 SSH 的时候，在网络不稳定的情况下，可保存工作环境</p>

<p>在网络不好的环境下，还可以尝试使用 <a href="https://mosh.mit.edu/">Mosh</a> 来代替 SSH</p>

  </div>

  <div class="quiet-link">
    
    <span>上一篇：</span><a href="/raspberrypi-nas/">树莓派作 NAS (RAID1, SMB/FTP, ARIA2, 迅雷离线, 异地备份)</a><br />
    
    
    <span>下一篇：</span><a href="/install-config-squirrel/">安装及配置 Mac 上的 Rime 输入法——鼠鬚管 (Squirrel)</a>
    
  </div>

</article>



<hr>

<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'mwum'; // required: replace example with your forum shortname
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>




      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">
    <div class="footer-content">
      <p>
        <span class="no-palm">本站采用 <a rel="license" href="//creativecommons.org/licenses/by-sa/4.0/">知识共享署名-相同方式共享 4.0 国际许可协议</a> 进行许可<br></span>
        <span>&copy;2013-2018 <a href="http://www.dreamxu.com">明无梦</a></span>
        <span class="no-palm">| </span>
        <span>Powered by <a href="//jekyllrb.com/">jekyll</a></span>
        <span class="no-palm">| </span>
        <span>Hosted by <a href="//github.com/">github</a></span>
        <span class="no-palm">| </span>
        <span>Designed by <a href="http://www.dreamxu.com">明无梦</a></span>
        <span class="no-laptop"><a rel="license" href="//creativecommons.org/licenses/by-sa/4.0/">知识共享署名-相同方式共享 4.0 国际许可协议</a></span>
      </p>
    </div>

  </div>

</footer>


    <script type="text/javascript" src="/js/main.js"></script>





    

<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-39279084-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>




  </body>

</html>
